  5770WDS V7R1M0  100416 RN        IBM ILE RPG             NOXDB/XMLPARS140         DKSRV206   04-06-19 14:48:46        Page      1
   Command  . . . . . . . . . . . . :   CRTBNDRPG
     Issued by  . . . . . . . . . . :     NLI
   Program  . . . . . . . . . . . . :   XMLPARS140
     Library  . . . . . . . . . . . :     NOXDB
   Text 'description' . . . . . . . :   *SRCMBRTXT
   Source stream file   . . . . . . :   XMLPARS140.RPGLE
     CCSID  . . . . . . . . . . . . :     500
   Text 'description' . . . . . . . :
   Last Change  . . . . . . . . . . :   04-06-19  14:48:40
   Generation severity level  . . . :   10
   Default activation group . . . . :   *YES
   Compiler options . . . . . . . . :   *XREF      *GEN       *NOSECLVL  *SHOWCPY
                                        *EXPDDS    *EXT       *NOSHOWSKP *NOSRCSTMT
                                        *DEBUGIO   *UNREF     *NOEVENTF
   Debugging views  . . . . . . . . :   *LIST
   Debug encryption key . . . . . . :   *NONE
   Output . . . . . . . . . . . . . :   *PRINT
   Optimization level . . . . . . . :   *NONE
   Source listing indentation . . . :   *NONE
   Type conversion options  . . . . :   *NONE
   Sort sequence  . . . . . . . . . :   *HEX
   Language identifier  . . . . . . :   *JOBRUN
   Replace program  . . . . . . . . :   *YES
   User profile . . . . . . . . . . :   *USER
   Authority  . . . . . . . . . . . :   *LIBCRTAUT
   Truncate numeric . . . . . . . . :   *YES
   Fix numeric  . . . . . . . . . . :   *NONE
   Target release . . . . . . . . . :   *CURRENT
   Allow null values  . . . . . . . :   *NO
   Define condition names . . . . . :   *NONE
   Enable performance collection  . :   *PEP
   Profiling data . . . . . . . . . :   *NOCOL
   Licensed Internal Code options . :
   Generate program interface . . . :   *NO
   Include directory  . . . . . . . :   ./..
                                    :   /prj/noxdb
   Preprocessor options . . . . . . :   *NONE
  5770WDS V7R1M0  100416 RN        IBM ILE RPG             NOXDB/XMLPARS140         DKSRV206   04-06-19 14:48:46        Page      2
 Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
 Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
                           S o u r c e   L i s t i n g
      1                                                                                                                      000001
      2    //------------------------------------------------------------- *                                                 000002
      3                                                                                                                      000003
      4    Ctl-Opt BndDir('NOXDB') dftactgrp(*NO) ACTGRP('QILE' );                                                           000004
      5                                                                                                                      000005
      6    //------------------------------------------------------------- *                                                 000006
      7                                                                                                                      000007
      8    // /include xmlParser                                                                                             000008
      9    /include 'headers/xmlParser.rpgle'                                                                                000009
         *--------------------------------------------------------------------------------------------*
         * RPG member name  . . . . . :  xmlParser+                                                   *                     1
         * External name  . . . . . . :  ./../headers/xmlParser.rpgle                                 *                     1
         * Last change  . . . . . . . :  04-06-19  14:42:33                                           *                     1
         *--------------------------------------------------------------------------------------------*
     10+   //---------------------------------------------------------------------- *                                       1000001
     11+   //This is the prototype for BlueSeries/IceBreak - JSON and XML parser                                            1000002
     12+   //Use the JSONXML binddir when creating your program and include this                                            1000003
     13+   //prototypes like:                                                                                               1000004
     14+                                                                                                                    1000005
     15+   //H BNDDIR('JSONPARSER')                                                                                         1000006
     16+   ///include jsonParser                                                                                            1000007
     17+                                                                                                                    1000008
     18+   //Or                                                                                                             1000009
     19+                                                                                                                    1000010
     20+   //H BNDDIR('XMLPARSER')                                                                                          1000011
     21+   ///include xmlParser                                                                                             1000012
     22+                                                                                                                    1000013
     23+   //Note: Both XMLPARSER and JSONPARSER headers are autogenerated from                                             1000014
     24+   //the JSONXML header. so please do not make any changes th there headerfi                                        1000015
     25+                                                                                                                    1000016
     26+   //Note: all binddirectories JSONPARSER, XMLPARSER and JSONXML is the same                                        1000017
     27+   //---------------------------------------------------------------------- *                                       1000018
     28+ /if defined( xml_DEF)                                                                                              1000019
             LINES EXCLUDED: 1
     29+ /endif                                                                                                             1000021
     30+ /define  xml_DEF                                                                                                   1000022
     31+   //---------------------------------------------------------------------- *                                       1000023
     32+   //Before starting that parser - to enshure right enterpretations of delimi                                       1000024
     33+   //Usage:                                                                                                         1000025
     34+   //jx_setDelimiters( xml_DELIMITERS);                                                                             1000026
     35+   //--------------------------------------------------------------------- *                                        1000027
  5770WDS V7R1M0  100416 RN        IBM ILE RPG             NOXDB/XMLPARS140         DKSRV206   04-06-19 14:48:46        Page      3
 Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
 Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
     36+   //get delimiter pointer                                                                                          1000028
         *--------------------------------------------------------------------*
         * Compiler Options in Effect:                                        *
         *--------------------------------------------------------------------*
         *  Text 'description' . . . . . . . :                                *
         *  Generation severity level  . . . :   10                           *
         *  Default activation group . . . . :   *NO                          *
         *  Compiler options . . . . . . . . :   *XREF      *GEN              *
         *                                       *NOSECLVL  *SHOWCPY          *
         *                                       *EXPDDS    *EXT              *
         *                                       *NOSHOWSKP *NOSRCSTMT        *
         *                                       *DEBUGIO   *UNREF            *
         *                                       *NOEVENTF                    *
         *  Optimization level . . . . . . . :   *NONE                        *
         *  Source listing indentation . . . :   *NONE                        *
         *  Type conversion options  . . . . :   *NONE                        *
         *  Sort sequence  . . . . . . . . . :   *HEX                         *
         *  Language identifier  . . . . . . :   *JOBRUN                      *
         *  User profile . . . . . . . . . . :   *USER                        *
         *  Authority  . . . . . . . . . . . :   *LIBCRTAUT                   *
         *  Truncate numeric . . . . . . . . :   *YES                         *
         *  Fix numeric  . . . . . . . . . . :   *NONE                        *
         *  Allow null values  . . . . . . . :   *NO                          *
         *  Storage model . . .  . . . . . . :   *SNGLVL                      *
         *  Binding directory from Command . :   *NONE                        *
         *  Binding directory from Source  . :   NOXDB                        *
         *    Library  . . . . . . . . . . . :     *LIBL                      *
         *  Activation group . . . . . . . . :   QILE                         *
         *  Enable performance collection  . :   *PEP                         *
         *  Profiling data . . . . . . . . . :   *NOCOL                       *
         *  Generate program interface . . . :   *NO                          *
         *--------------------------------------------------------------------*
     37+   Dcl-PR xml_getDelimiters Pointer extproc(*CWIDEN :'jx_GetDelimiters');                                           1000029
     38+   End-PR;                                                                                                          1000030
     39+   //Set delimiter used for locate expression                                                                       1000031
     40+   Dcl-PR xml_setDelimiters  extproc(*CWIDEN :'jx_SetDelimiters2');                                                 1000032
     41+     //always: '/\Ø#¤ .æå' in your  local CCSID                                                                     1000033
     42+     delimiterStr   Pointer    value options(*string);                                                              1000034
     43+   End-PR;                                                                                                          1000035
     44+                                                                                                                    1000036
     45+   Dcl-C xml_DELIMITERS const('/\Ø#¤ .æå''"');                                                                      1000037
  5770WDS V7R1M0  100416 RN        IBM ILE RPG             NOXDB/XMLPARS140         DKSRV206   04-06-19 14:48:46        Page      4
 Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
 Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
     46+                                                                                                                    1000038
     47+   //---------------------------------------------------------------------- *                                       1000039
     48+   //Type of a node:                                                                                                1000040
     49+   //---------------------------------------------------------------------- *                                       1000041
     50+   Dcl-C xml_UNKNOWN const(0);                                                                                      1000042
     51+   Dcl-C xml_OBJECT  const(1);                                                                                      1000043
     52+   Dcl-C xml_ARRAY   const(2);                                                                                      1000044
     53+   Dcl-C xml_EVAL    const(3);                                                                                      1000045
     54+   Dcl-C xml_POINTER_VALUE const(4);                                                                                1000046
     55+   Dcl-C xml_VALUE   const(5);                                                                                      1000047
     56+   Dcl-C xml_ROOT    const(6);                                                                                      1000048
     57+   Dcl-C xml_LITERAL const(16);                                                                                     1000049
     58+   Dcl-C xml_OBJLINK const(17);                                                                                     1000050
     59+   Dcl-C xml_OBJREPLACE const(18);                                                                                  1000051
     60+   Dcl-C xml_OBJCOPY const(18);                                                                                     1000052
     61+   Dcl-C xml_BY_CONTEXT const(19);                                                                                  1000053
     62+   Dcl-C xml_OBJMOVE const(2048);                                                                                   1000054
     63+                                                                                                                    1000055
     64+   //* Modifiers to "add" / "or" into "parseString" and "evaluate"                                                  1000056
     65+   //!! Type - have to be backwards compat.                                                                         1000057
     66+   //Unlink the source and move it to dest.                                                                         1000058
     67+   Dcl-C xml_MOVE_MODES const(2048);                                                                                1000059
     68+   //Allow strings ints and other values to                                                                         1000060
     69+   Dcl-C xml_ALLOW_PRIMITIVES const(4096);                                                                          1000061
     70+                                                                                                                    1000062
     71+   //* Combinations:                                                                                                1000063
     72+   //JX_PARSE  = xml_EVAL + xml_MOVE_NODES                                                                          1000064
     73+   Dcl-C xml_PARSE   const(2051);                                                                                   1000065
     74+                                                                                                                    1000066
     75+   //Merge options:                                                                                                 1000067
     76+   //Modifiers to "add" / "or" into "JSON_EVAL"                                                                     1000068
     77+ /if not defined(MO_MERGE)                                                                                          1000069
     78+ /define  MO_MERGE                                                                                                  1000070
     79+   //Only new elements are merged - existing                                                                        1000071
     80+   //are left untouched                                                                                             1000072
     81+   Dcl-C MO_MERGE_NEW const(256);                                                                                   1000073
     82+   //Merge and replace only existing nodes.                                                                         1000074
     83+   Dcl-C MO_MERGE_MATCH const(512);                                                                                 1000075
     84+   //Merge all: replace if it exists and                                                                            1000076
     85+   //append new nodes if not exists                                                                                 1000077
     86+   Dcl-C MO_MERGE_REPLACE const(1024 );                                                                             1000078
     87+ /endif                                                                                                             1000079
     88+                                                                                                                    1000080
     89+   Dcl-C xml_CHILD_LIST const('#0¤');                                                                               1000081
  5770WDS V7R1M0  100416 RN        IBM ILE RPG             NOXDB/XMLPARS140         DKSRV206   04-06-19 14:48:46        Page      5
 Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
 Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
     90+                                                                                                                    1000082
     91+   //---------------------------------------------------------------------- *                                       1000083
     92+   //Returns node to the xml_object tree                                                                            1000084
     93+   Dcl-PR xml_ParseFile Pointer extproc(*CWIDEN:'jx_ParseFile');                                                    1000085
     94+     //File to parse                                                                                                1000086
     95+     FileName       Pointer    value options(*string);                                                              1000087
     96+     //Parsing options                                                                                              1000088
     97+     Options        Pointer    value options(*string:*nopass);                                                      1000089
     98+   End-PR;                                                                                                          1000090
     99+                                                                                                                    1000091
    100+   //Returns node xml_object tree                                                                                   1000092
    101+   Dcl-PR xml_ParseString Pointer extproc(*CWIDEN:'jx_ParseString');                                                1000093
    102+     //String to parse                                                                                              1000094
    103+     String         Pointer    value options(*string);                                                              1000095
    104+     //Parsing options                                                                                              1000096
    105+     Options        Pointer    value options(*string:*nopass);                                                      1000097
    106+   End-PR;                                                                                                          1000098
    107+                                                                                                                    1000099
    108+   //Set , or . for numeri decimal point                                                                            1000100
    109+   Dcl-PR xml_setDecPoint  extproc(*CWIDEN : 'jx_SetDecPoint');                                                     1000101
    110+     //decimal point char                                                                                           1000102
    111+     decPoint       Pointer    value options(*string);                                                              1000103
    112+   End-PR;                                                                                                          1000104
    113+                                                                                                                    1000105
    114+   //Bool true if errors occures                                                                                    1000106
    115+   Dcl-PR xml_Error Ind extproc(*CWIDEN:'jx_Error');                                                                1000107
    116+     //jx_Object  node                                                                                              1000108
    117+     pNode          Pointer    value;                                                                               1000109
    118+   End-PR;                                                                                                          1000110
    119+                                                                                                                    1000111
    120+   //Return error description                                                                                       1000112
    121+   Dcl-PR xml_Message Varchar(1024) extproc(*CWIDEN:'jx_Message');                                                  1000113
    122+     //jx_Object                                                                                                    1000114
    123+     pNode          Pointer    value;                                                                               1000115
    124+   End-PR;                                                                                                          1000116
    125+                                                                                                                    1000117
    126+   // Without parameters you will get the last internal error                                                       1000118
    127+   // Otherwise it will format an error object                                                                      1000119
    128+   Dcl-PR xml_GetMessageObject Pointer //Return error description                                   I               1000120
    129+                              extproc(*CWIDEN:'jx_GetMessageObject');                                               1000121
    130+     MessageId      Pointer    value options(*string:*nopass);                                      I               1000122
    131+     MessageData    Pointer    value options(*string:*nopass);                                      I               1000123
    132+   End-PR;                                                                                                          1000124
    133+                                                                                                                    1000125
  5770WDS V7R1M0  100416 RN        IBM ILE RPG             NOXDB/XMLPARS140         DKSRV206   04-06-19 14:48:46        Page      6
 Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
 Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
    134+   // simple courtesy function to return a æ"success":trueå object                                                  1000126
    135+   //Return success:true object                                                                                     1000127
    136+   Dcl-PR xml_SuccessTrue Pointer extproc(*CWIDEN:'jx_SuccessTrue');                                I               1000128
    137+     MessageId      Pointer    value options(*string:*nopass);                                      I               1000129
    138+     MessageData    Pointer    value options(*string:*nopass);                                      I               1000130
    139+   End-PR;                                                                                                          1000131
    140+                                                                                                                    1000132
    141+   //Returns pointer to node                                                                                        1000133
    142+   Dcl-PR xml_Locate Pointer extproc(*CWIDEN : 'jx_GetNode');                                                       1000134
    143+     //Pointer to tree or node                                                                                      1000135
    144+     pNode          Pointer    value;                                                                               1000136
    145+     //location expression                                                                                          1000137
    146+     Expression     Pointer    value options(*string);                                                              1000138
    147+   End-PR;                                                                                                          1000139
    148+                                                                                                                    1000140
    149+   //Returns pointer to node                                                                                        1000141
    150+   Dcl-PR xml_LocateOrCreate Pointer                                                                                1000142
    151+                            extproc(*CWIDEN : 'jx_GetOrCreateNode');                                                1000143
    152+     //Pointer to tree or node                                                                                      1000144
    153+     pNode          Pointer    value;                                                                               1000145
    154+     //location expression                                                                                          1000146
    155+     Expression     Pointer    value options(*string);                                                              1000147
    156+   End-PR;                                                                                                          1000148
    157+                                                                                                                    1000149
    158+   //Returns 'ON' if node exists                                                                                    1000150
    159+   Dcl-PR xml_Has Ind extproc(*CWIDEN : 'jx_Has');                                                                  1000151
    160+     //Pointer to tree or node                                                                                      1000152
    161+     pNode          Pointer    value;                                                                               1000153
    162+     //Path to node                                                                                                 1000154
    163+     NodeName       Pointer    value options(*string);                                                              1000155
    164+   End-PR;                                                                                                          1000156
    165+                                                                                                                    1000157
    166+   //Returns 'ON' if node exists and has <> 0                                                                       1000158
    167+   Dcl-PR xml_isTrue Ind extproc(*CWIDEN : 'jx_IsTrue');                                                            1000159
    168+     //Pointer to tree or node                                                                                      1000160
    169+     pNode          Pointer    value;                                                                               1000161
    170+     //Path to node                                                                                                 1000162
    171+     NodeName       Pointer    value options(*string);                                                              1000163
    172+   End-PR;                                                                                                          1000164
    173+                                                                                                                    1000165
    174+   //Returns 'ON' if node exists and has <> 0                                                                       1000166
    175+   Dcl-PR xml_isNull Ind extproc(*CWIDEN : 'jx_IsNull');                                                            1000167
    176+     //Pointer to tree or node                                                                                      1000168
    177+     pNode          Pointer    value;                                                                               1000169
  5770WDS V7R1M0  100416 RN        IBM ILE RPG             NOXDB/XMLPARS140         DKSRV206   04-06-19 14:48:46        Page      7
 Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
 Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
    178+     //Path to node                                                                                                 1000170
    179+     NodeName       Pointer    value options(*string);                                                              1000171
    180+   End-PR;                                                                                                          1000172
    181+                                                                                                                    1000173
    182+   //Returns 'ON' if it is a valid node                                                                             1000174
    183+   Dcl-PR xml_isNode Ind extproc(*CWIDEN : 'jx_isNode');                                                            1000175
    184+     //a.k.a. false for strings                                                                                     1000176
    185+     pNode          Pointer    value;                                                                               1000177
    186+   End-PR;                                                                                                          1000178
    187+                                                                                                                    1000179
    188+   //renames the node name                                                                                          1000180
    189+   Dcl-PR xml_NodeRename Ind extproc(*CWIDEN : 'jx_NodeRename');                                                    1000181
    190+     //Pointer to tree or node                                                                                      1000182
    191+     pNode          Pointer    value;                                                                               1000183
    192+     //Path to node                                                                                                 1000184
    193+     NodeName       Pointer    value options(*string);                                                              1000185
    194+   End-PR;                                                                                                          1000186
    195+                                                                                                                    1000187
    196+   //Returns pointer to next sibling (elem)                                                                         1000188
    197+   Dcl-PR xml_GetNext Pointer extproc(*CWIDEN : 'jx_GetNodeNext');                                                  1000189
    198+     //Pointer to current node (elem)                                                                               1000190
    199+     pNode          Pointer    value;                                                                               1000191
    200+   End-PR;                                                                                                          1000192
    201+                                                                                                                    1000193
    202+   //Returns pointer to first child (elem)                                                                          1000194
    203+   Dcl-PR xml_GetChild Pointer extproc(*CWIDEN : 'jx_GetNodeChild');                                                1000195
    204+     //Pointer to current node (elem)                                                                               1000196
    205+     pNode          Pointer    value;                                                                               1000197
    206+   End-PR;                                                                                                          1000198
    207+                                                                                                                    1000199
    208+   //Returns pointer to parent node                                                                                 1000200
    209+   Dcl-PR xml_GetParent Pointer extproc(*CWIDEN : 'jx_GetNodeParent');                                              1000201
    210+     //Pointer to current node (elem)                                                                               1000202
    211+     pNode          Pointer    value;                                                                               1000203
    212+   End-PR;                                                                                                          1000204
    213+                                                                                                                    1000205
    214+   Dcl-PR xml_SetEval pointer extproc(*CWIDEN:'jx_SetEvalByName');                                                  1000206
    215+     pNode          Pointer    value;                                                                               1000207
    216+     Expresion      Pointer    value options(*string);                                                              1000208
    217+     Value          Pointer    value options(*string);                                                              1000209
    218+   End-PR;                                                                                                          1000210
    219+                                                                                                                    1000211
    220+   Dcl-PR xml_SetStr Pointer extproc(*CWIDEN: 'jx_SetStrByName');                                                   1000212
    221+     //Pointer to xml_ tree                                                                                         1000213
  5770WDS V7R1M0  100416 RN        IBM ILE RPG             NOXDB/XMLPARS140         DKSRV206   04-06-19 14:48:46        Page      8
 Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
 Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
    222+     pNode          Pointer    value;                                                                               1000214
    223+     //X-path locations to node or attributes                                                                       1000215
    224+     Expresion      Pointer    value options(*string);                                                              1000216
    225+     //New value to set / pointer to object                                                                         1000217
    226+     Value          Pointer    value options(*string);                                                              1000218
    227+   End-PR;                                                                                                          1000219
    228+                                                                                                                    1000220
    229+   Dcl-PR xml_SetInt Pointer extproc(*CWIDEN: 'jx_SetIntByName');                                                   1000221
    230+     //Pointer to xml_ tree                                                                                         1000222
    231+     pNode          Pointer    value;                                                                               1000223
    232+     //X-path locations to node or attributes                                                                       1000224
    233+     Expresion      Pointer    value options(*string);                                                              1000225
    234+     //New value to set / pointer to object                                                                         1000226
    235+     Value          Int(10)    value;                                                                               1000227
    236+   End-PR;                                                                                                          1000228
    237+                                                                                                                    1000229
    238+   Dcl-PR xml_SetNum Pointer extproc(*CWIDEN: 'jx_SetDecByName');                                                   1000230
    239+     //Pointer to xml_ tree                                                                                         1000231
    240+     pNode          Pointer    value;                                                                               1000232
    241+     //X-path locations to node or attributes                                                                       1000233
    242+     Expresion      Pointer    value options(*string);                                                              1000234
    243+     //New value to set / pointer to object                                                                         1000235
    244+     Value          Packed(30:15) value;                                                                            1000236
    245+   End-PR;                                                                                                          1000237
    246+                                                                                                                    1000238
    247+   Dcl-PR xml_SetBool Pointer extproc(*CWIDEN: 'jx_SetBoolByName');                                                 1000239
    248+     //Pointer to xml_ tree                                                                                         1000240
    249+     pNode          Pointer    value;                                                                               1000241
    250+     //X-path locations to node or attributes                                                                       1000242
    251+     Expresion      Pointer    value options(*string);                                                              1000243
    252+     //New value to set / pointer to object                                                                         1000244
    253+     Value          Ind        value;                                                                               1000245
    254+   End-PR;                                                                                                          1000246
    255+                                                                                                                    1000247
    256+   Dcl-PR xml_SetPtr Pointer extproc(*CWIDEN: 'jx_SetPtrByName');                                                   1000248
    257+     //Pointer to xml_ tree                                                                                         1000249
    258+     pNode          Pointer    value;                                                                               1000250
    259+     //X-path locations to node or attributes                                                                       1000251
    260+     Expresion      Pointer    value options(*string);                                                              1000252
    261+     //Pointer to anything - You do the cleanup                                                                     1000253
    262+     Value          Pointer    value;                                                                               1000254
    263+   End-PR;                                                                                                          1000255
    264+                                                                                                                    1000256
    265+   Dcl-PR xml_SetProcPtr Pointer extproc(*CWIDEN: 'jx_SetPtrByName');                                               1000257
  5770WDS V7R1M0  100416 RN        IBM ILE RPG             NOXDB/XMLPARS140         DKSRV206   04-06-19 14:48:46        Page      9
 Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
 Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
    266+     pNode          Pointer    value; //Pointer to xml_ tree                                                        1000258
    267+     //X-path locations to node or attributes                                                                       1000259
    268+     Expresion      Pointer    value options(*string);                                                              1000260
    269+     Proc           Pointer(*Proc); //Pointer to a procedure                                                        1000261
    270+     //*ON=String escape, *OFF=If literals                                                                          1000262
    271+     isString       Ind        value options(*nopass);                                                              1000263
    272+   End-PR;                                                                                                          1000264
    273+                                                                                                                    1000265
    274+   Dcl-PR xml_SetValue Pointer extproc(*CWIDEN: 'jx_SetValueByName');                                               1000266
    275+     //Pointer to xml_ tree                                                                                         1000267
    276+     pNode          Pointer    value;                                                                               1000268
    277+     //X-path locations to node or attributes                                                                       1000269
    278+     Expresion      Pointer    value options(*string);                                                              1000270
    279+     //New value to set / pointer to object                                                                         1000271
    280+     Value          Pointer    value options(*string:*nopass);                                                      1000272
    281+     //Optional new type (Refer "node type"                                                                         1000273
    282+     Type           Uns(5)     value options(*nopass);                                                              1000274
    283+   End-PR;                                                                                                          1000275
    284+                                                                                                                    1000276
    285+   Dcl-PR xml_GetValueStr Varchar(32767)                                                                            1000277
    286+                         extproc(*CWIDEN : 'jx_GetNodeValueVC');                                                    1000278
    287+     //Pointer to node                                                                                              1000279
    288+     pNode          Pointer    value;                                                                               1000280
    289+     //If not found - default value                                                                                 1000281
    290+     Defaultvalue   Pointer    value options(*string:*nopass);                                                      1000282
    291+   End-PR;                                                                                                          1000283
    292+                                                                                                                    1000284
    293+   Dcl-PR xml_GetValueNum Packed(30:15)                                                                             1000285
    294+                         extproc(*CWIDEN : 'jx_GetNodeValueNum');                                                   1000286
    295+     //Pointer to node                                                                                              1000287
    296+     pNode          Pointer    value;                                                                               1000288
    297+     //If not found - default value                                                                                 1000289
    298+     Defaultvalue   Packed(30:15) value options(*NOPASS);                                                           1000290
    299+   End-PR;                                                                                                          1000291
    300+                                                                                                                    1000292
    301+   Dcl-PR xml_GetValueInt Int(20) extproc(*CWIDEN : 'jx_GetNodeValueInt');                          I               1000293
    302+     pNode          Pointer    value; //Pointer to node                                             I               1000294
    303+     //If not found - default value                                                                                 1000295
    304+     Defaultvalue   Int(20)    value options(*NOPASS);                                              I               1000296
    305+   End-PR;                                                                                                          1000297
    306+                                                                                                                    1000298
    307+   Dcl-PR xml_GetValuePtr Pointer extproc(*CWIDEN : 'jx_GetNodeValuePtr');                                          1000299
    308+     //Pointer to node                                                                                              1000300
    309+     pNode          Pointer    value;                                                                               1000301
  5770WDS V7R1M0  100416 RN        IBM ILE RPG             NOXDB/XMLPARS140         DKSRV206   04-06-19 14:48:46        Page     10
 Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
 Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
    310+     //If not found - default value                                                                                 1000302
    311+     Defaultvalue   Pointer    value options(*string:*nopass);                                                      1000303
    312+   End-PR;                                                                                                          1000304
    313+                                                                                                                    1000305
    314+   Dcl-PR xml_GetName Varchar(32767)                                                                                1000306
    315+                     extproc(*CWIDEN : 'jx_GetNodeNameVC');                                                         1000307
    316+     //Pointer to node                                                                                              1000308
    317+     pNode          Pointer    value;                                                                               1000309
    318+   End-PR;                                                                                                          1000310
    319+                                                                                                                    1000311
    320+   Dcl-PR xml_GetNameAsPath Varchar(32767)                                                                          1000312
    321+                           extproc(*CWIDEN : 'jx_GetNodeNameAsPath');                                               1000313
    322+     //Pointer to node                                                                                              1000314
    323+     pNode          Pointer    value;                                                                               1000315
    324+     //Delimiter like - or . or / or \                                                                              1000316
    325+     Delimiter      Char(1)    value;                                                                               1000317
    326+   End-PR;                                                                                                          1000318
    327+                                                                                                                    1000319
    328+   //* Refer to node type above                                                                                     1000320
    329+   Dcl-PR xml_NodeType Int(5) extproc(*CWIDEN : 'jx_GetNodeType');                                                  1000321
    330+     //Pointer to xml_ tree to receive format                                                                       1000322
    331+     pNode          Pointer    value;                                                                               1000323
    332+   End-PR;                                                                                                          1000324
    333+                                                                                                                    1000325
    334+ // Get string by expresion                                                                                         1000326
    335+ //  /object/array#123¤/name                                                                                        1000327
    336+ //  .object.array#123¤.name                                                                                        1000328
    337+   Dcl-PR xml_GetStr Varchar(32767) extproc(*CWIDEN : 'jx_GetValueVC');                                             1000329
    338+     //Pointer to relative node                                                                                     1000330
    339+     pNode          Pointer    value;                                                                               1000331
    340+     //Locations expression to node                                                                                 1000332
    341+     Expression     Pointer    value options(*string:*nopass);                                                      1000333
    342+     //If not found - default value                                                                                 1000334
    343+     Defaultvalue   Pointer    value options(*string:*nopass);                                                      1000335
    344+   End-PR;                                                                                                          1000336
    345+                                                                                                                    1000337
    346+ //  will join all subsequent array nodes into one resulting string                                                 1000338
    347+   Dcl-PR xml_GetStrJoin Varchar(32767)                                                                             1000339
    348+                        extproc(*CWIDEN : 'jx_GetStrJoinVC');                                                       1000340
    349+     //Pointer to relative node                                                                                     1000341
    350+     pNode          Pointer    value;                                                                               1000342
    351+     //Locations expression to node                                                                                 1000343
    352+     Expression     Pointer    value options(*string:*nopass);                                                      1000344
    353+     //If not found - default value                                                                                 1000345
  5770WDS V7R1M0  100416 RN        IBM ILE RPG             NOXDB/XMLPARS140         DKSRV206   04-06-19 14:48:46        Page     11
 Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
 Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
    354+     Defaultvalue   Pointer    value options(*string:*nopass);                                                      1000346
    355+   End-PR;                                                                                                          1000347
    356+                                                                                                                    1000348
    357+ // Get number by expresion like:                                                                                   1000349
    358+ //  /object/array#123¤/name                                                                                        1000350
    359+ //  .object.array#123¤.name                                                                                        1000351
    360+   Dcl-PR xml_GetNum Packed(30:15) extproc(*CWIDEN : 'jx_GetValueNum');                                             1000352
    361+     //Pointer to relative node                                                                                     1000353
    362+     pNode          Pointer    value;                                                                               1000354
    363+     //Locations expression to node                                                                                 1000355
    364+     Expression     Pointer    value options(*string:*nopass);                                                      1000356
    365+     //If not found - default value                                                                                 1000357
    366+     Defaultvalue   Packed(30:15) value options(*nopass);                                                           1000358
    367+   End-PR;                                                                                                          1000359
    368+                                                                                                                    1000360
    369+   Dcl-PR xml_GetInt Int(20) extproc(*CWIDEN : 'jx_GetValueInt');                                                   1000361
    370+     //Pointer to relative node                                                                                     1000362
    371+     pNode          Pointer    value;                                                                               1000363
    372+     //Locations expression to node                                                                                 1000364
    373+     Expression     Pointer    value options(*string:*nopass);                                                      1000365
    374+     //If not found - default value                                                                                 1000366
    375+     Defaultvalue   Int(20)    value options(*nopass);                                                              1000367
    376+   End-PR;                                                                                                          1000368
    377+                                                                                                                    1000369
    378+   //Set an ILOB object to a value found by X                                                                       1000370
    379+   //Return *ON if found                                                                                            1000371
    380+   Dcl-PR xml_GetIlobValue Ind extproc(*CWIDEN :'ILOB_XmlGetValue');                                                1000372
    381+     //Pointer to ILOB object to receive the va                                                                     1000373
    382+     pIlob          Pointer    value;                                                                               1000374
    383+     //Pointer to tree                                                                                              1000375
    384+     pNode          Pointer    value;                                                                               1000376
    385+     //X-path locations to node or attributes                                                                       1000377
    386+     Expression     Pointer    value options(*string);                                                              1000378
    387+   End-PR;                                                                                                          1000379
    388+                                                                                                                    1000380
    389+   Dcl-PR xml_CopyValue Pointer extproc(*CWIDEN : 'jx_CopyValue');                                                  1000381
    390+     //destination node                                                                                             1000382
    391+     pDest          Pointer    value;                                                                               1000383
    392+     //destiantion name (or *NULL or '')                                                                            1000384
    393+     destName       Pointer    value options(*string);                                                              1000385
    394+     //source node                                                                                                  1000386
    395+     pSource        Pointer    value;                                                                               1000387
    396+     //source name (or *NULL or '')                                                                                 1000388
    397+     sourceName     Pointer    value options(*string);                                                              1000389
  5770WDS V7R1M0  100416 RN        IBM ILE RPG             NOXDB/XMLPARS140         DKSRV206   04-06-19 14:48:46        Page     12
 Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
 Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
    398+   End-PR;                                                                                                          1000390
    399+                                                                                                                    1000391
    400+   Dcl-PR xml_NodeCopy extproc(*CWIDEN : 'jx_NodeCopy');                                                            1000392
    401+     //node. Retrive from Locate()                                                                                  1000393
    402+     pRootNode      Pointer    value;                                                                               1000394
    403+     //node. Retrive from Locate()                                                                                  1000395
    404+     pNewChild      Pointer    value;                                                                               1000396
    405+     //Reference location to where it arrive                                                                        1000397
    406+     RefLocation    Int(10)    value;                                                                               1000398
    407+   End-PR;                                                                                                          1000399
    408+                                                                                                                    1000400
    409+   //Following constants used by xml_NodeCopy:RefLocation                                                           1000401
    410+   Dcl-C xml_FIRST_CHILD const(1);                                                                                  1000402
    411+   Dcl-C xml_LAST_CHILD const(2);                                                                                   1000403
    412+   Dcl-C xml_BEFORE_SIBLING const(3);                                                                               1000404
    413+   Dcl-C xml_AFTER_SIBLING const(4);                                                                                1000405
    414+                                                                                                                    1000406
    415+   Dcl-PR xml_NodeClone Pointer extproc(*CWIDEN : 'jx_NodeClone');                                                  1000407
    416+     //node. Retrive from Locate()                                                                                  1000408
    417+     pSource        Pointer    value;                                                                               1000409
    418+   End-PR;                                                                                                          1000410
    419+                                                                                                                    1000411
    420+   //returns the new node                                                                                           1000412
    421+   Dcl-PR xml_NodeAdd Pointer extproc(*CWIDEN : 'jx_NodeAdd');                                                      1000413
    422+     //node. Retrive from Locate()                                                                                  1000414
    423+     pRootNode      Pointer    value;                                                                               1000415
    424+     //Reference location to where it arrive                                                                        1000416
    425+     RefLocation    Int(10)    value;                                                                               1000417
    426+     //Name of node                                                                                                 1000418
    427+     Name           Pointer    value options(*string);                                                              1000419
    428+     //Value or expression                                                                                          1000420
    429+     Value          Pointer    value options(*string);                                                              1000421
    430+     //New type (Refer "node type"                                                                                  1000422
    431+     Type           Uns(5)     value;                                                                               1000423
    432+   End-PR;                                                                                                          1000424
    433+                                                                                                                    1000425
    434+   Dcl-PR xml_NodeDelete extproc(*CWIDEN : 'jx_NodeDelete');                                                        1000426
    435+     //node. Retrive from Locate()                                                                                  1000427
    436+     pRootNode      Pointer    value;                                                                               1000428
    437+   End-PR;                                                                                                          1000429
    438+                                                                                                                    1000430
    439+   //Unlink the note from its previous and promote it as a new root node                                            1000431
    440+   Dcl-PR xml_NodeUnlink Pointer extproc(*CWIDEN : 'jx_NodeUnlink');                                                1000432
    441+     //Targenode. Retrive from Locate(                                                                              1000433
  5770WDS V7R1M0  100416 RN        IBM ILE RPG             NOXDB/XMLPARS140         DKSRV206   04-06-19 14:48:46        Page     13
 Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
 Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
    442+     pNode          Pointer    value;                                                                               1000434
    443+   End-PR;                                                                                                          1000435
    444+                                                                                                                    1000436
    445+   Dcl-PR xml_NodeSanitize extproc(*CWIDEN : 'jx_NodeSanitize');                                                    1000437
    446+     //node. Retrive from Locate()                                                                                  1000438
    447+     pRootNode      Pointer    value;                                                                               1000439
    448+   End-PR;                                                                                                          1000440
    449+                                                                                                                    1000441
    450+   //CheckSum of all names and values                                                                               1000442
    451+   //Delete all nodes which value are null                                                                          1000443
    452+   Dcl-PR xml_NodeCheckSum Uns(10) extproc(*CWIDEN : 'jx_NodeCheckSum');                                            1000444
    453+     pRootNode      Pointer    value; //node. Retrive from Locate()                                                 1000445
    454+   End-PR;                                                                                                          1000446
    455+                                                                                                                    1000447
    456+   //returns the new node                                                                                           1000448
    457+   Dcl-PR xml_NewObject Pointer extproc(*CWIDEN : 'jx_NewObject');                                                  1000449
    458+     //Destination. Retrive from Locate()                                                                           1000450
    459+     pDestNode      Pointer    value options(*nopass);                                                              1000451
    460+   End-PR;                                                                                                          1000452
    461+                                                                                                                    1000453
    462+ // Array functions                                                                                                 1000454
    463+   //returns the new node                                                                                           1000455
    464+   Dcl-PR xml_NewArray Pointer extproc(*CWIDEN : 'jx_NewArray');                                                    1000456
    465+     //Destination. Retrive from Locate()                                                                           1000457
    466+     pDestNode      Pointer    value options(*nopass);                                                              1000458
    467+   End-PR;                                                                                                          1000459
    468+                                                                                                                    1000460
    469+   //returns the new node added to the end of                                                                       1000461
    470+   Dcl-PR xml_ArrayPush Pointer extproc(*CWIDEN : 'jx_ArrayPush');                                                  1000462
    471+     //Destination. Retrive from Locate()                                                                           1000463
    472+     pDestArray     Pointer    value;                                                                               1000464
    473+     //source node to append                                                                                        1000465
    474+     pSourceNode    Pointer    value options(*string);                                                              1000466
    475+     //0=(Dft) Unlink and move, 1=copy a clone                                                                      1000467
    476+     copy           Uns(5)     value options(*nopass);                                                              1000468
    477+   End-PR;                                                                                                          1000469
    478+                                                                                                                    1000470
    479+   //Following constants used by xml_ArrayPush:copy                                                                 1000471
    480+   Dcl-C xml_MOVE_UNLINK const(0);                                                                                  1000472
    481+   Dcl-C xml_COPY_CLONE const(1);                                                                                   1000473
    482+                                                                                                                    1000474
    483+   //returns the new node added to the end of                                                                       1000475
    484+   Dcl-PR xml_ArrayAppend Pointer extproc(*CWIDEN :'jx_ArrayAppend');                                               1000476
    485+     //Destination. Retrive from Locate()                                                                           1000477
  5770WDS V7R1M0  100416 RN        IBM ILE RPG             NOXDB/XMLPARS140         DKSRV206   04-06-19 14:48:46        Page     14
 Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
 Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
    486+     pDestArray     Pointer    value;                                                                               1000478
    487+     //source node to append                                                                                        1000479
    488+     pSourceNode    Pointer    value options(*string);                                                              1000480
    489+     //0=(Dft) Unlink and move, 1=copy a clone                                                                      1000481
    490+     copy           Uns(5)     value options(*nopass);                                                              1000482
    491+   End-PR;                                                                                                          1000483
    492+                                                                                                                    1000484
    493+   //returns the new array fro source array                                                                         1000485
    494+   Dcl-PR xml_ArraySlice Pointer extproc(*CWIDEN : 'jx_ArraySlice' );                                               1000486
    495+     //source node or array string                                                                                  1000487
    496+     pSourceNode    Pointer    value options(*string);                                                              1000488
    497+     //From entry ( 1=First)                                                                                        1000489
    498+     from           Int(10)    value;                                                                               1000490
    499+     //To and includ   (-1 = Until end)                                                                             1000491
    500+     to             Int(10)    value;                                                                               1000492
    501+     //0=(Dft) Unlink and move, 1=copy a clone                                                                      1000493
    502+     copy           Uns(5)     value options(*nopass);                                                              1000494
    503+   End-PR;                                                                                                          1000495
    504+                                                                                                                    1000496
    505+   //returns the new node added to the end of                                                                       1000497
    506+   Dcl-PR xml_ArraySort Pointer extproc(*CWIDEN : 'jx_ArraySort');                                                  1000498
    507+     //Destination. Retrive from Locate()                                                                           1000499
    508+     pArray         Pointer    value;                                                                               1000500
    509+     //nodenames if any in subobject to comapre                                                                     1000501
    510+     pkeyNames      Pointer    value options(*string) ;                                                             1000502
    511+     //0=(Dft) use json numerics, 1=Use locale                                                                      1000503
    512+     options        uns(5)     value options(*nopass);                                                              1000504
    513+   End-PR;                                                                                                          1000505
    514+                                                                                                                    1000506
    515+   Dcl-C xml_USE_LOCALE const(1);                                                                                   1000507
    516+                                                                                                                    1000508
    517+   //returns the first node with expr value                                                                         1000509
    518+   Dcl-PR xml_LookupValue Pointer extproc(*CWIDEN : 'jx_lookupValue');                                              1000510
    519+     //Array/ obj to search                                                                                         1000511
    520+     pArray         Pointer    value;                                                                               1000512
    521+     //What to search for                                                                                           1000513
    522+     expr           Pointer    value options(*string);                                                              1000514
    523+     //0=(Dft) Same case, 1=ignore case                                                                             1000515
    524+     ignoreCase     Uns(5)     value options(*nopass);                                                              1000516
    525+   End-PR;                                                                                                          1000517
    526+                                                                                                                    1000518
    527+   //Following constants used by xml_LookupValue:ignoreCase                                                         1000519
    528+   Dcl-C xml_SAME_CASE const(0);                                                                                    1000520
    529+   Dcl-C xml_IGNORE_CASE const(1);                                                                                  1000521
  5770WDS V7R1M0  100416 RN        IBM ILE RPG             NOXDB/XMLPARS140         DKSRV206   04-06-19 14:48:46        Page     15
 Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
 Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
    530+                                                                                                                    1000522
    531+   //returns numer of element in array or obj                                                                       1000523
    532+   Dcl-PR xml_GetLength Int(10) extproc(*CWIDEN : 'jx_getLength'  );                                                1000524
    533+     //Array to count length                                                                                        1000525
    534+     pArray         Pointer    value;                                                                               1000526
    535+   End-PR;                                                                                                          1000527
    536+                                                                                                                    1000528
    537+   //returns the new node                                                                                           1000529
    538+   Dcl-PR xml_Merge Pointer extproc(*CWIDEN : 'jx_NodeMerge');                                                      1000530
    539+     //Destination. Retrive from Locate()                                                                           1000531
    540+     pDestNode      Pointer    value;                                                                               1000532
    541+     //Source tree  Retrive from Locate()                                                                           1000533
    542+     pSourceNode    Pointer    value;                                                                               1000534
    543+     //Optional new type                                                                                            1000535
    544+     Type           Uns(5)     value options(*nopass);                                                              1000536
    545+   End-PR;                                                                                                          1000537
    546+                                                                                                                    1000538
    547+   //Following constants used by xml_Merge:Type                                                                     1000539
    548+   Dcl-C xml_DONTREPLACE const(0);                                                                                  1000540
    549+   Dcl-C xml_REPLACE const(1);                                                                                      1000541
    550+                                                                                                                    1000542
    551+   //returns the new node                                                                                           1000543
    552+   Dcl-PR xml_MergeObjects Pointer extproc(*CWIDEN : 'jx_MergeObjects');                                            1000544
    553+     //Destination. Retrive from Locate()                                                                           1000545
    554+     pDestObj       Pointer    value;                                                                               1000546
    555+     //Source tree  Retrive from Locate()                                                                           1000547
    556+     pSourceObj     Pointer    value;                                                                               1000548
    557+     //JX_DONTREPLACE or xml_OBJREPLACE                                                                             1000549
    558+     Type           Uns(5)     value;                                                                               1000550
    559+   End-PR;                                                                                                          1000551
    560+                                                                                                                    1000552
    561+   //returns the source node                                                                                        1000553
    562+   Dcl-PR xml_MoveObjectInto Pointer extproc(*CWIDEN : 'jx_NodeMoveInto');                                          1000554
    563+     //Destination. Retrive from Locate()                                                                           1000555
    564+     pDestObj       Pointer    value;                                                                               1000556
    565+     Name           Pointer    value options(*string);                                                              1000557
    566+     //Source tree  Retrive from Locate()                                                                           1000558
    567+     pSourceObj     Pointer    value;                                                                               1000559
    568+   End-PR;                                                                                                          1000560
    569+                                                                                                                    1000561
    570+   Dcl-PR xml_Dump  extproc(*CWIDEN : 'jx_Dump');                                                                   1000562
    571+     //Pointer to tree                                                                                              1000563
    572+     pNode          Pointer    value;                                                                               1000564
    573+   End-PR;                                                                                                          1000565
  5770WDS V7R1M0  100416 RN        IBM ILE RPG             NOXDB/XMLPARS140         DKSRV206   04-06-19 14:48:46        Page     16
 Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
 Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
    574+                                                                                                                    1000566
    575+                                                                                                                    1000567
    576+   Dcl-PR xml_CloneFormat  extproc(*CWIDEN : 'jx_CloneFormat');                                                     1000568
    577+     //Pointer to tree to receive format                                                                            1000569
    578+     pNode          Pointer    value;                                                                               1000570
    579+     //node ptr or path with right formating                                                                        1000571
    580+     pCloneFrom     Pointer    value options(*string);                                                              1000572
    581+   End-PR;                                                                                                          1000573
    582+                                                                                                                    1000574
    583+   //**  JSON renderes ***                                                                                          1000575
    584+   Dcl-PR xml_WriteJsonStmf  extproc(*CWIDEN : 'jx_WriteJsonStmf');                                                 1000576
    585+     //node. Retrive from Locate()                                                                                  1000577
    586+     pNode          Pointer    value;                                                                               1000578
    587+     //Name of output stream file                                                                                   1000579
    588+     FileName       Pointer    value options(*string);                                                              1000580
    589+     //Ccsid of output file                                                                                         1000581
    590+     Ccsid          Int(10)    value;                                                                               1000582
    591+     Trim           Ind        value;                                                                               1000583
    592+     //Extra options                                                                                                1000584
    593+     Options        Pointer    value options(*string:*nopass);                                                      1000585
    594+   End-PR;                                                                                                          1000586
    595+                                                                                                                    1000587
    596+   Dcl-PR xml_AsJsonText Varchar(32767)                                                                             1000588
    597+                        extproc(*CWIDEN : 'jx_AsJsonText');                                                         1000589
    598+     //node. Retrive from Locate()                                                                                  1000590
    599+     pNode          Pointer    value;                                                                               1000591
    600+   End-PR;                                                                                                          1000592
    601+                                                                                                                    1000593
    602+   Dcl-PR xml_AsJsonTextMem Uns(10)                                                                                 1000594
    603+                           extproc(*CWIDEN : 'jx_AsJsonTextMem');                                                   1000595
    604+     //node. Retrive from Locate()                                                                                  1000596
    605+     pNode          Pointer    value;                                                                               1000597
    606+     //pointer to any memory buffer                                                                                 1000598
    607+     pBuffer        Pointer    value;                                                                               1000599
    608+     //Max number of bytes in buffer %size()                                                                        1000600
    609+     maxSize        Uns(10)    value options(*nopass);                                                              1000601
    610+   End-PR;                                                                                                          1000602
    611+                                                                                                                    1000603
    612+   //**  XML  renderes ***                                                                                          1000604
    613+   Dcl-PR xml_WriteXmlStmf  extproc(*CWIDEN : 'jx_WriteXmlStmf');                                                   1000605
    614+     //node. Retrive from Locate()                                                                                  1000606
    615+     pNode          Pointer    value;                                                                               1000607
    616+     //Name of output stream file                                                                                   1000608
    617+     FileName       Pointer    value options(*string);                                                              1000609
  5770WDS V7R1M0  100416 RN        IBM ILE RPG             NOXDB/XMLPARS140         DKSRV206   04-06-19 14:48:46        Page     17
 Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
 Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
    618+     //Ccsid of output file                                                                                         1000610
    619+     Ccsid          Int(10)    value;                                                                               1000611
    620+     Trim           Ind        value;                                                                               1000612
    621+     //Extra options                                                                                                1000613
    622+     Options        Pointer    value options(*string:*nopass);                                                      1000614
    623+   End-PR;                                                                                                          1000615
    624+                                                                                                                    1000616
    625+   Dcl-PR xml_AsXmlText Varchar(32767) extproc(*CWIDEN : 'jx_AsXmlText');                                           1000617
    626+     //node. Retrive from Locate()                                                                                  1000618
    627+     pNode          Pointer    value;                                                                               1000619
    628+   End-PR;                                                                                                          1000620
    629+                                                                                                                    1000621
    630+   Dcl-PR xml_AsXmlTextMem Uns(10) extproc(*CWIDEN : 'jx_AsXmlTextMem');                                            1000622
    631+     //node. Retrive from Locate()                                                                                  1000623
    632+     pNode          Pointer    value;                                                                               1000624
    633+     //pointer to any memory buffer                                                                                 1000625
    634+     pBuffer        Pointer    value;                                                                               1000626
    635+   End-PR;                                                                                                          1000627
    636+                                                                                                                    1000628
    637+   // Return a streamer object to be used in own serialisers                                                        1000629
    638+   Dcl-PR xml_Stream pointer extproc(*CWIDEN : 'jx_Stream');                                                        1000630
    639+     //node. Retrive from Locate()                                                                                  1000631
    640+     pNode          Pointer    value;                                                                               1000632
    641+   End-PR;                                                                                                          1000633
    642+                                                                                                                    1000634
    643+   //**  CSV  renderes ***                                                                                          1000635
    644+   Dcl-PR xml_WriteCsvStmf  extproc(*CWIDEN : 'jx_WriteCsvStmf');                                                   1000636
    645+     //node. Retrive from Locate()                                                                                  1000637
    646+     pNode          Pointer    value;                                                                               1000638
    647+     //Name of output stream file                                                                                   1000639
    648+     FileName       Pointer    value options(*string);                                                              1000640
    649+     //Ccsid of output file                                                                                         1000641
    650+     Ccsid          Int(10)    value;                                                                               1000642
    651+     //*ON=Remove inter blanks                                                                                      1000643
    652+     Trim           Ind        value;                                                                               1000644
    653+     //Options: ';.' for separator and dec                                                                          1000645
    654+     Options        Pointer    value options(*string:*nopass);                                                      1000646
    655+   End-PR;                                                                                                          1000647
    656+                                                                                                                    1000648
    657+                                                                                                                    1000649
    658+   Dcl-DS xml_DelimiterDS  based(prototype_only) qualified;                                                         1000650
    659+     Slash          Char(1);                                                                                        1000651
    660+     BackSlash      Char(1);                                                                                        1000652
    661+     Masterspace    Char(1);                                                                                        1000653
  5770WDS V7R1M0  100416 RN        IBM ILE RPG             NOXDB/XMLPARS140         DKSRV206   04-06-19 14:48:46        Page     18
 Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
 Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
    662+     BraBeg         Char(1);                                                                                        1000654
    663+     BraEnd         Char(1);                                                                                        1000655
    664+     Blank          Char(1);                                                                                        1000656
    665+     Dot            Char(1);                                                                                        1000657
    666+     CurBeg         Char(1);                                                                                        1000658
    667+     CurEnd         Char(1);                                                                                        1000659
    668+     Apos           Char(1);                                                                                        1000660
    669+     Quot           Char(1);                                                                                        1000661
    670+   End-DS;                                                                                                          1000662
    671+                                                                                                                    1000663
    672+   //Iterators: First use the set the use forEach                                                                   1000664
    673+   Dcl-DS xml_Iterator  based(prototype_only) qualified;                                                            1000665
    674+     root           Pointer;                                                                                        1000666
    675+     this           Pointer;                                                                                        1000667
    676+     isList         Ind;                                                                                            1000668
    677+     isFirst        Ind;                                                                                            1000669
    678+     isLast         Ind;                                                                                            1000670
    679+     isRecursive    Ind;                                                                                            1000671
    680+     comma          Varchar(1);                                                                                     1000672
    681+     count          Int(10);                                                                                        1000673
    682+     length         Int(10);                                                                                        1000674
    683+     size           Int(10);                                                                                        1000675
    684+     //Pointer to temp array of elms                                                                                1000676
    685+     listArr        Pointer;                                                                                        1000677
    686+     //Set  this to *ON to teminate loop                                                                            1000678
    687+     break          Ind;                                                                                            1000679
    688+     filler         Char(64);                                                                                       1000680
    689+   End-DS;                                                                                                          1000681
    690+                                                                                                                    1000682
    691+   Dcl-PR xml_setIterator  likeds( xml_Iterator)                                                                    1000683
    692+                          extproc(*CWIDEN : 'jx_SetIterator');                                                      1000684
    693+     //node. Retrive from Locate()                                                                                  1000685
    694+     pNode          Pointer    value;                                                                               1000686
    695+     //Optional - path to node                                                                                      1000687
    696+     path           Pointer    value options(*string:*nopass);                                                      1000688
    697+   End-PR;                                                                                                          1000689
    698+                                                                                                                    1000690
    699+   Dcl-PR xml_setRecursiveIterator  likeds( xml_Iterator)                                                           1000691
    700+                                   extproc(*CWIDEN :                                                                1000692
    701+                                   'jx_SetRecursiveIterator');                                                      1000693
    702+     //node. Retrive from Locate()                                                                                  1000694
    703+     pNode          Pointer    value;                                                                               1000695
    704+     //Optional - path to node                                                                                      1000696
    705+     path           Pointer    value options(*string:*nopass);                                                      1000697
  5770WDS V7R1M0  100416 RN        IBM ILE RPG             NOXDB/XMLPARS140         DKSRV206   04-06-19 14:48:46        Page     19
 Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
 Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
    706+   End-PR;                                                                                                          1000698
    707+                                                                                                                    1000699
    708+   //Iterator Structure                                                                                             1000700
    709+   Dcl-PR xml_forEach Ind extproc(*CWIDEN : 'jx_ForEach');                                                          1000701
    710+     iterator                  likeds( xml_Iterator);                                                               1000702
    711+   End-PR;                                                                                                          1000703
    712+                                                                                                                    1000704
    713+   //For XML attributes                                                                                             1000705
    714+   Dcl-PR xml_GetNodeAttrValue Varchar(32767)                                                                       1000706
    715+                              extproc(*CWIDEN : 'jx_GetNodeAttrValueVC');                                           1000707
    716+     //Pointer to exsiting element                                                                                  1000708
    717+     pNode          Pointer    value;                                                                               1000709
    718+     //Attribute Name                                                                                               1000710
    719+     AttrName       Pointer    value options(*string);                                                              1000711
    720+     //If not found - default value                                                                                 1000712
    721+     Defaultvalue   Pointer    value options(*string:*nopass);                                                      1000713
    722+   End-PR;                                                                                                          1000714
    723+                                                                                                                    1000715
    724+   Dcl-PR xml_SetNodeAttrValue extproc(*CWIDEN : 'jx_SetNodeAttrValue');                                            1000716
    725+     //Pointer to exsiting element                                                                                  1000717
    726+     pNode          Pointer    value;                                                                               1000718
    727+     //Attribute name                                                                                               1000719
    728+     AttrName       Pointer    value options(*string);                                                              1000720
    729+     //New value                                                                                                    1000721
    730+     Value          Pointer    value options(*string);                                                              1000722
    731+   End-PR;                                                                                                          1000723
    732+                                                                                                                    1000724
    733+   Dcl-PR xml_GetAttrValue Varchar(32767)                                                                           1000725
    734+                          extproc(*CWIDEN : 'jx_GetAttrValueVC');                                                   1000726
    735+     //Pointer Attribute                                                                                            1000727
    736+     pAttr          Pointer    value;                                                                               1000728
    737+     //If not found - default value                                                                                 1000729
    738+     Defaultvalue   Pointer    value options(*string:*nopass);                                                      1000730
    739+   End-PR;                                                                                                          1000731
    740+                                                                                                                    1000732
    741+   Dcl-PR xml_SetAttrValue extproc(*CWIDEN : 'jx_SetAttrValue');                                                    1000733
    742+     //Pointer Attribute                                                                                            1000734
    743+     pAttr          Pointer    value;                                                                               1000735
    744+     //New value                                                                                                    1000736
    745+     AttrName       Pointer    value options(*string);                                                              1000737
    746+     //Default value                                                                                                1000738
    747+     Value          Pointer    value options(*string);                                                              1000739
    748+   End-PR;                                                                                                          1000740
    749+                                                                                                                    1000741
  5770WDS V7R1M0  100416 RN        IBM ILE RPG             NOXDB/XMLPARS140         DKSRV206   04-06-19 14:48:46        Page     20
 Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
 Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
    750+   //Returns pointer to attribute list                                                                              1000742
    751+   Dcl-PR xml_GetAttrFirst Pointer extproc(*CWIDEN : 'jx_GetAttrFirst');                                            1000743
    752+     //Pointer to element                                                                                           1000744
    753+     pElem          Pointer    value;                                                                               1000745
    754+   End-PR;                                                                                                          1000746
    755+                                                                                                                    1000747
    756+   //Returns pointer to attribute list                                                                              1000748
    757+   Dcl-PR xml_GetAttrNext Pointer extproc(*CWIDEN : 'jx_GetAttrNext');                                              1000749
    758+     //Pointer to attribute list                                                                                    1000750
    759+     pAttr          Pointer    value;                                                                               1000751
    760+   End-PR;                                                                                                          1000752
    761+                                                                                                                    1000753
    762+   Dcl-PR xml_GetAttrName Varchar(32767)                                                                            1000754
    763+                         extproc(*CWIDEN : 'jx_GetAttrNameVC');                                                     1000755
    764+     //Pointer to attribute list                                                                                    1000756
    765+     pAttr          Pointer    value;                                                                               1000757
    766+   End-PR;                                                                                                          1000758
    767+                                                                                                                    1000759
    768+ // Clear the contents of an array or object / delete all children                                                  1000760
    769+   Dcl-PR xml_Clear  extproc(*CWIDEN : 'jx_Clear');                                                                 1000761
    770+     pNode          Pointer    value; //Pointer to tree node                                                        1000762
    771+   End-PR;                                                                                                          1000763
    772+                                                                                                                    1000764
    773+ // Close all nodes in this tree - also parent and siblings                                                         1000765
    774+   Dcl-PR xml_Close  extproc(*CWIDEN : 'jx_Close');                                                                 1000766
    775+     //Pointer to tree node                                                                                         1000767
    776+     pNode          Pointer  ;                                                                                      1000768
    777+   End-PR;                                                                                                          1000769
    778+ // Detect if you have a memry leak: call this when you have closed everything at i will return                     1000770
    779+   Dcl-PR xml_MemLeak Ind extproc(*CWIDEN : 'jx_MemLeak');                                                          1000771
    780+   End-PR;                                                                                                          1000772
    781+                                                                                                                    1000773
    782+ // Print memory report                                                                                             1000774
    783+   Dcl-PR xml_MemStat  extproc(*CWIDEN : 'jx_MemStat');                                                             1000775
    784+   End-PR;                                                                                                          1000776
    785+                                                                                                                    1000777
    786+ // retune number of bytest used                                                                                    1000778
    787+   Dcl-PR xml_MemUse Uns(20) extproc(*CWIDEN : 'jx_MemUse');                                                        1000779
    788+   End-PR;                                                                                                          1000780
    789+                                                                                                                    1000781
    790+ // Return a memory segment pointer, and build a scope where JSON/XML will be created                               1000782
    791+   Dcl-PR xml_SegmentSelectNo Pointer                                                                               1000783
    792+                             extproc(*CWIDEN : 'jx_SegmentSelectNo');                                               1000784
    793+     SegmentIndex   Int(10)    value;                                                                               1000785
  5770WDS V7R1M0  100416 RN        IBM ILE RPG             NOXDB/XMLPARS140         DKSRV206   04-06-19 14:48:46        Page     21
 Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
 Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
    794+   End-PR;                                                                                                          1000786
    795+                                                                                                                    1000787
    796+ //  Delete the segment and all JSON/XML nodes build while segment scope was active                                 1000788
    797+   Dcl-PR xml_SegmentDispose  extproc(*CWIDEN : 'jx_SegmentDispose');                                               1000789
    798+     segmentPtr     Pointer    value;                                                                               1000790
    799+   End-PR;                                                                                                          1000791
    800+                                                                                                                    1000792
    801+ // Maintain at list of index numbers to database CLOB/BLOB fields since pointers can not be sh                     1000793
    802+   //Returns *ON if found                                                                                           1000794
    803+   Dcl-PR xml_mapIx Ind extproc(*CWIDEN:'jx_MapIx' );                                                               1000795
    804+     //pointer to node pointer                                                                                      1000796
    805+     ppNode         Pointer;                                                                                        1000797
    806+     //index of pointer                                                                                             1000798
    807+     Index          Uns(10)    value;                                                                               1000799
    808+   End-PR;                                                                                                          1000800
    809+                                                                                                                    1000801
    810+   //------------------------------------------------------------------------                                       1000802
    811+   //SQL interface:                                                                                                 1000803
    812+   //Note: When SQL functions returns *NULL, then use  the xml_Message() to re                                      1000804
    813+   //------------------------------------------------------------------------                                       1000805
    814+                                                                                                                    1000806
    815+ // If options need - then it has to be first call made.                                                            1000807
    816+ // NOTE: If a pConnection pointer is provided, it will be updated with the conection                               1000808
    817+   Dcl-PR xml_sqlSetOptions  extproc(*CWIDEN: 'jx_sqlSetOptions');                                                  1000809
    818+     //json object with options ( see sample)                                                                       1000810
    819+     parms          Pointer    value options(*string:*nopass);                                                      1000811
    820+   End-PR;                                                                                                          1000812
    821+                                                                                                                    1000813
    822+ // returns a object node with one resulting row for the SQL statment                                               1000814
    823+   //Returns one SQL row as jx Obejct                                                                               1000815
    824+   Dcl-PR xml_sqlResultRow Pointer extproc(*CWIDEN: 'jx_sqlResultRow');                                             1000816
    825+     //SQL statement to run                                                                                         1000817
    826+     sqlStmt        Pointer    value options(*string);                                                              1000818
    827+     //json object template                                                                                         1000819
    828+     parms          Pointer    value options(*string:*nopass);                                                      1000820
    829+   End-PR;                                                                                                          1000821
    830+                                                                                                                    1000822
    831+ // returns an array (or object with array) of resulting rows for the SQL statment                                  1000823
    832+   //Returns SQL rows as jx Obejct                                                                                  1000824
    833+   Dcl-PR xml_sqlResultSet Pointer extproc(*CWIDEN: 'jx_sqlResultSet');                                             1000825
    834+     //SQL statement to run                                                                                         1000826
    835+     sqlStmt        Pointer    value options(*string);                                                              1000827
    836+     //From row; 1=First                                                                                            1000828
    837+     start          Int(10)    value options(*nopass);                                                              1000829
  5770WDS V7R1M0  100416 RN        IBM ILE RPG             NOXDB/XMLPARS140         DKSRV206   04-06-19 14:48:46        Page     22
 Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
 Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
    838+     //max number of rows; xml_ALLROWS=all                                                                          1000830
    839+     limit          Int(10)    value options(*nopass);                                                              1000831
    840+     //resultset format:                                                                                            1000832
    841+     format         Int(10)    value options(*nopass);                                                              1000833
    842+     //json object template                                                                                         1000834
    843+     parms          Pointer    value options(*string:*nopass);                                                      1000835
    844+   End-PR;                                                                                                          1000836
    845+                                                                                                                    1000837
    846+                                                                                                                    1000838
    847+   Dcl-C xml_ALLROWS const(-1);                                                                                     1000839
    848+                                                                                                                    1000840
    849+   //Following constants used by xml_sqlResultSet:format                                                            1000841
    850+   //+ An array with each row as an object                                                                          1000842
    851+   Dcl-C xml_ROWARRAY const(0);                                                                                     1000843
    852+   //+ Metaobject: rows, fields                                                                                     1000844
    853+   Dcl-C xml_META    const(1);                                                                                      1000845
    854+   //+ Columns info                                                                                                 1000846
    855+   Dcl-C xml_FIELDS  const(2);                                                                                      1000847
    856+   //+ Count all rows in the resultset                                                                              1000848
    857+   // ( Pricy so awoid it !! )                                                                                      1000849
    858+   Dcl-C xml_TOTALROWS const(4);                                                                                    1000850
    859+   //+ Uppercase column names                                                                                       1000851
    860+   Dcl-C xml_UPPERCASE const(8);                                                                                    1000852
    861+                                                                                                                    1000853
    862+   //+ Appoximate number of rows..                                                                                  1000854
    863+   //  ( unpresise but cheap !! prefered  )                                                                         1000855
    864+   Dcl-C xml_APPROXIMATE_TOTALROWS const(16);                                                                       1000856
    865+                                                                                                                    1000857
    866+                                                                                                                    1000858
    867+                                                                                                                    1000859
    868+ // SQL cursor processing                                                                                           1000860
    869+   //Returns handle to sql statement                                                                                1000861
    870+   Dcl-PR xml_sqlOpen Pointer extproc(*CWIDEN:'jx_sqlOpen'  );                                                      1000862
    871+     //SQL statement to run                                                                                         1000863
    872+     sqlStmt        Pointer    value options(*string);                                                              1000864
    873+     //json object template                                                                                         1000865
    874+     parms          Pointer    value options(*string:*nopass);                                                      1000866
    875+   End-PR;                                                                                                          1000867
    876+                                                                                                                    1000868
    877+ // Fetch next from from that open sql handle, starting from rowNumer. 1=First row                                  1000869
    878+   //Returns a row object (or *NULL if EOF)                                                                         1000870
    879+   Dcl-PR xml_sqlFetchRelative Pointer                                                                              1000871
    880+                              extproc(*CWIDEN: 'jx_sqlFetchRelative');                                              1000872
    881+     //sql statement handle ( from sqlOpen)                                                                         1000873
  5770WDS V7R1M0  100416 RN        IBM ILE RPG             NOXDB/XMLPARS140         DKSRV206   04-06-19 14:48:46        Page     23
 Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
 Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
    882+     pSqlHndl       Pointer    value;                                                                               1000874
    883+     //row from where to start 1=First                                                                              1000875
    884+     fromRow        Int(10)    value;                                                                               1000876
    885+   End-PR;                                                                                                          1000877
    886+                                                                                                                    1000878
    887+ // Fetch next from from that open sql handle                                                                       1000879
    888+   //Returns a row object (or *NULL if EOF)                                                                         1000880
    889+   Dcl-PR xml_sqlFetchNext Pointer extproc(*CWIDEN:'jx_sqlFetchNext');                                              1000881
    890+     //sql statement handle ( from sqlOpen)                                                                         1000882
    891+     pSqlHndl       Pointer    value;                                                                               1000883
    892+   End-PR;                                                                                                          1000884
    893+                                                                                                                    1000885
    894+ // Number of columns in result set ( -1 if error)                                                                  1000886
    895+   //Returns number of columns                                                                                      1000887
    896+   Dcl-PR xml_sqlColumns Int(10) extproc(*CWIDEN:'jx_sqlColumns');                                                  1000888
    897+     //sql statement handle ( from sqlOpen)                                                                         1000889
    898+     pSqlHndl       Pointer    value;                                                                               1000890
    899+   End-PR;                                                                                                          1000891
    900+                                                                                                                    1000892
    901+ // Number of rows  in result set ( -1 if error)                                                                    1000893
    902+ // Note: This will run a hidden "select count(*)" which might be a little pricy                                    1000894
    903+   //Returns number of rows                                                                                         1000895
    904+   Dcl-PR xml_sqlRows Int(10) extproc(*CWIDEN:'jx_sqlRows');                                                        1000896
    905+     //sql statement handle ( from sqlOpen)                                                                         1000897
    906+     pSqlHndl       Pointer    value;                                                                               1000898
    907+   End-PR;                                                                                                          1000899
    908+                                                                                                                    1000900
    909+ // Always colse the cursor after use, to release resources                                                         1000901
    910+   Dcl-PR xml_sqlClose  extproc(*CWIDEN:'jx_sqlClose');                                                             1000902
    911+     //sql statement handle ( from sqlOpen)                                                                         1000903
    912+     pSqlHndl       Pointer;                                                                                        1000904
    913+   End-PR;                                                                                                          1000905
    914+                                                                                                                    1000906
    915+ // Execute any SQL statement not involving a cursor                                                                1000907
    916+   //Returns *ON if error                                                                                           1000908
    917+   Dcl-PR xml_sqlExec Ind extproc(*CWIDEN:'jx_sqlExec'  );                                                          1000909
    918+     //SQL statement to run (template)                                                                              1000910
    919+     sqlStmt        Pointer    value options(*string);                                                              1000911
    920+     //json object template data                                                                                    1000912
    921+     parms          Pointer    value options(*string:*nopass);                                                      1000913
    922+   End-PR;                                                                                                          1000914
    923+                                                                                                                    1000915
    924+ // Execute an update table where the row is defined as a json object                                               1000916
    925+   //Returns *ON if error                                                                                           1000917
  5770WDS V7R1M0  100416 RN        IBM ILE RPG             NOXDB/XMLPARS140         DKSRV206   04-06-19 14:48:46        Page     24
 Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
 Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
    926+   Dcl-PR xml_sqlUpdate Ind extproc(*CWIDEN:'jx_sqlUpdate');                                                        1000918
    927+     //table name                                                                                                   1000919
    928+     table          Pointer    value options(*string);                                                              1000920
    929+     //json object: æa:123,b:"value"å                                                                               1000921
    930+     row            Pointer    value options(*string);                                                              1000922
    931+     //where clause : 'where myKey=Åkey'                                                                            1000923
    932+     where          Pointer    value options(*string:*nopass);                                                      1000924
    933+     //where parameters: æ key:777å                                                                                 1000925
    934+     whereParms     Pointer    value options(*string:*nopass);                                                      1000926
    935+   End-PR;                                                                                                          1000927
    936+                                                                                                                    1000928
    937+   //Returns *ON if error                                                                                           1000929
    938+   Dcl-PR xml_sqlInsert Ind extproc(*CWIDEN:'jx_sqlInsert');                                                        1000930
    939+     //table name                                                                                                   1000931
    940+     table          Pointer    value options(*string);                                                              1000932
    941+     //json object: æa:123,b:"value"å                                                                               1000933
    942+     row            Pointer    value options(*string);                                                              1000934
    943+     //extra parms                                                                                                  1000935
    944+     parms          Pointer    value options(*string:*nopass);                                                      1000936
    945+   End-PR;                                                                                                          1000937
    946+                                                                                                                    1000938
    947+   //Returns *ON if error                                                                                           1000939
    948+   Dcl-PR xml_sqlUpsert Ind extproc(*CWIDEN:'jx_sqlUpsert');                                                        1000940
    949+     //table name                                                                                                   1000941
    950+     table          Pointer    value options(*string);                                                              1000942
    951+     //json object: æa:123,b:"value"å                                                                               1000943
    952+     row            Pointer    value options(*string);                                                              1000944
    953+     //where clause : 'where myKey=Åkey'                                                                            1000945
    954+     where          Pointer    value options(*string:*nopass);                                                      1000946
    955+     //where parameters: æ key:777å                                                                                 1000947
    956+     whereParms     Pointer    value options(*string:*nopass);                                                      1000948
    957+   End-PR;                                                                                                          1000949
    958+                                                                                                                    1000950
    959+   //Returns id of last insert                                                                                      1000951
    960+   Dcl-PR xml_sqlGetInsertId Int(10) extproc(*CWIDEN:'jx_sqlGetInsertId');                                          1000952
    961+   End-PR;                                                                                                          1000953
    962+                                                                                                                    1000954
    963+   //Returns array of column info                                                                                   1000955
    964+   Dcl-PR xml_sqlGetMeta Pointer extproc(*CWIDEN:'jx_sqlGetMeta');                                                  1000956
    965+     sqlstmt        Pointer    value options(*string);                                                              1000957
    966+   End-PR;                                                                                                          1000958
    967+                                                                                                                    1000959
    968+ // Return pointer to database connection. No options => will be default local database                             1000960
    969+   Dcl-PR xml_sqlConnect Pointer extproc(*CWIDEN: 'jx_sqlConnect');                                                 1000961
  5770WDS V7R1M0  100416 RN        IBM ILE RPG             NOXDB/XMLPARS140         DKSRV206   04-06-19 14:48:46        Page     25
 Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
 Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
    970+     //json object or string with options                                                                           1000962
    971+     parms          Pointer    value options(*string:*nopass);                                                      1000963
    972+   End-PR;                                                                                                          1000964
    973+                                                                                                                    1000965
    974+ // Return pointer to database connection. No options => will be default local database                             1000966
    975+   Dcl-PR xml_sqlDisconnect  extproc(*CWIDEN: 'jx_sqlDisconnect');                                                  1000967
    976+   End-PR;                                                                                                          1000968
    977+                                                                                                                    1000969
    978+ // Return sql code for previous statement                                                                          1000970
    979+   Dcl-PR xml_sqlCode Int(10) extproc(*CWIDEN: 'jx_sqlCode');                                                       1000971
    980+   End-PR;                                                                                                          1000972
    981+                                                                                                                    1000973
    982+ //Returns a JSON object from a REST call                                                                           1000974
    983+   Dcl-PR xml_httpRequest Pointer extproc(*CWIDEN:'jx_httpRequest');                                                1000975
    984+     //Full URL to the resource                                                                                     1000976
    985+     url            Pointer    value options(*string);                                                              1000977
    986+     //json object or string                                                                                        1000978
    987+     pReqNode       Pointer    value options(*string:*nopass);                                                      1000979
    988+     //extra CURL options                                                                                           1000980
    989+     options        Pointer    value options(*string:*nopass);                                                      1000981
    990+   End-PR;                                                                                                          1000982
    991+                                                                                                                    1000983
    992+ // when the dataarea SQLTRACE is set, your SQL statements                                                          1000984
    993+ // are logged into SQLTRACE table.                                                                                 1000985
    994+ // you can supply an extr eye-catch wariable :trcid                                                                1000986
    995+   Dcl-PR xml_traceSetId  extproc(*CWIDEN : 'jx_traceSetId');                                                       1000987
    996+     traceId        Int(20)    value; //Ccsid of inpur file                                                         1000988
    997+   End-PR;                                                                                                          1000989
    998+                                                                                                                    1000990
    999+ // -------------------------------------------------------------------------------------------                     1000991
   1000+ // Depricated and renamed functions :                                                                              1000992
   1001+ // -------------------------------------------------------------------------------------------                     1000993
   1002+ // Depricated - use  xml_GetValueStr                                                                               1000994
   1003+   Dcl-PR xml_GetValue Varchar(32767) extproc(*CWIDEN : 'jx_GetValueVC');                                           1000995
   1004+     //Pointer to node                                                                                              1000996
   1005+     pNode          Pointer    value;                                                                               1000997
   1006+     //If not found - default value                                                                                 1000998
   1007+     Expression     Pointer    value options(*string:*nopass);                                                      1000999
   1008+     //If not found - default value                                                                                 1001000
   1009+     Defaultvalue   Pointer    value options(*string:*nopass);                                                      1001001
   1010+   End-PR;                                                                                                          1001002
   1011+                                                                                                                    1001003
   1012+ // Depricated - use  xml_NodeCopy                                                                                  1001004
   1013+   Dcl-PR xml_Copy extproc(*CWIDEN : 'jx_NodeCopy');                                                                1001005
  5770WDS V7R1M0  100416 RN        IBM ILE RPG             NOXDB/XMLPARS140         DKSRV206   04-06-19 14:48:46        Page     26
 Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
 Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
   1014+     //element. Retrive from Locate()                                                                               1001006
   1015+     pRootNode      Pointer    value;                                                                               1001007
   1016+     //element. Retrive from Locate()                                                                               1001008
   1017+     pNewChild      Pointer    value;                                                                               1001009
   1018+     //Reference location to where it arrive                                                                        1001010
   1019+     RefLocation    Int(10)    value;                                                                               1001011
   1020+   End-PR;                                                                                                          1001012
   1021+                                                                                                                    1001013
   1022+   Dcl-PR xml_ElementCopy extproc(*CWIDEN : 'jx_NodeCopy');                                                         1001014
   1023+     //element. Retrive from Locate()                                                                               1001015
   1024+     pRootNode      Pointer    value;                                                                               1001016
   1025+     //element. Retrive from Locate()                                                                               1001017
   1026+     pNewChild      Pointer    value;                                                                               1001018
   1027+     //Reference location to where it arrive                                                                        1001019
   1028+     RefLocation    Int(10)    value;                                                                               1001020
   1029+   End-PR;                                                                                                          1001021
   1030+                                                                                                                    1001022
   1031+ // Depricated - use  xml_NodeDelete                                                                                1001023
   1032+   Dcl-PR xml_Delete extproc(*CWIDEN : 'jx_NodeDelete');                                                            1001024
   1033+     //element. Retrive from Locate()                                                                               1001025
   1034+     pRootNode      Pointer    value;                                                                               1001026
   1035+   End-PR;                                                                                                          1001027
   1036+                                                                                                                    1001028
   1037+ // Depricated - use  xml_NodeDelete                                                                                1001029
   1038+   Dcl-PR xml_ElementDelete extproc(*CWIDEN : 'jx_NodeDelete');                                                     1001030
   1039+     //element. Retrive from Locate()                                                                               1001031
   1040+     pRootNode      Pointer    value;                                                                               1001032
   1041+   End-PR;                                                                                                          1001033
   1042+                                                                                                                    1001034
   1043+ // Depricated - use  xml_AsJsonText                                                                                1001035
   1044+   Dcl-PR xml_AsText Varchar(32767) extproc(*CWIDEN : 'jx_AsJsonText');                                             1001036
   1045+     //element. Retrive from Locate()                                                                               1001037
   1046+     pNode          Pointer    value;                                                                               1001038
   1047+   End-PR;                                                                                                          1001039
   1048+                                                                                                                    1001040
   1049+                                                                                                                    1001041
   1050+ // xml_XpathValue   is depricated and replaced by: xml_GetStr                                                      1001042
   1051+   Dcl-PR xml_XpathValue Varchar(32767)                                                                             1001043
   1052+                        extproc(*CWIDEN : 'jx_GetValueVC');                                                         1001044
   1053+     //Pointer to tree                                                                                              1001045
   1054+     pNode          Pointer    value;                                                                               1001046
   1055+     //Locations expression to node                                                                                 1001047
   1056+     Expression     Pointer    value options(*string);                                                              1001048
   1057+     //If not found - default value                                                                                 1001049
  5770WDS V7R1M0  100416 RN        IBM ILE RPG             NOXDB/XMLPARS140         DKSRV206   04-06-19 14:48:46        Page     27
 Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
 Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
   1058+     Defaultvalue   Pointer    value options(*string:*nopass);                                                      1001050
   1059+   End-PR;                                                                                                          1001051
   1060+                                                                                                                    1001052
   1061+ // xml_XpathValueNum   is depricated and replaced by: xml_GetNum                                                   1001053
   1062+   Dcl-PR xml_XpathValueNum Packed(30:15)                                                                           1001054
   1063+                           extproc(*CWIDEN : 'jx_GetValueNum');                                                     1001055
   1064+     //Pointer to tree                                                                                              1001056
   1065+     pJsonCom       Pointer    value;                                                                               1001057
   1066+     //X-path locations to node or attributes                                                                       1001058
   1067+     Node           Pointer    value options(*string);                                                              1001059
   1068+     //If not found - default value                                                                                 1001060
   1069+     Defaultvalue   Packed(30:15) value options(*nopass);                                                           1001061
   1070+   End-PR;                                                                                                          1001062
   1071+                                                                                                                    1001063
   1072+ // Use - xml_NodeType                                                                                              1001064
   1073+   Dcl-PR xml_ElementType Int(5) extproc(*CWIDEN : 'jx_GetNodeType');                                               1001065
   1074+     //Pointer to tree to receive format                                                                            1001066
   1075+     pNode          Pointer    value;                                                                               1001067
   1076+   End-PR;                                                                                                          1001068
   1077+                                                                                                                    1001069
   1078+ // Use xml_NodeAdd                                                                                                 1001070
   1079+   //returns the new element                                                                                        1001071
   1080+   Dcl-PR xml_ElementAdd Pointer extproc(*CWIDEN : 'jx_NodeAdd');                                                   1001072
   1081+     //element. Retrive from Locate()                                                                               1001073
   1082+     pRootNode      Pointer    value;                                                                               1001074
   1083+     //Reference location to where it arrive                                                                        1001075
   1084+     RefLocation    Int(10)    value;                                                                               1001076
   1085+     //Name of element                                                                                              1001077
   1086+     Name           Pointer    value options(*string);                                                              1001078
   1087+     //Value of element                                                                                             1001079
   1088+     Value          Pointer    value options(*string);                                                              1001080
   1089+   End-PR;                                                                                                          1001081
   1090+                                                                                                                    1001082
   1091+ // Use xml_GetNext                                                                                                 1001083
   1092+   //Returns pointer to next sibling (elem)                                                                         1001084
   1093+   Dcl-PR xml_GetElemNext Pointer extproc(*CWIDEN : 'jx_GetNodeNext');                                              1001085
   1094+     //Pointer to current element (elem)                                                                            1001086
   1095+     pElem          Pointer    value  ;                                                                             1001087
   1096+   End-PR;                                                                                                          1001088
   1097+                                                                                                                    1001089
   1098+ // use xml_GetChild                                                                                                1001090
   1099+   //Returns pointer to next child (elem)                                                                           1001091
   1100+   Dcl-PR xml_GetElemChild Pointer extproc(*CWIDEN : 'jx_GetNodeChild');                                            1001092
   1101+     //Pointer to current element (elem)                                                                            1001093
  5770WDS V7R1M0  100416 RN        IBM ILE RPG             NOXDB/XMLPARS140         DKSRV206   04-06-19 14:48:46        Page     28
 Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
 Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
   1102+     pElem          Pointer    value;                                                                               1001094
   1103+   End-PR;                                                                                                          1001095
   1104+                                                                                                                    1001096
   1105+                                                                                                                    1001097
   1106+ // use get xml_GetName                                                                                             1001098
   1107+   Dcl-PR xml_getElemName Varchar(32767)                                                                            1001099
   1108+                         extproc(*CWIDEN : 'jx_GetNodeNameVC');                                                     1001100
   1109+     //Pointer to node                                                                                              1001101
   1110+     pNode          Pointer    value;                                                                               1001102
   1111+   End-PR;                                                                                                          1001103
   1112+                                                                                                                    1001104
   1113+ // use xml_GetValueStr                                                                                             1001105
   1114+   Dcl-PR xml_GetElemValue Varchar(32767)                                                                           1001106
   1115+                          extproc(*CWIDEN : 'jx_GetNodeValueVC');                                                   1001107
   1116+     //Pointer to element                                                                                           1001108
   1117+     pElem          Pointer    value;                                                                               1001109
   1118+     //If not found - default value                                                                                 1001110
   1119+     Defaultvalue   Pointer    value options(*string:*nopass);                                                      1001111
   1120+   End-PR;                                                                                                          1001112
   1121+                                                                                                                    1001113
   1122+  // use xml_GetAttrValue                                                                                           1001114
   1123+   Dcl-PR xml_GetAttr Varchar(32767)                                                                                1001115
   1124+                     extproc(*CWIDEN : 'jx_GetNodeAttrValueVC');                                                    1001116
   1125+     //Pointer to element                                                                                           1001117
   1126+     pNode          Pointer    value;                                                                               1001118
   1127+     //Attribute Name                                                                                               1001119
   1128+     AttrName       Pointer    value options(*string);                                                              1001120
   1129+     //If not found - default value                                                                                 1001121
   1130+     Defaultvalue   Pointer    value options(*string:*nopass);                                                      1001122
   1131+   End-PR;                                                                                                          1001123
   1132+                                                                                                                    1001124
   1133+ // has no effect any longer                                                                                        1001125
   1134+   //Set input and output CCSID                                                                                     1001126
   1135+   Dcl-PR xml_setCcsid  extproc(*CWIDEN : 'jx_SetCcsid');                                                           1001127
   1136+     //Ccsid of inpur file                                                                                          1001128
   1137+     inputCCSID     Int(10)    value;                                                                               1001129
   1138+     //Ccsid of output file                                                                                         1001130
   1139+     outputCCSID    Int(10)    value;                                                                               1001131
   1140+   End-PR;                                                                                                          1001132
   1141+                                                                                                                    1001133
   1142+ // depricated - use setNum                                                                                         1001134
   1143+   Dcl-PR xml_SetDec Pointer extproc(*CWIDEN: 'jx_SetDecByName');                                                   1001135
   1144+     //Pointer to xml_ tree                                                                                         1001136
   1145+     pNode          Pointer    value;                                                                               1001137
  5770WDS V7R1M0  100416 RN        IBM ILE RPG             NOXDB/XMLPARS140         DKSRV206   04-06-19 14:48:46        Page     29
 Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
 Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
   1146+     //X-path locations to node or attributes                                                                       1001138
   1147+     Expresion      Pointer    value options(*string);                                                              1001139
   1148+     //New value to set / pointer to object                                                                         1001140
   1149+     Value          Packed(30:15) value;                                                                            1001141
   1150+   End-PR;                                                                                                          1001142
   1151+                                                                                                                    1001143
   1152+ // Depricated in both JSON and XML - use  xml_WriteJsonStmf /   xml_WriteXmlStmf                                   1001144
   1153+ /if not defined(JSONXML_DEPRICATED)                                                                                1001145
   1154+ /define  JSONXML_DEPRICATED                                                                                        1001146
   1155+   Dcl-PR json_WriteStmf  extproc(*CWIDEN : 'jx_WriteJsonStmf');                                                    1001147
   1156+     //element. Retrive from Locate()                                                                               1001148
   1157+     pNode          Pointer    value;                                                                               1001149
   1158+     //Name of output stream file                                                                                   1001150
   1159+     FileName       Pointer    value options(*string);                                                              1001151
   1160+     //Ccsid of output file                                                                                         1001152
   1161+     Ccsid          Int(10)    value;                                                                               1001153
   1162+     Trim           Ind        value options(*nopass);                                                              1001154
   1163+   End-PR;                                                                                                          1001155
   1164+                                                                                                                    1001156
   1165+   Dcl-PR xml_WriteStmf  extproc(*CWIDEN : 'jx_WriteXmlStmf');                                                      1001157
   1166+     //element. Retrive from Locate()                                                                               1001158
   1167+     pNode          Pointer    value;                                                                               1001159
   1168+     //Name of output stream file                                                                                   1001160
   1169+     FileName       Pointer    value options(*string);                                                              1001161
   1170+     //Ccsid of output file                                                                                         1001162
   1171+     Ccsid          Int(10)    value;                                                                               1001163
   1172+     Trim           Ind        value options(*nopass);                                                              1001164
   1173+   End-PR;                                                                                                          1001165
   1174+ /endif                                                                                                             1001166
   1175                                                                                                                      000010
   1176    Dcl-S pXml         Pointer;                                                                                       000011
   1177    Dcl-S pA           Pointer;                                                                                       000012
   1178    Dcl-S lCount       Int(10);                                                                                       000013
   1179    Dcl-S kCount       Int(10);                                                                                       000014
   1180    Dcl-S countChildren Int(10);                                                                                      000015
   1181                                                                                                                      000016
   1182    //------------------------------------------------------------- *                                                 000017
   1183                                                                                                                      000018
   1184    pXml  = xml_parseString('                  -                                                                      000019
   1185        <a>                                    -                                                                      000020
   1186           <l>1</l>                            -                                                                      000021
   1187           <l>2</l>                            -                                                                      000022
  5770WDS V7R1M0  100416 RN        IBM ILE RPG             NOXDB/XMLPARS140         DKSRV206   04-06-19 14:48:46        Page     30
 Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
 Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
   1188           <k>x</k>                            -                                                                      000023
   1189           <l>3</l>                            -                                                                      000024
   1190        </a>                                   -                                                                      000025
   1191    ');                                                                                                               000026
   1192                                                                                                                      000027
   1193    // Count number of l and k tags                                                                                   000028
   1194    lCount = xml_getNum(pXml : '/a/l#UBOUND¤');                                                                       000029
   1195    kCount = xml_getNum(pXml : '/a/k#UBOUND¤');                                                                       000030
   1196                                                                                                                      000031
   1197    // relative Count number of l and k tags                                                                          000032
   1198    pA = xml_locate(pXml : '/a');                                                                                     000033
   1199    lCount = xml_getNum(pA   : 'l#UBOUND¤');                                                                          000034
   1200    kCount = xml_getNum(pA   : 'k#UBOUND¤');                                                                          000035
   1201                                                                                                                      000036
   1202    // relative Count number childrens of a                                                                           000037
   1203    pA = xml_locate(pXml : '/a');                                                                                     000038
   1204    countChildren  =   xml_getNum(pA  : '#UBOUND¤');                                                                  000039
   1205                                                                                                                      000040
   1206    xml_Close(pXml);                                                                                                  000041
   1207    *inlr = *on;                                                                                                      000042
        * * * * *   E N D   O F   S O U R C E   * * * * *
  5770WDS V7R1M0  100416 RN        IBM ILE RPG             NOXDB/XMLPARS140         DKSRV206   04-06-19 14:48:46        Page     31
           A d d i t i o n a l   D i a g n o s t i c   M e s s a g e s
  Msg id  Sv Number Seq     Message text
  * * * * *   E N D   O F   A D D I T I O N A L   D I A G N O S T I C   M E S S A G E S   * * * * *
                             / C o p y   M e m b e r s
 Line   Src  RPG name   <-------- External name -------> CCSID  <- Last change ->
 Number Id              Library    File       Member            Date     Time
      9    1 xmlParser+ ./../headers/xmlParser.rpgle      1252  04-06-19 14:42:33
          * * * * *   E N D   O F   / C O P Y   M E M B E R S   * * * * *
  5770WDS V7R1M0  100416 RN        IBM ILE RPG             NOXDB/XMLPARS140         DKSRV206   04-06-19 14:48:46        Page     32
                           C r o s s   R e f e r e n c e
       File and Record References:
          File              Device             References (D=Defined)
            Record
          No references in the source.
       Global Field References:
          Field             Attributes         References (D=Defined M=Modified)
          *INLR             N(1)                 1207M
          COUNTCHILDREN     I(10,0)              1180D   1204M
 *RNF7031 JSON_WRITESTMF    PROTOTYPE            1155D
          KCOUNT            I(10,0)              1179D   1195M   1200M
          LCOUNT            I(10,0)              1178D   1194M   1199M
          MO_MERGE_MATCH    CONST                  83D
          MO_MERGE_NEW      CONST                  81D
          MO_MERGE_REPLACE  CONST                  86D
          PA                *(16)                1177D   1198M   1199    1200
                                                 1203M   1204
          PROTOTYPE_ONLY    *(16)                 658     673
          PXML              *(16)                1176D   1184M   1194    1195
                                                 1198    1203    1206
          XML_AFTER_SIBLING CONST                 413D
          XML_ALLOW_PRIMITIVES...
                            CONST                  69D
          XML_ALLROWS       CONST                 847D
          XML_APPROXIMATE_TOTALROWS...
                            CONST                 864D
          XML_ARRAY         CONST                  52D
 *RNF7031 XML_ARRAYAPPEND   *(16)                 484D
                            PROTOTYPE
 *RNF7031 XML_ARRAYPUSH     *(16)                 470D
                            PROTOTYPE
 *RNF7031 XML_ARRAYSLICE    *(16)                 494D
                            PROTOTYPE
 *RNF7031 XML_ARRAYSORT     *(16)                 506D
                            PROTOTYPE
 *RNF7031 XML_ASJSONTEXT    A(32767)              596D
                            VARYING(2)
                            PROTOTYPE
 *RNF7031 XML_ASJSONTEXTMEM U(10,0)               602D
                            PROTOTYPE
 *RNF7031 XML_ASTEXT        A(32767)             1044D
  5770WDS V7R1M0  100416 RN        IBM ILE RPG             NOXDB/XMLPARS140         DKSRV206   04-06-19 14:48:46        Page     33
                            VARYING(2)
                            PROTOTYPE
 *RNF7031 XML_ASXMLTEXT     A(32767)              625D
                            VARYING(2)
                            PROTOTYPE
 *RNF7031 XML_ASXMLTEXTMEM  U(10,0)               630D
                            PROTOTYPE
          XML_BEFORE_SIBLING...
                            CONST                 412D
          XML_BY_CONTEXT    CONST                  61D
          XML_CHILD_LIST    CONST                  89D
 *RNF7031 XML_CLEAR         PROTOTYPE             769D
 *RNF7031 XML_CLONEFORMAT   PROTOTYPE             576D
          XML_CLOSE         PROTOTYPE             774D   1206M
 *RNF7031 XML_COPY          PROTOTYPE            1013D
          XML_COPY_CLONE    CONST                 481D
 *RNF7031 XML_COPYVALUE     *(16)                 389D
                            PROTOTYPE
 *RNF7031 XML_DELETE        PROTOTYPE            1032D
 *RNF7031 XML_DELIMITERDS   DS(11)                658D
                            BASED(PROTOTYPE+)
 *RNF7031   APOS            A(1)                  668D
 *RNF7031   BACKSLASH       A(1)                  660D
 *RNF7031   BLANK           A(1)                  664D
 *RNF7031   BRABEG          A(1)                  662D
 *RNF7031   BRAEND          A(1)                  663D
 *RNF7031   CURBEG          A(1)                  666D
 *RNF7031   CUREND          A(1)                  667D
 *RNF7031   DOT             A(1)                  665D
 *RNF7031   MASTERSPACE     A(1)                  661D
 *RNF7031   QUOT            A(1)                  669D
 *RNF7031   SLASH           A(1)                  659D
          XML_DELIMITERS    CONST                  45D
          XML_DONTREPLACE   CONST                 548D
 *RNF7031 XML_DUMP          PROTOTYPE             570D
 *RNF7031 XML_ELEMENTADD    *(16)                1080D
                            PROTOTYPE
 *RNF7031 XML_ELEMENTCOPY   PROTOTYPE            1022D
 *RNF7031 XML_ELEMENTDELETE PROTOTYPE            1038D
 *RNF7031 XML_ELEMENTTYPE   I(5,0)               1073D
                            PROTOTYPE
 *RNF7031 XML_ERROR         N(1)                  115D
                            PROTOTYPE
          XML_EVAL          CONST                  53D
          XML_FIELDS        CONST                 855D
          XML_FIRST_CHILD   CONST                 410D
  5770WDS V7R1M0  100416 RN        IBM ILE RPG             NOXDB/XMLPARS140         DKSRV206   04-06-19 14:48:46        Page     34
 *RNF7031 XML_FOREACH       N(1)                  709D
                            PROTOTYPE
 *RNF7031 XML_GETATTR       A(32767)             1123D
                            VARYING(2)
                            PROTOTYPE
 *RNF7031 XML_GETATTRFIRST  *(16)                 751D
                            PROTOTYPE
 *RNF7031 XML_GETATTRNAME   A(32767)              762D
                            VARYING(2)
                            PROTOTYPE
 *RNF7031 XML_GETATTRNEXT   *(16)                 757D
                            PROTOTYPE
 *RNF7031 XML_GETATTRVALUE  A(32767)              733D
                            VARYING(2)
                            PROTOTYPE
 *RNF7031 XML_GETCHILD      *(16)                 203D
                            PROTOTYPE
 *RNF7031 XML_GETDELIMITERS *(16)                  37D
                            PROTOTYPE
 *RNF7031 XML_GETELEMCHILD  *(16)                1100D
                            PROTOTYPE
 *RNF7031 XML_GETELEMNAME   A(32767)             1107D
                            VARYING(2)
                            PROTOTYPE
 *RNF7031 XML_GETELEMNEXT   *(16)                1093D
                            PROTOTYPE
 *RNF7031 XML_GETELEMVALUE  A(32767)             1114D
                            VARYING(2)
                            PROTOTYPE
 *RNF7031 XML_GETILOBVALUE  N(1)                  380D
                            PROTOTYPE
 *RNF7031 XML_GETINT        I(20,0)               369D
                            PROTOTYPE
 *RNF7031 XML_GETLENGTH     I(10,0)               532D
                            PROTOTYPE
 *RNF7031 XML_GETMESSAGEOBJECT...
                            *(16)                 128D
                            PROTOTYPE
 *RNF7031 XML_GETNAME       A(32767)              314D
                            VARYING(2)
                            PROTOTYPE
 *RNF7031 XML_GETNAMEASPATH A(32767)              320D
                            VARYING(2)
                            PROTOTYPE
 *RNF7031 XML_GETNEXT       *(16)                 197D
                            PROTOTYPE
  5770WDS V7R1M0  100416 RN        IBM ILE RPG             NOXDB/XMLPARS140         DKSRV206   04-06-19 14:48:46        Page     35
 *RNF7031 XML_GETNODEATTRVALUE...
                            A(32767)              714D
                            VARYING(2)
                            PROTOTYPE
          XML_GETNUM        P(30,15)              360D   1194    1195    1199
                            PROTOTYPE            1200    1204
 *RNF7031 XML_GETPARENT     *(16)                 209D
                            PROTOTYPE
 *RNF7031 XML_GETSTR        A(32767)              337D
                            VARYING(2)
                            PROTOTYPE
 *RNF7031 XML_GETSTRJOIN    A(32767)              347D
                            VARYING(2)
                            PROTOTYPE
 *RNF7031 XML_GETVALUE      A(32767)             1003D
                            VARYING(2)
                            PROTOTYPE
 *RNF7031 XML_GETVALUEINT   I(20,0)               301D
                            PROTOTYPE
 *RNF7031 XML_GETVALUENUM   P(30,15)              293D
                            PROTOTYPE
 *RNF7031 XML_GETVALUEPTR   *(16)                 307D
                            PROTOTYPE
 *RNF7031 XML_GETVALUESTR   A(32767)              285D
                            VARYING(2)
                            PROTOTYPE
 *RNF7031 XML_HAS           N(1)                  159D
                            PROTOTYPE
 *RNF7031 XML_HTTPREQUEST   *(16)                 983D
                            PROTOTYPE
          XML_IGNORE_CASE   CONST                 529D
 *RNF7031 XML_ISNODE        N(1)                  183D
                            PROTOTYPE
 *RNF7031 XML_ISNULL        N(1)                  175D
                            PROTOTYPE
 *RNF7031 XML_ISTRUE        N(1)                  167D
                            PROTOTYPE
 *RNF7031 XML_ITERATOR      DS(145)               673D    691     699     710
                            BASED(PROTOTYPE+)
 *RNF7031   BREAK           N(1)                  687D
 *RNF7031   COMMA           A(1)                  680D
                            VARYING(2)
 *RNF7031   COUNT           I(10,0)               681D
 *RNF7031   FILLER          A(64)                 688D
 *RNF7031   ISFIRST         N(1)                  677D
 *RNF7031   ISLAST          N(1)                  678D
  5770WDS V7R1M0  100416 RN        IBM ILE RPG             NOXDB/XMLPARS140         DKSRV206   04-06-19 14:48:46        Page     36
 *RNF7031   ISLIST          N(1)                  676D
 *RNF7031   ISRECURSIVE     N(1)                  679D
 *RNF7031   LENGTH          I(10,0)               682D
 *RNF7031   LISTARR         *(16)                 685D
 *RNF7031   ROOT            *(16)                 674D
 *RNF7031   SIZE            I(10,0)               683D
 *RNF7031   THIS            *(16)                 675D
          XML_LAST_CHILD    CONST                 411D
          XML_LITERAL       CONST                  57D
          XML_LOCATE        *(16)                 142D   1198    1203
                            PROTOTYPE
 *RNF7031 XML_LOCATEORCREATE...
                            *(16)                 150D
                            PROTOTYPE
 *RNF7031 XML_LOOKUPVALUE   *(16)                 518D
                            PROTOTYPE
 *RNF7031 XML_MAPIX         N(1)                  803D
                            PROTOTYPE
 *RNF7031 XML_MEMLEAK       N(1)                  779D
                            PROTOTYPE
 *RNF7031 XML_MEMSTAT       PROTOTYPE             783D
 *RNF7031 XML_MEMUSE        U(20,0)               787D
                            PROTOTYPE
 *RNF7031 XML_MERGE         *(16)                 538D
                            PROTOTYPE
 *RNF7031 XML_MERGEOBJECTS  *(16)                 552D
                            PROTOTYPE
 *RNF7031 XML_MESSAGE       A(1024)               121D
                            VARYING(2)
                            PROTOTYPE
          XML_META          CONST                 853D
          XML_MOVE_MODES    CONST                  67D
          XML_MOVE_UNLINK   CONST                 480D
 *RNF7031 XML_MOVEOBJECTINTO...
                            *(16)                 562D
                            PROTOTYPE
 *RNF7031 XML_NEWARRAY      *(16)                 464D
                            PROTOTYPE
 *RNF7031 XML_NEWOBJECT     *(16)                 457D
                            PROTOTYPE
 *RNF7031 XML_NODEADD       *(16)                 421D
                            PROTOTYPE
 *RNF7031 XML_NODECHECKSUM  U(10,0)               452D
                            PROTOTYPE
 *RNF7031 XML_NODECLONE     *(16)                 415D
                            PROTOTYPE
  5770WDS V7R1M0  100416 RN        IBM ILE RPG             NOXDB/XMLPARS140         DKSRV206   04-06-19 14:48:46        Page     37
 *RNF7031 XML_NODECOPY      PROTOTYPE             400D
 *RNF7031 XML_NODEDELETE    PROTOTYPE             434D
 *RNF7031 XML_NODERENAME    N(1)                  189D
                            PROTOTYPE
 *RNF7031 XML_NODESANITIZE  PROTOTYPE             445D
 *RNF7031 XML_NODETYPE      I(5,0)                329D
                            PROTOTYPE
 *RNF7031 XML_NODEUNLINK    *(16)                 440D
                            PROTOTYPE
          XML_OBJCOPY       CONST                  60D
          XML_OBJECT        CONST                  51D
          XML_OBJLINK       CONST                  58D
          XML_OBJMOVE       CONST                  62D
          XML_OBJREPLACE    CONST                  59D
          XML_PARSE         CONST                  73D
 *RNF7031 XML_PARSEFILE     *(16)                  93D
                            PROTOTYPE
          XML_PARSESTRING   *(16)                 101D   1184
                            PROTOTYPE
          XML_POINTER_VALUE CONST                  54D
          XML_REPLACE       CONST                 549D
          XML_ROOT          CONST                  56D
          XML_ROWARRAY      CONST                 851D
          XML_SAME_CASE     CONST                 528D
 *RNF7031 XML_SEGMENTDISPOSE...
                            PROTOTYPE             797D
 *RNF7031 XML_SEGMENTSELECTNO...
                            *(16)                 791D
                            PROTOTYPE
 *RNF7031 XML_SETATTRVALUE  PROTOTYPE             741D
 *RNF7031 XML_SETBOOL       *(16)                 247D
                            PROTOTYPE
 *RNF7031 XML_SETCCSID      PROTOTYPE            1135D
 *RNF7031 XML_SETDEC        *(16)                1143D
                            PROTOTYPE
 *RNF7031 XML_SETDECPOINT   PROTOTYPE             109D
 *RNF7031 XML_SETDELIMITERS PROTOTYPE              40D
 *RNF7031 XML_SETEVAL       *(16)                 214D
                            PROTOTYPE
 *RNF7031 XML_SETINT        *(16)                 229D
                            PROTOTYPE
 *RNF7031 XML_SETITERATOR   DS(145)               691D
                            PROTOTYPE
 *RNF7031 XML_SETNODEATTRVALUE...
                            PROTOTYPE             724D
 *RNF7031 XML_SETNUM        *(16)                 238D
  5770WDS V7R1M0  100416 RN        IBM ILE RPG             NOXDB/XMLPARS140         DKSRV206   04-06-19 14:48:46        Page     38
                            PROTOTYPE
 *RNF7031 XML_SETPROCPTR    *(16)                 265D
                            PROTOTYPE
 *RNF7031 XML_SETPTR        *(16)                 256D
                            PROTOTYPE
 *RNF7031 XML_SETRECURSIVEITERATOR...
                            DS(145)               699D
                            PROTOTYPE
 *RNF7031 XML_SETSTR        *(16)                 220D
                            PROTOTYPE
 *RNF7031 XML_SETVALUE      *(16)                 274D
                            PROTOTYPE
 *RNF7031 XML_SQLCLOSE      PROTOTYPE             910D
 *RNF7031 XML_SQLCODE       I(10,0)               979D
                            PROTOTYPE
 *RNF7031 XML_SQLCOLUMNS    I(10,0)               896D
                            PROTOTYPE
 *RNF7031 XML_SQLCONNECT    *(16)                 969D
                            PROTOTYPE
 *RNF7031 XML_SQLDISCONNECT PROTOTYPE             975D
 *RNF7031 XML_SQLEXEC       N(1)                  917D
                            PROTOTYPE
 *RNF7031 XML_SQLFETCHNEXT  *(16)                 889D
                            PROTOTYPE
 *RNF7031 XML_SQLFETCHRELATIVE...
                            *(16)                 879D
                            PROTOTYPE
 *RNF7031 XML_SQLGETINSERTID...
                            I(10,0)               960D
                            PROTOTYPE
 *RNF7031 XML_SQLGETMETA    *(16)                 964D
                            PROTOTYPE
 *RNF7031 XML_SQLINSERT     N(1)                  938D
                            PROTOTYPE
 *RNF7031 XML_SQLOPEN       *(16)                 870D
                            PROTOTYPE
 *RNF7031 XML_SQLRESULTROW  *(16)                 824D
                            PROTOTYPE
 *RNF7031 XML_SQLRESULTSET  *(16)                 833D
                            PROTOTYPE
 *RNF7031 XML_SQLROWS       I(10,0)               904D
                            PROTOTYPE
 *RNF7031 XML_SQLSETOPTIONS PROTOTYPE             817D
 *RNF7031 XML_SQLUPDATE     N(1)                  926D
                            PROTOTYPE
 *RNF7031 XML_SQLUPSERT     N(1)                  948D
  5770WDS V7R1M0  100416 RN        IBM ILE RPG             NOXDB/XMLPARS140         DKSRV206   04-06-19 14:48:46        Page     39
                            PROTOTYPE
 *RNF7031 XML_STREAM        *(16)                 638D
                            PROTOTYPE
 *RNF7031 XML_SUCCESSTRUE   *(16)                 136D
                            PROTOTYPE
          XML_TOTALROWS     CONST                 858D
 *RNF7031 XML_TRACESETID    PROTOTYPE             995D
          XML_UNKNOWN       CONST                  50D
          XML_UPPERCASE     CONST                 860D
          XML_USE_LOCALE    CONST                 515D
          XML_VALUE         CONST                  55D
 *RNF7031 XML_WRITECSVSTMF  PROTOTYPE             644D
 *RNF7031 XML_WRITEJSONSTMF PROTOTYPE             584D
 *RNF7031 XML_WRITESTMF     PROTOTYPE            1165D
 *RNF7031 XML_WRITEXMLSTMF  PROTOTYPE             613D
 *RNF7031 XML_XPATHVALUE    A(32767)             1051D
                            VARYING(2)
                            PROTOTYPE
 *RNF7031 XML_XPATHVALUENUM P(30,15)             1062D
                            PROTOTYPE
       Indicator References:
          Indicator                            References (D=Defined M=Modified)
          LR                                     1207M
        * * * * *   E N D   O F   C R O S S   R E F E R E N C E   * * * * *
  5770WDS V7R1M0  100416 RN        IBM ILE RPG             NOXDB/XMLPARS140         DKSRV206   04-06-19 14:48:46        Page     40
                       E x t e r n a l   R e f e r e n c e s
       Statically bound procedures:
          Procedure                            References
          jx_Has                                  159
          jx_Dump                                 570
          jx_Error                                115
          jx_Clear                                769
          jx_Close                                774    1206
          jx_MapIx                                803
          jx_IsTrue                               167
          jx_IsNull                               175
          jx_isNode                               183
          jx_Stream                               638
          jx_MemUse                               787
          jx_Message                              121
          jx_GetNode                              142    1198    1203
          jx_NodeAdd                              421    1080
          jx_ForEach                              709
          jx_MemLeak                              779
          jx_MemStat                              783
          jx_sqlOpen                              870
          jx_sqlRows                              904
          jx_sqlExec                              917
          jx_sqlCode                              979
          jx_NodeCopy                             400    1013    1022
          jx_NewArray                             464
          jx_sqlClose                             910
          jx_SetCcsid                            1135
          jx_ParseFile                             93
          jx_CopyValue                            389
          jx_NodeClone                            415
          jx_NewObject                            457
          jx_ArrayPush                            470
          jx_ArraySort                            506
          jx_getLength                            532
          jx_NodeMerge                            538
          jx_AsXmlText                            625
          jx_sqlUpdate                            926
          jx_sqlInsert                            938
          jx_sqlUpsert                            948
          jx_NodeRename                           189
          jx_GetValueVC                           337    1003    1052
          jx_NodeDelete                           434    1032    1038
          jx_NodeUnlink                           440
          jx_ArraySlice                           494
  5770WDS V7R1M0  100416 RN        IBM ILE RPG             NOXDB/XMLPARS140         DKSRV206   04-06-19 14:48:46        Page     41
          jx_AsJsonText                           597    1044
          jx_sqlColumns                           896
          jx_sqlGetMeta                           964
          jx_sqlConnect                           969
          jx_traceSetId                           995
          jx_ParseString                          101    1191
          jx_SetDecPoint                          109
          jx_SuccessTrue                          136
          jx_GetNodeNext                          197    1093
          jx_GetNodeType                          329    1073
          jx_GetValueNum                          360    1063    1194    1195
                                                 1199    1200    1204
          jx_GetValueInt                          369
          jx_ArrayAppend                          484
          jx_lookupValue                          518
          jx_CloneFormat                          576
          jx_SetIterator                          692
          jx_GetAttrNext                          757
          jx_httpRequest                          983
          jx_GetNodeChild                         203    1100
          jx_SetStrByName                         220
          jx_SetIntByName                         229
          jx_SetDecByName                         238    1143
          jx_SetPtrByName                         256     265
          jx_GetStrJoinVC                         348
          jx_NodeSanitize                         445
          jx_NodeCheckSum                         452
          jx_MergeObjects                         552
          jx_NodeMoveInto                         562
          jx_WriteXmlStmf                         613    1165
          jx_AsXmlTextMem                         630
          jx_WriteCsvStmf                         644
          jx_SetAttrValue                         741
          jx_GetAttrFirst                         751
          jx_sqlResultRow                         824
          jx_sqlResultSet                         833
          jx_sqlFetchNext                         889
          jx_GetDelimiters                         37
          jx_GetNodeParent                        209
          jx_SetEvalByName                        214
          jx_SetBoolByName                        247
          jx_GetNodeNameVC                        315    1108
          ILOB_XmlGetValue                        380
          jx_WriteJsonStmf                        584    1155
          jx_AsJsonTextMem                        603
          jx_GetAttrNameVC                        763
  5770WDS V7R1M0  100416 RN        IBM ILE RPG             NOXDB/XMLPARS140         DKSRV206   04-06-19 14:48:46        Page     42
          jx_sqlSetOptions                        817
          jx_sqlDisconnect                        975
          jx_SetDelimiters2                        40
          jx_SetValueByName                       274
          jx_GetNodeValueVC                       286    1115
          jx_GetAttrValueVC                       734
          jx_SegmentDispose                       797
          jx_sqlGetInsertId                       960
          jx_GetOrCreateNode                      151
          jx_GetNodeValueNum                      294
          jx_GetNodeValueInt                      301
          jx_GetNodeValuePtr                      307
          jx_SegmentSelectNo                      792
          jx_GetMessageObject                     129
          jx_SetNodeAttrValue                     724
          jx_sqlFetchRelative                     880
          jx_GetNodeNameAsPath                    321
          jx_GetNodeAttrValueVC                   715    1124
          jx_SetRecursiveIterator                 701
       Imported fields:
          Field             Attributes         Defined
          No references in the source.
       Exported fields:
          Field             Attributes         Defined
          No references in the source.
    * * * * *   E N D   O F   E X T E R N A L   R E F E R E N C E S   * * * * *
  5770WDS V7R1M0  100416 RN        IBM ILE RPG             NOXDB/XMLPARS140         DKSRV206   04-06-19 14:48:46        Page     43
                           M e s s a g e   S u m m a r y
  Msg id  Sv Number Message text
 *RNF7031 00    147 The name or indicator is not referenced.
        * * * * *   E N D   O F   M E S S A G E   S U M M A R Y   * * * * *
  5770WDS V7R1M0  100416 RN        IBM ILE RPG             NOXDB/XMLPARS140         DKSRV206   04-06-19 14:48:46        Page     44
                             F i n a l   S u m m a r y
   Message Totals:
     Information  (00) . . . . . . . :      147
     Warning      (10) . . . . . . . :        0
     Error        (20) . . . . . . . :        0
     Severe Error (30+)  . . . . . . :        0
     ---------------------------------  -------
     Total . . . . . . . . . . . . . :      147
   Source Totals:
     Records . . . . . . . . . . . . :     1207
     Specifications  . . . . . . . . :      618
     Data records  . . . . . . . . . :        0
     Comments  . . . . . . . . . . . :      417
          * * * * *   E N D   O F   F I N A L   S U M M A R Y   * * * * *
 Program XMLPARS140 placed in library NOXDB. 00 highest severity. Created on 04-06-19 at 14:48:46.
           * * * * *   E N D   O F   C O M P I L A T I O N * * * * *
