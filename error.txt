  5770WDS V7R3M0  160422 RN        IBM ILE RPG             NOXDB2/EX01DEMO          DKSRV133   28-11-18 18:24:37        Page      1
   Command  . . . . . . . . . . . . :   CRTBNDRPG
     Issued by  . . . . . . . . . . :     NLI
   Program  . . . . . . . . . . . . :   EX01DEMO
     Library  . . . . . . . . . . . :     NOXDB2
   Text 'description' . . . . . . . :   *SRCMBRTXT
   Source stream file   . . . . . . :   examples/ex01Demo.rpgle
     CCSID  . . . . . . . . . . . . :     500
   Text 'description' . . . . . . . :
   Last Change  . . . . . . . . . . :   28-11-18  16:17:02
   Generation severity level  . . . :   10
   Default activation group . . . . :   *YES
   Compiler options . . . . . . . . :   *XREF      *GEN       *NOSECLVL  *SHOWCPY
                                        *EXPDDS    *EXT       *NOSHOWSKP *NOSRCSTMT
                                        *DEBUGIO   *UNREF     *NOEVENTF
   Debugging views  . . . . . . . . :   *LIST
   Debug encryption key . . . . . . :   *NONE
   Output . . . . . . . . . . . . . :   *PRINT
   Optimization level . . . . . . . :   *NONE
   Source listing indentation . . . :   *NONE
   Type conversion options  . . . . :   *NONE
   Sort sequence  . . . . . . . . . :   *HEX
   Language identifier  . . . . . . :   *JOBRUN
   Replace program  . . . . . . . . :   *YES
   User profile . . . . . . . . . . :   *USER
   Authority  . . . . . . . . . . . :   *LIBCRTAUT
   Truncate numeric . . . . . . . . :   *YES
   Fix numeric  . . . . . . . . . . :   *NONE
   Target release . . . . . . . . . :   *CURRENT
   Allow null values  . . . . . . . :   *NO
   Define condition names . . . . . :   *NONE
   Enable performance collection  . :   *PEP
   Profiling data . . . . . . . . . :   *NOCOL
   Licensed Internal Code options . :
   Generate program interface . . . :   *NO
   Include directory  . . . . . . . :   ./..
                                    :   /prj/noxdb
   Preprocessor options . . . . . . :   *NONE
  5770WDS V7R3M0  160422 RN        IBM ILE RPG             NOXDB2/EX01DEMO          DKSRV133   28-11-18 18:24:37        Page      2
 Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
 Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
                           S o u r c e   L i s t i n g
      1 **FREE                                                                                                               000001
      2         // -------------------------------------------------------------                                             000002
      3         // noxDB - Not Only Xml - Its JSON, XML, SQL and more                                                        000003
      4         //                                                                                                           000004
      5         // This tutorial will show all the features, from a JSON                                                     000005
      6         // and SQL perspective                                                                                       000006
      7         //                                                                                                           000007
      8         // Design:  Niels Liisberg                                                                                   000008
      9         // Project: Sitemule.com                                                                                     000009
     10         //                                                                                                           000010
     11         // try/build:                                                                                                000011
     12         // cd '/prj/noxdb2'                                                                                       000012
     13         // addlible noxdb2                                                                                           000013
     14         // call                                                                                                      000014
     15         // -------------------------------------------------------------                                             000015
     16                                                                                                                      000016
     17         Ctl-Opt BndDir('NOXDB') dftactgrp(*NO) ACTGRP('QILE');                                                       000017
     18                                                                                                                      000018
     19         //------------------------------------------------------------- *                                            000019
     20                                                                                                                      000020
     21         /include 'headers/JSONPARSER.rpgle'                                                                          000021
 Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
 Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
         *--------------------------------------------------------------------------------------------*
         * RPG member name  . . . . . :  JSONPARSE+                                                   *                     1
         * External name  . . . . . . :  ./headers/JSONPARSER.rpgle                                   *                     1
         * Last change  . . . . . . . :  28-11-18  18:14:56                                           *                     1
         *--------------------------------------------------------------------------------------------*
 Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
 Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
     22+**FREE                                                                                                              1000001
     23+        // ---------------------------------------------------------------------- *                                 1000002
     24+        // This is the prototype for noxDB - JSON, XML and SQL made easy                                            1000003
     25+        // Use the NOXDB binddir when creating your program and include this                                        1000004
     26+        // prototypes like:                                                                                         1000005
     27+                                                                                                                    1000006
     28+        //     Ctl-Opt BndDir('NOXDB') dftactgrp(*NO) ACTGRP('QILE');                                               1000007
  5770WDS V7R3M0  160422 RN        IBM ILE RPG             NOXDB2/EX01DEMO          DKSRV133   28-11-18 18:24:37        Page      3
 Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
 Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
     29+        //     /include 'headers/JSONPARSER.rpgle'                                                                  1000008
     30+                                                                                                                    1000009
     31+        // Note: Both XMLPARSER and JSONPARSER headers are autogenerated from                                       1000010
     32+        // the NOXDB header. so please do not make any changes the there headerfile                                 1000011
     33+                                                                                                                    1000012
     34+        // ---------------------------------------------------------------------- *                                 1000013
     35+      /if defined( json_DEF)                                                                                        1000014
             LINES EXCLUDED: 1
     36+      /endif                                                                                                        1000016
     37+      /define  json_DEF                                                                                             1000017
     38+                                                                                                                    1000018
     39+        // 1M minus length of 4 bytes                                                                               1000019
         *--------------------------------------------------------------------*
         * Compiler Options in Effect:                                        *
         *--------------------------------------------------------------------*
         *  Text 'description' . . . . . . . :                                *
         *  Generation severity level  . . . :   10                           *
         *  Default activation group . . . . :   *NO                          *
         *  Compiler options . . . . . . . . :   *XREF      *GEN              *
         *                                       *NOSECLVL  *SHOWCPY          *
         *                                       *EXPDDS    *EXT              *
         *                                       *NOSHOWSKP *NOSRCSTMT        *
         *                                       *DEBUGIO   *UNREF            *
         *                                       *NOEVENTF                    *
         *  Optimization level . . . . . . . :   *NONE                        *
         *  Source listing indentation . . . :   *NONE                        *
         *  Type conversion options  . . . . :   *NONE                        *
         *  Sort sequence  . . . . . . . . . :   *HEX                         *
         *  Language identifier  . . . . . . :   *JOBRUN                      *
         *  User profile . . . . . . . . . . :   *USER                        *
         *  Authority  . . . . . . . . . . . :   *LIBCRTAUT                   *
         *  Truncate numeric . . . . . . . . :   *YES                         *
         *  Fix numeric  . . . . . . . . . . :   *NONE                        *
         *  Allow null values  . . . . . . . :   *NO                          *
         *  Storage model . . .  . . . . . . :   *SNGLVL                      *
         *  Binding directory from Command . :   *NONE                        *
         *  Binding directory from Source  . :   NOXDB                        *
         *    Library  . . . . . . . . . . . :     *LIBL                      *
         *  Activation group . . . . . . . . :   QILE                         *
         *  Enable performance collection  . :   *PEP                         *
         *  Profiling data . . . . . . . . . :   *NOCOL                       *
         *  Generate program interface . . . :   *NO                          *
         *--------------------------------------------------------------------*
  5770WDS V7R3M0  160422 RN        IBM ILE RPG             NOXDB2/EX01DEMO          DKSRV133   28-11-18 18:24:37        Page      4
 Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
 Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
     40+        Dcl-S UTF8 varchar(1048572) CCSID(*UTF8) Template;                                                          1000020
     41+                                                                                                                    1000021
     42+        // ---------------------------------------------------------------------- *                                 1000022
     43+        // Type of a node:                                                                                          1000023
     44+        // ---------------------------------------------------------------------- *                                 1000024
     45+        Dcl-C json_UNKNOWN const(0);                                                                                1000025
     46+        Dcl-C json_OBJECT  const(1);                                                                                1000026
     47+        Dcl-C json_ARRAY   const(2);                                                                                1000027
     48+        Dcl-C json_EVAL    const(3);                                                                                1000028
     49+        Dcl-C json_POINTER_VALUE const(4);                                                                          1000029
     50+        Dcl-C json_VALUE   const(5);                                                                                1000030
     51+        Dcl-C json_ROOT    const(6);                                                                                1000031
     52+        Dcl-C json_LITERAL const(16);                                                                               1000032
     53+        Dcl-C json_OBJLINK const(17);                                                                               1000033
     54+        Dcl-C json_OBJREPLACE const(18);                                                                            1000034
     55+        Dcl-C json_OBJCOPY const(18);                                                                               1000035
     56+        Dcl-C json_BY_CONTEXT const(19);                                                                            1000036
     57+        Dcl-C json_OBJMOVE const(2048);                                                                             1000037
     58+                                                                                                                    1000038
     59+        // * Modifiers to "add" / "or" into "parseString" and "evaluate"                                            1000039
     60+        // !! Type - have to be backwards compat.                                                                   1000040
     61+        // Unlink the source and move it to dest.                                                                   1000041
     62+        Dcl-C json_MOVE_NODES const(2048);                                                                          1000042
     63+        // Allow strings ints and other values to                                                                   1000043
     64+        Dcl-C json_ALLOW_PRIMITIVES const(4096);                                                                    1000044
     65+                                                                                                                    1000045
     66+        // * Combinations:                                                                                          1000046
     67+        // json_PARSE  = json_EVAL + json_MOVE_NODES                                                                1000047
     68+        Dcl-C json_PARSE   const(2051);                                                                             1000048
     69+                                                                                                                    1000049
     70+        // Merge options:                                                                                           1000050
     71+        // Modifiers to "add" / "or" into "JSON_EVAL"                                                               1000051
     72+      /if not defined(MO_MERGE)                                                                                     1000052
     73+      /define  MO_MERGE                                                                                             1000053
     74+        // Only new elements are merged - existing                                                                  1000054
     75+        // are left untouched                                                                                       1000055
     76+        Dcl-C MO_MERGE_NEW const(256);                                                                              1000056
     77+        // Merge and replace only existing nodes.                                                                   1000057
     78+        Dcl-C MO_MERGE_MATCH const(512);                                                                            1000058
     79+        // Merge all: replace if it exists and                                                                      1000059
     80+        // append new nodes if not exists                                                                           1000060
     81+        Dcl-C MO_MERGE_REPLACE const(1024 );                                                                        1000061
     82+      /endif                                                                                                        1000062
     83+                                                                                                                    1000063
  5770WDS V7R3M0  160422 RN        IBM ILE RPG             NOXDB2/EX01DEMO          DKSRV133   28-11-18 18:24:37        Page      5
 Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
 Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
     84+        Dcl-C json_CHILD_LIST const('#0¤');                                                                         1000064
     85+                                                                                                                    1000065
     86+        // ----------------------------------------------------------------------                                   1000066
     87+        // Returns node to the json_object tree                                                                     1000067
     88+        Dcl-PR json_ParseFile Pointer extproc(*CWIDEN:'nox_ParseFile');                                             1000068
     89+          // File to parse                                                                                          1000069
     90+          FileName       pointer value  options(*string);                                                           1000070
     91+        End-PR;                                                                                                     1000071
     92+                                                                                                                    1000072
     93+        // Returns node json_object tree                                                                            1000073
     94+        Dcl-PR json_ParseStringVC Pointer extproc(*CWIDEN:'nox_ParseStringVC');                                     1000074
     95+          // String to parse                                                                                        1000075
     96+          String         Like(UTF8) const options(*varsize);                                                        1000076
     97+        End-PR;                                                                                                     1000077
     98+                                                                                                                    1000078
     99+        // Set , or . for numeri decimal point                                                                      1000079
    100+        Dcl-PR json_setDecPoint  extproc(*CWIDEN : 'nox_SetDecPoint');                                              1000080
    101+          // decimal point char                                                                                     1000081
    102+          decPoint       char(1) const ccsid(*utf8);                                                                1000082
    103+        End-PR;                                                                                                     1000083
    104+                                                                                                                    1000084
    105+        // Bool true if errors occures                                                                              1000085
    106+        Dcl-PR json_Error Ind extproc(*CWIDEN:'nox_Error');                                                         1000086
    107+          // json_Object  node                                                                                      1000087
    108+          pNode          Pointer    value;                                                                          1000088
    109+        End-PR;                                                                                                     1000089
    110+                                                                                                                    1000090
    111+        // Return error description                                                                                 1000091
    112+        // NL-OK                                                                                                    1000092
    113+        Dcl-PR json_Message varchar(1024) extproc(*CWIDEN:'nox_MessageVC');                                         1000093
    114+          // json_Object                                                                                            1000094
    115+          pNode          Pointer    value;                                                                          1000095
    116+        End-PR;                                                                                                     1000096
    117+                                                                                                                    1000097
    118+        // Without parameters you will get the last internal error                                                  1000098
    119+        // Otherwise it will format an error object                                                                 1000099
    120+        // NL-OK                                                                                                    1000100
    121+        Dcl-PR json_GetMessageObject Pointer // Return error description                                            1000101
    122+                                   extproc(*CWIDEN:'nox_GetMessageObject');                                         1000102
    123+          MessageId      Like(UTF8) const options(*nopass:*varsize);                                                1000103
    124+          MessageData    Like(UTF8) const options(*nopass:*varsize);                                                1000104
    125+        End-PR;                                                                                                     1000105
    126+                                                                                                                    1000106
    127+        // simple courtesy function to return a æ"success":trueå object                                             1000107
  5770WDS V7R3M0  160422 RN        IBM ILE RPG             NOXDB2/EX01DEMO          DKSRV133   28-11-18 18:24:37        Page      6
 Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
 Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
    128+        // Return success:true object                                                                               1000108
    129+        Dcl-PR json_SuccessTrue Pointer extproc(*CWIDEN:'nox_SuccessTrue');                                         1000109
    130+          MessageId      Like(UTF8) const options(*nopass:*varsize);                                                1000110
    131+          MessageData    Like(UTF8) const options(*nopass:*varsize);                                                1000111
    132+        End-PR;                                                                                                     1000112
    133+                                                                                                                    1000113
    134+        // Returns pointer to node                                                                                  1000114
    135+        // NL-OK                                                                                                    1000115
    136+        Dcl-PR json_Locate Pointer extproc(*CWIDEN : 'nox_GetNodeVC');                                              1000116
    137+          // Pointer to tree or node                                                                                1000117
    138+          pNode          Pointer    value;                                                                          1000118
    139+          // location expression                                                                                    1000119
    140+          Expression     Like(UTF8) const options(*varsize);                                                        1000120
    141+        End-PR;                                                                                                     1000121
    142+                                                                                                                    1000122
    143+        // Returns pointer to node                                                                                  1000123
    144+        Dcl-PR json_LocateOrCreate Pointer extproc(*CWIDEN : 'nox_GetOrCreateNodeVC');                              1000124
    145+          // Pointer to tree or node                                                                                1000125
    146+          pNode          Pointer    value;                                                                          1000126
    147+          // location expression                                                                                    1000127
    148+          Expression     Like(UTF8) const options(*varsize);                                                        1000128
    149+        End-PR;                                                                                                     1000129
    150+                                                                                                                    1000130
    151+        // Returns 'ON' if node exists                                                                              1000131
    152+        Dcl-PR json_Has Ind extproc(*CWIDEN : 'nox_HasVC');                                                         1000132
    153+          // Pointer to tree or node                                                                                1000133
    154+          pNode          Pointer    value;                                                                          1000134
    155+          // Path to node                                                                                           1000135
    156+          NodeName       Like(UTF8) const options(*varsize);                                                        1000136
    157+        End-PR;                                                                                                     1000137
    158+                                                                                                                    1000138
    159+        // Returns 'ON' if node exists and has <> 0                                                                 1000139
    160+        Dcl-PR json_isTrue Ind extproc(*CWIDEN : 'nox_IsTrueVC');                                                   1000140
    161+          // Pointer to tree or node                                                                                1000141
    162+          pNode          Pointer    value;                                                                          1000142
    163+          // Path to node                                                                                           1000143
    164+          NodeName       Like(UTF8) const options(*varsize);                                                        1000144
    165+        End-PR;                                                                                                     1000145
    166+                                                                                                                    1000146
    167+        // Returns 'ON' if node exists and has <> 0                                                                 1000147
    168+        Dcl-PR json_isNull Ind extproc(*CWIDEN : 'nox_IsNullVC');                                                   1000148
    169+          // Pointer to tree or node                                                                                1000149
    170+          pNode          Pointer    value;                                                                          1000150
    171+          // Path to node                                                                                           1000151
  5770WDS V7R3M0  160422 RN        IBM ILE RPG             NOXDB2/EX01DEMO          DKSRV133   28-11-18 18:24:37        Page      7
 Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
 Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
    172+          NodeName       Like(UTF8) const options(*varsize);                                                        1000152
    173+        End-PR;                                                                                                     1000153
    174+                                                                                                                    1000154
    175+        // Returns 'ON' if it is a valid node                                                                       1000155
    176+        Dcl-PR json_isNode Ind extproc(*CWIDEN : 'nox_isNode');                                                     1000156
    177+          // a.k.a. false for strings                                                                               1000157
    178+          pNode          Pointer    value;                                                                          1000158
    179+        End-PR;                                                                                                     1000159
    180+                                                                                                                    1000160
    181+        // renames the node name                                                                                    1000161
    182+        Dcl-PR json_NodeRename Ind extproc(*CWIDEN : 'nox_NodeRenameVC');                                           1000162
    183+          // Pointer to tree or node                                                                                1000163
    184+          pNode          Pointer    value;                                                                          1000164
    185+          // Path to node                                                                                           1000165
    186+          NodeName       Like(UTF8) const options(*varsize);                                                        1000166
    187+        End-PR;                                                                                                     1000167
    188+                                                                                                                    1000168
    189+        // Returns pointer to next sibling (elem)                                                                   1000169
    190+        Dcl-PR json_GetNext Pointer extproc(*CWIDEN : 'nox_GetNodeNext');                                           1000170
    191+          // Pointer to current node (elem)                                                                         1000171
    192+          pNode          Pointer    value;                                                                          1000172
    193+        End-PR;                                                                                                     1000173
    194+                                                                                                                    1000174
    195+        // Returns pointer to first child (elem)                                                                    1000175
    196+        Dcl-PR json_GetChild Pointer extproc(*CWIDEN : 'nox_GetNodeChild');                                         1000176
    197+          // Pointer to current node (elem)                                                                         1000177
    198+          pNode          Pointer    value;                                                                          1000178
    199+        End-PR;                                                                                                     1000179
    200+                                                                                                                    1000180
    201+        // Returns pointer to parent node                                                                           1000181
    202+        Dcl-PR json_GetParent Pointer extproc(*CWIDEN : 'nox_GetNodeParent');                                       1000182
    203+          // Pointer to current node (elem)                                                                         1000183
    204+          pNode          Pointer    value;                                                                          1000184
    205+        End-PR;                                                                                                     1000185
    206+                                                                                                                    1000186
    207+        Dcl-PR json_SetEval pointer extproc(*CWIDEN:'nox_SetEvalByNameVC');                                         1000187
    208+          pNode          Pointer    value;                                                                          1000188
    209+          Expresion      Like(UTF8) const options(*varsize);                                                        1000189
    210+          Value          Like(UTF8) const options(*varsize);                                                        1000190
    211+        End-PR;                                                                                                     1000191
    212+                                                                                                                    1000192
    213+        Dcl-PR json_SetStr Pointer extproc(*CWIDEN: 'nox_SetStrByNameVC');                                          1000193
    214+          // Pointer to json_ tree                                                                                  1000194
    215+          pNode          Pointer    value;                                                                          1000195
  5770WDS V7R3M0  160422 RN        IBM ILE RPG             NOXDB2/EX01DEMO          DKSRV133   28-11-18 18:24:37        Page      8
 Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
 Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
    216+          // X-path locations to node or attributes                                                                 1000196
    217+          Expresion      Like(UTF8) const options(*varsize);                                                        1000197
    218+          // New value to set / pointer to object                                                                   1000198
    219+          Value          Like(UTF8) const options(*varsize);                                                        1000199
    220+        End-PR;                                                                                                     1000200
    221+                                                                                                                    1000201
    222+        Dcl-PR json_SetInt Pointer extproc(*CWIDEN: 'nox_SetIntByNameVC');                                          1000202
    223+          // Pointer to json_ tree                                                                                  1000203
    224+          pNode          Pointer    value;                                                                          1000204
    225+          // X-path locations to node or attributes                                                                 1000205
    226+          Expresion      Like(UTF8) const options(*varsize);                                                        1000206
    227+          // New value to set / pointer to object                                                                   1000207
    228+          Value          Int(10)    value;                                                                          1000208
    229+        End-PR;                                                                                                     1000209
    230+                                                                                                                    1000210
    231+        Dcl-PR json_SetDate Pointer extproc(*CWIDEN: 'nox_SetDateByNameVC');                                        1000211
    232+          // Pointer to json_ tree                                                                                  1000212
    233+          pNode          Pointer    value;                                                                          1000213
    234+          // X-path locations to node or attributes                                                                 1000214
    235+          Expresion      Like(UTF8) const options(*varsize);                                                        1000215
    236+          // New value to set / pointer to object                                                                   1000216
    237+          Value          date    value;                                                                             1000217
    238+        End-PR;                                                                                                     1000218
    239+                                                                                                                    1000219
    240+                                                                                                                    1000220
    241+        Dcl-PR json_SetNum Pointer extproc(*CWIDEN: 'nox_SetDecByNameVC');                                          1000221
    242+          // Pointer to json_ tree                                                                                  1000222
    243+          pNode          Pointer    value;                                                                          1000223
    244+          // X-path locations to node or attributes                                                                 1000224
    245+          Expresion      Like(UTF8) const options(*varsize);                                                        1000225
    246+          // New value to set / pointer to object                                                                   1000226
    247+          Value          Packed(30:15) value;                                                                       1000227
    248+        End-PR;                                                                                                     1000228
    249+                                                                                                                    1000229
    250+        Dcl-PR json_SetBool Pointer extproc(*CWIDEN: 'nox_SetBoolByNameVC');                                        1000230
    251+          // Pointer to json_ tree                                                                                  1000231
    252+          pNode          Pointer    value;                                                                          1000232
    253+          // X-path locations to node or attributes                                                                 1000233
    254+          Expresion      Like(UTF8) const options(*varsize);                                                        1000234
    255+          // New value to set / pointer to object                                                                   1000235
    256+          Value          Ind        value;                                                                          1000236
    257+        End-PR;                                                                                                     1000237
    258+                                                                                                                    1000238
    259+        Dcl-PR json_SetPtr Pointer extproc(*CWIDEN: 'nox_SetPtrByNameVC');                                          1000239
  5770WDS V7R3M0  160422 RN        IBM ILE RPG             NOXDB2/EX01DEMO          DKSRV133   28-11-18 18:24:37        Page      9
 Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
 Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
    260+          // Pointer to json_ tree                                                                                  1000240
    261+          pNode          Pointer    value;                                                                          1000241
    262+          // X-path locations to node or attributes                                                                 1000242
    263+          Expresion      Like(UTF8) const options(*varsize);                                                        1000243
    264+          // Pointer to anything - You do the cleanup                                                               1000244
    265+          Value          Pointer    value;                                                                          1000245
    266+          // *ON=String escape, *OFF=If literals                                                                    1000246
    267+          isString       Ind        value options(*nopass);                                                         1000247
    268+        End-PR;                                                                                                     1000248
    269+                                                                                                                    1000249
    270+        Dcl-PR json_SetProcPtr Pointer extproc(*CWIDEN: 'nox_SetPtrByNameVC');                                      1000250
    271+          pNode          Pointer    value; // Pointer to json_ tree                                                 1000251
    272+          // X-path locations to node or attributes                                                                 1000252
    273+          Expresion      Like(UTF8) const options(*varsize);                                                        1000253
    274+          Proc           Pointer(*Proc); // Pointer to a procedure                                                  1000254
    275+        End-PR;                                                                                                     1000255
    276+                                                                                                                    1000256
    277+        Dcl-PR json_GetValueStr Like(UTF8)                                                                          1000257
    278+                              extproc(*CWIDEN : 'nox_GetNodeValueVC');                                              1000258
    279+          // Pointer to node                                                                                        1000259
    280+          pNode          Pointer    value;                                                                          1000260
    281+          // If not found - default value                                                                           1000261
    282+          Defaultvalue   Like(UTF8) const options(*nopass:*varsize);                                                1000262
    283+        End-PR;                                                                                                     1000263
    284+                                                                                                                    1000264
    285+        Dcl-PR json_GetValueNum Packed(30:15)                                                                       1000265
    286+                              extproc(*CWIDEN : 'nox_GetNodeValueNum');                                             1000266
    287+          // Pointer to node                                                                                        1000267
    288+          pNode          Pointer    value;                                                                          1000268
    289+          // If not found - default value                                                                           1000269
    290+          Defaultvalue   Packed(30:15) value options(*NOPASS);                                                      1000270
    291+        End-PR;                                                                                                     1000271
    292+                                                                                                                    1000272
    293+        Dcl-PR json_GetValueInt Int(20) extproc(*CWIDEN : 'nox_GetNodeValueInt');                                   1000273
    294+          pNode          Pointer    value; // Pointer to node                                                       1000274
    295+          // If not found - default value                                                                           1000275
    296+          Defaultvalue   Int(20)    value options(*NOPASS);                                                         1000276
    297+        End-PR;                                                                                                     1000277
    298+                                                                                                                    1000278
    299+        Dcl-PR json_GetValuePtr Pointer extproc(*CWIDEN : 'nox_GetNodeValuePtr');                                   1000279
    300+          // Pointer to node                                                                                        1000280
    301+          pNode          Pointer    value;                                                                          1000281
    302+          // If not found - default value                                                                           1000282
    303+          Defaultvalue   Like(UTF8) const options(*nopass:*varsize);                                                1000283
  5770WDS V7R3M0  160422 RN        IBM ILE RPG             NOXDB2/EX01DEMO          DKSRV133   28-11-18 18:24:37        Page     10
 Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
 Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
    304+        End-PR;                                                                                                     1000284
    305+                                                                                                                    1000285
    306+        Dcl-PR json_GetName Like(UTF8)                                                                              1000286
    307+                          extproc(*CWIDEN : 'nox_GetNodeNameVC');                                                   1000287
    308+          // Pointer to node                                                                                        1000288
    309+          pNode          Pointer    value;                                                                          1000289
    310+        End-PR;                                                                                                     1000290
    311+                                                                                                                    1000291
    312+        Dcl-PR json_GetNameAsPath Like(UTF8)                                                                        1000292
    313+                                extproc(*CWIDEN : 'nox_GetNodeNameAsPath');                                         1000293
    314+          // Pointer to node                                                                                        1000294
    315+          pNode          Pointer    value;                                                                          1000295
    316+          // Delimiter like - or . or / or \                                                                        1000296
    317+          Delimiter      Char(1)    value CCSID(*UTF8);                                                             1000297
    318+        End-PR;                                                                                                     1000298
    319+                                                                                                                    1000299
    320+        // * Refer to node type above                                                                               1000300
    321+        Dcl-PR json_NodeType Int(5) extproc(*CWIDEN : 'nox_GetNodeType');                                           1000301
    322+          // Pointer to json_ tree to receive format                                                                1000302
    323+          pNode          Pointer    value;                                                                          1000303
    324+        End-PR;                                                                                                     1000304
    325+                                                                                                                    1000305
    326+      // Get string by expresion                                                                                    1000306
    327+      //  /object/array#123¤/name                                                                                   1000307
    328+      //  .object.array#123¤.name                                                                                   1000308
    329+      // NL-OK                                                                                                      1000309
    330+        Dcl-PR json_GetStr Like(UTF8) rtnparm extproc(*CWIDEN : 'nox_GetValueVC');                                  1000310
    331+          // Pointer to relative node                                                                               1000311
    332+          pNode          Pointer    value;                                                                          1000312
    333+          // Locations expression to node                                                                           1000313
    334+          Expression     Like(UTF8) const options(*nopass:*varsize);                                                1000314
    335+          // If not found - default value                                                                           1000315
    336+          Defaultvalue   Like(UTF8) const options(*nopass:*varsize);                                                1000316
    337+        End-PR;                                                                                                     1000317
    338+                                                                                                                    1000318
    339+      //  will join all subsequent array nodes into one resulting string                                            1000319
    340+        Dcl-PR json_GetStrJoin Like(UTF8)                                                                           1000320
    341+                             extproc(*CWIDEN : 'nox_GetStrJoinVC');                                                 1000321
    342+          // Pointer to relative node                                                                               1000322
    343+          pNode          Pointer    value;                                                                          1000323
    344+          // Locations expression to node                                                                           1000324
    345+          Expression     Like(UTF8) const options(*nopass:*varsize);                                                1000325
    346+          // If not found - default value                                                                           1000326
    347+          Defaultvalue   Like(UTF8) const options(*nopass:*varsize);                                                1000327
  5770WDS V7R3M0  160422 RN        IBM ILE RPG             NOXDB2/EX01DEMO          DKSRV133   28-11-18 18:24:37        Page     11
 Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
 Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
    348+        End-PR;                                                                                                     1000328
    349+                                                                                                                    1000329
    350+      // Get number by expresion like:                                                                              1000330
    351+      //  /object/array#123¤/name                                                                                   1000331
    352+      //  .object.array#123¤.name                                                                                   1000332
    353+      // NL-OK                                                                                                      1000333
    354+        Dcl-PR json_GetNum Packed(30:15) extproc(*CWIDEN : 'nox_GetValueNumVC');                                    1000334
    355+          // Pointer to relative node                                                                               1000335
    356+          pNode          Pointer    value;                                                                          1000336
    357+          // Locations expression to node                                                                           1000337
    358+          Expression     Like(UTF8) const  options(*nopass:*varsize);                                               1000338
    359+          // If not found - default value                                                                           1000339
    360+          Defaultvalue   Packed(30:15) value options(*nopass);                                                      1000340
    361+        End-PR;                                                                                                     1000341
    362+                                                                                                                    1000342
    363+        Dcl-PR json_GetInt Int(20) extproc(*CWIDEN : 'nox_GetValueIntVC');                                          1000343
    364+          // Pointer to relative node                                                                               1000344
    365+          pNode          Pointer    value;                                                                          1000345
    366+          // Locations expression to node                                                                           1000346
    367+          Expression     Like(UTF8) const options(*nopass:*varsize);                                                1000347
    368+          // If not found - default value                                                                           1000348
    369+          Defaultvalue   Int(20)    value options(*nopass);                                                         1000349
    370+        End-PR;                                                                                                     1000350
    371+                                                                                                                    1000351
    372+        Dcl-PR json_GetDate date  extproc(*CWIDEN : 'nox_GetValueDateVC');                                          1000352
    373+          // Pointer to relative node                                                                               1000353
    374+          pNode          Pointer    value;                                                                          1000354
    375+          // Locations expression to node                                                                           1000355
    376+          Expression     Like(UTF8) const options(*nopass:*varsize);                                                1000356
    377+          // If not found - default value                                                                           1000357
    378+          Defaultvalue   date   value options(*nopass);                                                             1000358
    379+        End-PR;                                                                                                     1000359
    380+                                                                                                                    1000360
    381+        Dcl-PR json_CopyValue Pointer extproc(*CWIDEN : 'nox_CopyValueVC');                                         1000361
    382+          // destination node                                                                                       1000362
    383+          pDest          Pointer    value;                                                                          1000363
    384+          // destiantion name (or *NULL or '')                                                                      1000364
    385+          destName       Like(UTF8) const options(*varsize);                                                        1000365
    386+          // source node                                                                                            1000366
    387+          pSource        Pointer    value;                                                                          1000367
    388+          // source name (or *NULL or '')                                                                           1000368
    389+          sourceName     Like(UTF8) const options(*varsize);                                                        1000369
    390+        End-PR;                                                                                                     1000370
    391+                                                                                                                    1000371
  5770WDS V7R3M0  160422 RN        IBM ILE RPG             NOXDB2/EX01DEMO          DKSRV133   28-11-18 18:24:37        Page     12
 Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
 Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
    392+        Dcl-PR json_NodeClone Pointer extproc(*CWIDEN : 'nox_NodeClone');                                           1000372
    393+          // node. Retrive from Locate()                                                                            1000373
    394+          pSource        Pointer    value;                                                                          1000374
    395+        End-PR;                                                                                                     1000375
    396+                                                                                                                    1000376
    397+        // Delete and set ref pointer to zero:                                                                      1000377
    398+        Dcl-PR json_Delete extproc(*CWIDEN : 'nox_Delete');                                                         1000378
    399+          // element. Retrive from Locate()                                                                         1000379
    400+          pRootNode      Pointer;                                                                                   1000380
    401+        End-PR;                                                                                                     1000381
    402+                                                                                                                    1000382
    403+                                                                                                                    1000383
    404+        // Unlink the note from its previous and promote it as a new root node                                      1000384
    405+        Dcl-PR json_NodeUnlink Pointer extproc(*CWIDEN : 'nox_NodeUnlink');                                         1000385
    406+          // Targenode. Retrive from Locate(                                                                        1000386
    407+          pNode          Pointer    value;                                                                          1000387
    408+        End-PR;                                                                                                     1000388
    409+                                                                                                                    1000389
    410+        Dcl-PR json_NodeSanitize extproc(*CWIDEN : 'nox_NodeSanitize');                                             1000390
    411+          // node. Retrive from Locate()                                                                            1000391
    412+          pRootNode      Pointer    value;                                                                          1000392
    413+        End-PR;                                                                                                     1000393
    414+                                                                                                                    1000394
    415+        // CheckSum of all names and values                                                                         1000395
    416+        // Delete all nodes which value are null                                                                    1000396
    417+        Dcl-PR json_NodeCheckSum Uns(10) extproc(*CWIDEN : 'nox_NodeCheckSum');                                     1000397
    418+          pRootNode      Pointer    value; // node. Retrive from Locate()                                           1000398
    419+        End-PR;                                                                                                     1000399
    420+                                                                                                                    1000400
    421+        // returns the new node                                                                                     1000401
    422+        Dcl-PR json_NewObject Pointer extproc(*CWIDEN : 'nox_NewObject');                                           1000402
    423+        End-PR;                                                                                                     1000403
    424+                                                                                                                    1000404
    425+      // Array functions                                                                                            1000405
    426+        // returns the new node                                                                                     1000406
    427+        Dcl-PR json_NewArray Pointer extproc(*CWIDEN : 'nox_NewArray');                                             1000407
    428+        End-PR;                                                                                                     1000408
    429+                                                                                                                    1000409
    430+        // returns the new node added to the end of                                                                 1000410
    431+        Dcl-PR json_ArrayPush Pointer extproc(*CWIDEN : 'nox_ArrayPush');                                           1000411
    432+          // Destination. Retrive from Locate()                                                                     1000412
    433+          pDestArray     Pointer    value;                                                                          1000413
    434+          // source node to append                                                                                  1000414
    435+          pSourceNode    Pointer   value;                                                                           1000415
  5770WDS V7R3M0  160422 RN        IBM ILE RPG             NOXDB2/EX01DEMO          DKSRV133   28-11-18 18:24:37        Page     13
 Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
 Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
    436+          // 0=(Dft) Unlink and move, 1=copy a clone                                                                1000416
    437+          copy           Uns(5)     value options(*nopass);                                                         1000417
    438+        End-PR;                                                                                                     1000418
    439+                                                                                                                    1000419
    440+        // Following constants used by json_ArrayPush:copy                                                          1000420
    441+        Dcl-C json_MOVE_UNLINK const(0);                                                                            1000421
    442+        Dcl-C json_COPY_CLONE const(1);                                                                             1000422
    443+                                                                                                                    1000423
    444+        // returns the new node added to the end of                                                                 1000424
    445+        Dcl-PR json_ArrayAppend Pointer extproc(*CWIDEN :'nox_ArrayAppend');                                        1000425
    446+          // Destination. Retrive from Locate()                                                                     1000426
    447+          pDestArray     Pointer    value;                                                                          1000427
    448+          // source node to append                                                                                  1000428
    449+          pSourceNode    Pointer    value;                                                                          1000429
    450+          // 0=(Dft) Unlink and move, 1=copy a clone                                                                1000430
    451+          copy           Uns(5)     value options(*nopass);                                                         1000431
    452+        End-PR;                                                                                                     1000432
    453+                                                                                                                    1000433
    454+        // returns the new array fro source array                                                                   1000434
    455+        Dcl-PR json_ArraySlice Pointer extproc(*CWIDEN : 'nox_ArraySlice' );                                        1000435
    456+          // source node                                                                                            1000436
    457+          pSourceNode    Pointer    value;                                                                          1000437
    458+          // From entry ( 1=First)                                                                                  1000438
    459+          from           Int(10)    value;                                                                          1000439
    460+          // To and includ   (-1 = Until end)                                                                       1000440
    461+          to             Int(10)    value;                                                                          1000441
    462+          // 0=(Dft) Unlink and move, 1=copy a clone                                                                1000442
    463+          copy           Uns(5)     value options(*nopass);                                                         1000443
    464+        End-PR;                                                                                                     1000444
    465+                                                                                                                    1000445
    466+        // returns the new node added to the end of                                                                 1000446
    467+        Dcl-PR json_ArraySort Pointer extproc(*CWIDEN : 'nox_ArraySortVC');                                         1000447
    468+          // Destination. Retrive from Locate()                                                                     1000448
    469+          pArray         Pointer    value;                                                                          1000449
    470+          // nodenames if any in subobject to comapre                                                               1000450
    471+          pkeyNames      Like(UTF8) const ;                                                                         1000451
    472+          // 0=(Dft) use json numerics, 1=Use locale                                                                1000452
    473+          options        uns(5)     value options(*nopass);                                                         1000453
    474+        End-PR;                                                                                                     1000454
    475+                                                                                                                    1000455
    476+        Dcl-C json_USE_LOCALE const(1);                                                                             1000456
    477+                                                                                                                    1000457
    478+        // returns the first node with expr value                                                                   1000458
    479+        Dcl-PR json_LookupValue Pointer extproc(*CWIDEN : 'nox_lookupValueVC');                                     1000459
  5770WDS V7R3M0  160422 RN        IBM ILE RPG             NOXDB2/EX01DEMO          DKSRV133   28-11-18 18:24:37        Page     14
 Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
 Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
    480+          // Array/ obj to search                                                                                   1000460
    481+          pArray         Pointer    value;                                                                          1000461
    482+          // What to search for                                                                                     1000462
    483+          expr           Like(UTF8) const options(*varsize);                                                        1000463
    484+          // 0=(Dft) Same case, 1=ignore case                                                                       1000464
    485+          ignoreCase     Uns(5)     value options(*nopass);                                                         1000465
    486+        End-PR;                                                                                                     1000466
    487+                                                                                                                    1000467
    488+        // Following constants used by json_LookupValue:ignoreCase                                                  1000468
    489+        Dcl-C json_SAME_CASE const(0);                                                                              1000469
    490+        Dcl-C json_IGNORE_CASE const(1);                                                                            1000470
    491+                                                                                                                    1000471
    492+        // returns numer of element in array or obj                                                                 1000472
    493+        Dcl-PR json_GetLength Int(10) extproc(*CWIDEN : 'nox_getLength'  );                                         1000473
    494+          // Array to count length                                                                                  1000474
    495+          pArray         Pointer    value;                                                                          1000475
    496+        End-PR;                                                                                                     1000476
    497+                                                                                                                    1000477
    498+        // Following constants used by json_Merge:Type                                                              1000478
    499+        Dcl-C json_DONTREPLACE const(0);                                                                            1000479
    500+        Dcl-C json_REPLACE const(1);                                                                                1000480
    501+                                                                                                                    1000481
    502+        // returns the new node                                                                                     1000482
    503+        Dcl-PR json_MergeObjects Pointer extproc(*CWIDEN : 'nox_MergeObjects');                                     1000483
    504+          // Destination. Retrive from Locate()                                                                     1000484
    505+          pDestObj       Pointer    value;                                                                          1000485
    506+          // Source tree  Retrive from Locate()                                                                     1000486
    507+          pSourceObj     Pointer    value;                                                                          1000487
    508+          // json_DONTREPLACE or json_OBJREPLACE                                                                    1000488
    509+          Type           Uns(5)     value;                                                                          1000489
    510+        End-PR;                                                                                                     1000490
    511+                                                                                                                    1000491
    512+        // returns the source node                                                                                  1000492
    513+        Dcl-PR json_MoveObjectInto Pointer extproc(*CWIDEN : 'nox_NodeMoveIntoVC');                                 1000493
    514+          // Destination. Retrive from Locate()                                                                     1000494
    515+          pDestObj       Pointer    value;                                                                          1000495
    516+          Name           Like(UTF8) const options(*varsize);                                                        1000496
    517+          // Source tree  Retrive from Locate()                                                                     1000497
    518+          pSourceObj     Pointer    value;                                                                          1000498
    519+        End-PR;                                                                                                     1000499
    520+                                                                                                                    1000500
    521+        Dcl-PR json_Dump  extproc(*CWIDEN : 'nox_Dump');                                                            1000501
    522+          // Pointer to tree                                                                                        1000502
    523+          pNode          Pointer    value;                                                                          1000503
  5770WDS V7R3M0  160422 RN        IBM ILE RPG             NOXDB2/EX01DEMO          DKSRV133   28-11-18 18:24:37        Page     15
 Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
 Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
    524+        End-PR;                                                                                                     1000504
    525+                                                                                                                    1000505
    526+                                                                                                                    1000506
    527+        // **  JSON renderes ***                                                                                    1000507
    528+        Dcl-PR json_WriteJsonStmf  extproc(*CWIDEN : 'nox_WriteJsonStmf');                                          1000508
    529+          // node. Retrive from Locate()                                                                            1000509
    530+          pNode          Pointer    value;                                                                          1000510
    531+          // Name of output stream file                                                                             1000511
    532+          FileName       Pointer    value  options(*string);                                                        1000512
    533+          // Ccsid of output file                                                                                   1000513
    534+          Ccsid          Int(10)    value;                                                                          1000514
    535+          Trim           Ind        value;                                                                          1000515
    536+          // Extra options                                                                                          1000516
    537+          Options        Pointer    value  options(*nopass:*string);                                                1000517
    538+        End-PR;                                                                                                     1000518
    539+                                                                                                                    1000519
    540+        Dcl-PR json_AsJsonText Like(UTF8)                                                                           1000520
    541+                             extproc(*CWIDEN : 'nox_AsJsonText');                                                   1000521
    542+          // node. Retrive from Locate()                                                                            1000522
    543+          pNode          Pointer    value;                                                                          1000523
    544+        End-PR;                                                                                                     1000524
    545+                                                                                                                    1000525
    546+        Dcl-PR json_AsJsonTextMem Uns(10)                                                                           1000526
    547+                                extproc(*CWIDEN : 'nox_AsJsonTextMem');                                             1000527
    548+          // node. Retrive from Locate()                                                                            1000528
    549+          pNode          Pointer    value;                                                                          1000529
    550+          // pointer to any memory buffer                                                                           1000530
    551+          pBuffer        Pointer    value;                                                                          1000531
    552+          // Max number of bytes in buffer %size()                                                                  1000532
    553+          maxSize        Uns(10)    value options(*nopass);                                                         1000533
    554+        End-PR;                                                                                                     1000534
    555+                                                                                                                    1000535
    556+        // **  XML  renderes ***                                                                                    1000536
    557+        Dcl-PR json_WriteXmlStmf  extproc(*CWIDEN : 'nox_WriteXmlStmf');                                            1000537
    558+          // node. Retrive from Locate()                                                                            1000538
    559+          pNode          Pointer    value;                                                                          1000539
    560+          // Name of output stream file                                                                             1000540
    561+          FileName       Pointer    value  options(*string);                                                        1000541
    562+          // Ccsid of output file                                                                                   1000542
    563+          Ccsid          Int(10)    value;                                                                          1000543
    564+          Trim           Ind        value;                                                                          1000544
    565+          // Extra options                                                                                          1000545
    566+          Options        Pointer    value  options(*nopass:*string);                                                1000546
    567+        End-PR;                                                                                                     1000547
  5770WDS V7R3M0  160422 RN        IBM ILE RPG             NOXDB2/EX01DEMO          DKSRV133   28-11-18 18:24:37        Page     16
 Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
 Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
    568+                                                                                                                    1000548
    569+        Dcl-PR json_AsXmlText Like(UTF8) extproc(*CWIDEN : 'nox_AsXmlText');                                        1000549
    570+          // node. Retrive from Locate()                                                                            1000550
    571+          pNode          Pointer    value;                                                                          1000551
    572+        End-PR;                                                                                                     1000552
    573+                                                                                                                    1000553
    574+        Dcl-PR json_AsXmlTextMem Uns(10) extproc(*CWIDEN : 'nox_AsXmlTextMem');                                     1000554
    575+          // node. Retrive from Locate()                                                                            1000555
    576+          pNode          Pointer    value;                                                                          1000556
    577+          // pointer to any memory buffer                                                                           1000557
    578+          pBuffer        Pointer    value;                                                                          1000558
    579+        End-PR;                                                                                                     1000559
    580+                                                                                                                    1000560
    581+        // Return a streamer object to be used in own serialisers                                                   1000561
    582+        Dcl-PR json_Stream pointer extproc(*CWIDEN : 'nox_Stream');                                                 1000562
    583+          // node. Retrive from Locate()                                                                            1000563
    584+          pNode          Pointer    value;                                                                          1000564
    585+        End-PR;                                                                                                     1000565
    586+                                                                                                                    1000566
    587+        // **  CSV  renderes ***                                                                                    1000567
    588+        Dcl-PR json_WriteCsvStmf  extproc(*CWIDEN : 'nox_WriteCsvStmf');                                            1000568
    589+          // node. Retrive from Locate()                                                                            1000569
    590+          pNode          Pointer    value;                                                                          1000570
    591+          // Name of output stream file                                                                             1000571
    592+          FileName       Pointer    value  options(*string);                                                        1000572
    593+          // Ccsid of output file                                                                                   1000573
    594+          Ccsid          Int(10)    value;                                                                          1000574
    595+          // *ON=Remove inter blanks                                                                                1000575
    596+          Trim           Ind        value;                                                                          1000576
    597+          // Options: ';.' for separator and dec                                                                    1000577
    598+          Options        Pointer    value  options(*nopass:*string);                                                1000578
    599+        End-PR;                                                                                                     1000579
    600+                                                                                                                    1000580
    601+        // Iterators: First use the set the use forEach                                                             1000581
    602+        Dcl-DS json_Iterator  based(prototype_only) qualified;                                                      1000582
    603+          root           Pointer;                                                                                   1000583
    604+          this           Pointer;                                                                                   1000584
    605+          isList         Ind;                                                                                       1000585
    606+          isFirst        Ind;                                                                                       1000586
    607+          isLast         Ind;                                                                                       1000587
    608+          isRecursive    Ind;                                                                                       1000588
    609+          comma          Varchar(1);                                                                                1000589
    610+          count          Int(10);                                                                                   1000590
    611+          length         Int(10);                                                                                   1000591
  5770WDS V7R3M0  160422 RN        IBM ILE RPG             NOXDB2/EX01DEMO          DKSRV133   28-11-18 18:24:37        Page     17
 Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
 Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
    612+          size           Int(10);                                                                                   1000592
    613+          // Pointer to temp array of elms                                                                          1000593
    614+          listArr        Pointer;                                                                                   1000594
    615+          // Set  this to *ON to teminate loop                                                                      1000595
    616+          break          Ind;                                                                                       1000596
    617+          filler         Char(64);                                                                                  1000597
    618+        End-DS;                                                                                                     1000598
    619+                                                                                                                    1000599
    620+        Dcl-PR json_setIterator  likeds( json_Iterator)                                                             1000600
    621+                               extproc(*CWIDEN : 'nox_SetIteratorVC');                                              1000601
    622+          // node. Retrive from Locate()                                                                            1000602
    623+          pNode          Pointer    value;                                                                          1000603
    624+          // Optional - path to node                                                                                1000604
    625+          path           Like(UTF8) const options(*nopass:*varsize);                                                1000605
    626+        End-PR;                                                                                                     1000606
    627+                                                                                                                    1000607
    628+        Dcl-PR json_setRecursiveIterator  likeds( json_Iterator)                                                    1000608
    629+                                        extproc(*CWIDEN :                                                           1000609
    630+                                        'nox_SetRecursiveIteratorVC');                                              1000610
    631+          // node. Retrive from Locate()                                                                            1000611
    632+          pNode          Pointer    value;                                                                          1000612
    633+          // Optional - path to node                                                                                1000613
    634+          path           Like(UTF8) const options(*nopass:*varsize);                                                1000614
    635+        End-PR;                                                                                                     1000615
    636+                                                                                                                    1000616
    637+        // Iterator Structure                                                                                       1000617
    638+        Dcl-PR json_forEach Ind extproc(*CWIDEN : 'nox_ForEach');                                                   1000618
    639+          iterator                  likeds( json_Iterator);                                                         1000619
    640+        End-PR;                                                                                                     1000620
    641+                                                                                                                    1000621
    642+        // For attributes ( Used mostly in XML )                                                                    1000622
    643+        Dcl-PR json_GetNodeAttrValue Like(UTF8)                                                                     1000623
    644+                                   extproc(*CWIDEN : 'nox_GetNodeAttrValueVC');                                     1000624
    645+          // Pointer to exsiting element                                                                            1000625
    646+          pNode          Pointer    value;                                                                          1000626
    647+          // Attribute Name                                                                                         1000627
    648+          AttrName       Like(UTF8) const options(*varsize);                                                        1000628
    649+          // If not found - default value                                                                           1000629
    650+          Defaultvalue   Like(UTF8) const options(*nopass:*varsize);                                                1000630
    651+        End-PR;                                                                                                     1000631
    652+                                                                                                                    1000632
    653+        Dcl-PR json_SetNodeAttrValue extproc(*CWIDEN : 'nox_SetNodeAttrValueVC');                                   1000633
    654+          // Pointer to exsiting element                                                                            1000634
    655+          pNode          Pointer    value;                                                                          1000635
  5770WDS V7R3M0  160422 RN        IBM ILE RPG             NOXDB2/EX01DEMO          DKSRV133   28-11-18 18:24:37        Page     18
 Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
 Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
    656+          // Attribute name                                                                                         1000636
    657+          AttrName       Like(UTF8) const options(*varsize);                                                        1000637
    658+          // New value                                                                                              1000638
    659+          Value          Like(UTF8) const options(*varsize);                                                        1000639
    660+        End-PR;                                                                                                     1000640
    661+                                                                                                                    1000641
    662+        Dcl-PR json_GetAttrValue Like(UTF8)                                                                         1000642
    663+                               extproc(*CWIDEN : 'nox_GetAttrValueVC');                                             1000643
    664+          // Pointer Attribute                                                                                      1000644
    665+          pAttr          Pointer    value;                                                                          1000645
    666+          // If not found - default value                                                                           1000646
    667+          Defaultvalue   Like(UTF8) const options(*nopass:*varsize);                                                1000647
    668+        End-PR;                                                                                                     1000648
    669+                                                                                                                    1000649
    670+        Dcl-PR json_SetAttrValue extproc(*CWIDEN : 'nox_SetAttrValue');                                             1000650
    671+          // Pointer Attribute                                                                                      1000651
    672+          pAttr          Pointer    value;                                                                          1000652
    673+          // New value                                                                                              1000653
    674+          AttrName       Like(UTF8) const options(*varsize);                                                        1000654
    675+          // Default value                                                                                          1000655
    676+          Value          Like(UTF8) const options(*varsize);                                                        1000656
    677+        End-PR;                                                                                                     1000657
    678+                                                                                                                    1000658
    679+        // Returns pointer to attribute list                                                                        1000659
    680+        Dcl-PR json_GetAttrFirst Pointer extproc(*CWIDEN : 'nox_GetAttrFirst');                                     1000660
    681+          // Pointer to element                                                                                     1000661
    682+          pElem          Pointer    value;                                                                          1000662
    683+        End-PR;                                                                                                     1000663
    684+                                                                                                                    1000664
    685+        // Returns pointer to attribute list                                                                        1000665
    686+        Dcl-PR json_GetAttrNext Pointer extproc(*CWIDEN : 'nox_GetAttrNext');                                       1000666
    687+          // Pointer to attribute list                                                                              1000667
    688+          pAttr          Pointer    value;                                                                          1000668
    689+        End-PR;                                                                                                     1000669
    690+                                                                                                                    1000670
    691+        Dcl-PR json_GetAttrName Like(UTF8)                                                                          1000671
    692+                              extproc(*CWIDEN : 'nox_GetAttrNameVC');                                               1000672
    693+          // Pointer to attribute list                                                                              1000673
    694+          pAttr          Pointer    value;                                                                          1000674
    695+        End-PR;                                                                                                     1000675
    696+                                                                                                                    1000676
    697+      // Clear the contents of an array or object / delete all children                                             1000677
    698+        Dcl-PR json_Clear  extproc(*CWIDEN : 'nox_Clear');                                                          1000678
    699+          pNode          Pointer    value; // Pointer to tree node                                                  1000679
  5770WDS V7R3M0  160422 RN        IBM ILE RPG             NOXDB2/EX01DEMO          DKSRV133   28-11-18 18:24:37        Page     19
 Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
 Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
    700+        End-PR;                                                                                                     1000680
    701+                                                                                                                    1000681
    702+      // Close all nodes in this tree - also parent and siblings                                                    1000682
    703+        Dcl-PR json_Close  extproc(*CWIDEN : 'nox_Close');                                                          1000683
    704+          // Pointer to tree node                                                                                   1000684
    705+          pNode          Pointer  ;                                                                                 1000685
    706+        End-PR;                                                                                                     1000686
    707+      // Detect if you have a memry leak: call this when you have closed everything at i will return                1000687
  ...    false
    708+        Dcl-PR json_MemLeak Ind extproc(*CWIDEN : 'nox_MemLeak');                                                   1000688
    709+        End-PR;                                                                                                     1000689
    710+                                                                                                                    1000690
    711+      // Print memory report                                                                                        1000691
    712+        Dcl-PR json_MemStat  extproc(*CWIDEN : 'nox_MemStat');                                                      1000692
    713+        End-PR;                                                                                                     1000693
    714+                                                                                                                    1000694
    715+      // retune number of bytest used                                                                               1000695
    716+        Dcl-PR json_MemUse Uns(20) extproc(*CWIDEN : 'nox_MemUse');                                                 1000696
    717+        End-PR;                                                                                                     1000697
    718+                                                                                                                    1000698
    719+      // Return a memory segment pointer, and build a scope where JSON/XML will be created                          1000699
    720+        Dcl-PR json_SegmentSelectNo Pointer                                                                         1000700
    721+                                  extproc(*CWIDEN : 'nox_SegmentSelectNo');                                         1000701
    722+          SegmentIndex   Int(10)    value;                                                                          1000702
    723+        End-PR;                                                                                                     1000703
    724+                                                                                                                    1000704
    725+      //  Delete the segment and all JSON/XML nodes build while segment scope was active                            1000705
    726+        Dcl-PR json_SegmentDispose  extproc(*CWIDEN : 'nox_SegmentDispose');                                        1000706
    727+          segmentPtr     Pointer    value;                                                                          1000707
    728+        End-PR;                                                                                                     1000708
    729+                                                                                                                    1000709
    730+      // Maintain at list of index numbers to database CLOB/BLOB fields since pointers can not be sh                1000710
  ...   ared in SQL
    731+        // Returns *ON if found                                                                                     1000711
    732+        Dcl-PR json_mapIx Ind extproc(*CWIDEN:'nox_MapIx' );                                                        1000712
    733+          // pointer to node pointer                                                                                1000713
    734+          ppNode         Pointer;                                                                                   1000714
    735+          // index of pointer                                                                                       1000715
    736+          Index          Uns(10)    value;                                                                          1000716
    737+        End-PR;                                                                                                     1000717
    738+                                                                                                                    1000718
    739+        // ------------------------------------------------------------------------                                 1000719
    740+        // SQL interface:                                                                                           1000720
    741+        // Note: When SQL functions returns *NULL, then use  the json_Message() to re                               1000721
  5770WDS V7R3M0  160422 RN        IBM ILE RPG             NOXDB2/EX01DEMO          DKSRV133   28-11-18 18:24:37        Page     20
 Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
 Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
    742+        // ------------------------------------------------------------------------                                 1000722
    743+                                                                                                                    1000723
    744+      // If options need - then it has to be first call made.                                                       1000724
    745+      // NOTE: If a pConnection pointer is provided, it will be updated with the conection                          1000725
    746+        Dcl-PR json_sqlSetOptions  extproc(*CWIDEN: 'nox_sqlSetOptions');                                           1000726
    747+          // json object with options ( see sample)                                                                 1000727
    748+          parms          Like(UTF8) const options(*nopass:*varsize);                                                1000728
    749+        End-PR;                                                                                                     1000729
    750+                                                                                                                    1000730
    751+      // returns a object node with one resulting row for the SQL statment                                          1000731
    752+        // Returns one SQL row as jx Obejct                                                                         1000732
    753+        Dcl-PR json_sqlResultRow Pointer extproc(*CWIDEN: 'nox_sqlResultRowVC');                                    1000733
    754+          // SQL statement to run                                                                                   1000734
    755+          sqlStmt        Like(UTF8) const options(*varsize);                                                        1000735
    756+          // json object template                                                                                   1000736
    757+          parms          Like(UTF8) const options(*nopass:*varsize);                                                1000737
    758+          // Starttin row                                                                                           1000738
    759+          start          int(10)    value options(*nopass);                                                         1000739
    760+        End-PR;                                                                                                     1000740
    761+                                                                                                                    1000741
    762+      // returns an array (or object with array) of resulting rows for the SQL statment                             1000742
    763+        // Returns SQL rows as jx Obejct                                                                            1000743
    764+        Dcl-PR json_sqlResultSet Pointer extproc(*CWIDEN: 'nox_sqlResultSetVC');                                    1000744
    765+          // SQL statement to run                                                                                   1000745
    766+          sqlStmt        Like(UTF8) const options(*varsize);                                                        1000746
    767+          // From row; 1=First                                                                                      1000747
    768+          start          Int(10)    value options(*nopass);                                                         1000748
    769+          // max number of rows; json_ALLROWS=all                                                                   1000749
    770+          limit          Int(10)    value options(*nopass);                                                         1000750
    771+          // resultset format:                                                                                      1000751
    772+          format         Int(10)    value options(*nopass);                                                         1000752
    773+          // json object template                                                                                   1000753
    774+          parms          Like(UTF8) const options(*nopass:*varsize);                                                1000754
    775+        End-PR;                                                                                                     1000755
    776+                                                                                                                    1000756
    777+                                                                                                                    1000757
    778+        Dcl-C json_ALLROWS const(-1);                                                                               1000758
    779+                                                                                                                    1000759
    780+        // Following constants used by json_sqlResultSet:format                                                     1000760
    781+        // + An array with each row as an object                                                                    1000761
    782+        Dcl-C json_ROWARRAY const(0);                                                                               1000762
    783+        // + Metaobject: rows, fields                                                                               1000763
    784+        Dcl-C json_META    const(1);                                                                                1000764
    785+        // + Columns info                                                                                           1000765
  5770WDS V7R3M0  160422 RN        IBM ILE RPG             NOXDB2/EX01DEMO          DKSRV133   28-11-18 18:24:37        Page     21
 Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
 Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
    786+        Dcl-C json_FIELDS  const(2);                                                                                1000766
    787+        // + Count all rows in the resultset                                                                        1000767
    788+        // ( Pricy so awoid it !! )                                                                                 1000768
    789+        Dcl-C json_TOTALROWS const(4);                                                                              1000769
    790+        // + Uppercase column names                                                                                 1000770
    791+        Dcl-C json_UPPERCASE const(8);                                                                              1000771
    792+                                                                                                                    1000772
    793+        // + Appoximate number of rows..                                                                            1000773
    794+        //  ( unpresise but cheap !! prefered  )                                                                    1000774
    795+        Dcl-C json_APPROXIMATE_TOTALROWS const(16);                                                                 1000775
    796+                                                                                                                    1000776
    797+                                                                                                                    1000777
    798+                                                                                                                    1000778
    799+      // SQL cursor processing                                                                                      1000779
    800+        // Returns handle to sql statement                                                                          1000780
    801+        Dcl-PR json_sqlOpen Pointer extproc(*CWIDEN:'nox_sqlOpenVC'  );                                             1000781
    802+          // SQL statement to run                                                                                   1000782
    803+          sqlStmt        Like(UTF8) const options(*varsize);                                                        1000783
    804+          // json object template                                                                                   1000784
    805+          parms          pointer value options(*nopass:*string);                                                    1000785
    806+        End-PR;                                                                                                     1000786
    807+                                                                                                                    1000787
    808+      // Fetch next from from that open sql handle, starting from rowNumer. 1=First row                             1000788
    809+        // Returns a row object (or *NULL if EOF)                                                                   1000789
    810+        Dcl-PR json_sqlFetchRelative Pointer                                                                        1000790
    811+                                   extproc(*CWIDEN: 'nox_sqlFetchRelative');                                        1000791
    812+          // sql statement handle ( from sqlOpen)                                                                   1000792
    813+          pSqlHndl       Pointer    value;                                                                          1000793
    814+          // row from where to start 1=First                                                                        1000794
    815+          fromRow        Int(10)    value;                                                                          1000795
    816+        End-PR;                                                                                                     1000796
    817+                                                                                                                    1000797
    818+      // Fetch next from from that open sql handle                                                                  1000798
    819+        // Returns a row object (or *NULL if EOF)                                                                   1000799
    820+        Dcl-PR json_sqlFetchNext Pointer extproc(*CWIDEN:'nox_sqlFetchNext');                                       1000800
    821+          // sql statement handle ( from sqlOpen)                                                                   1000801
    822+          pSqlHndl       Pointer    value;                                                                          1000802
    823+        End-PR;                                                                                                     1000803
    824+                                                                                                                    1000804
    825+      // Number of columns in result set ( -1 if error)                                                             1000805
    826+        // Returns number of columns                                                                                1000806
    827+        Dcl-PR json_sqlColumns Int(10) extproc(*CWIDEN:'nox_sqlColumns');                                           1000807
    828+          // sql statement handle ( from sqlOpen)                                                                   1000808
    829+          pSqlHndl       Pointer    value;                                                                          1000809
  5770WDS V7R3M0  160422 RN        IBM ILE RPG             NOXDB2/EX01DEMO          DKSRV133   28-11-18 18:24:37        Page     22
 Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
 Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
    830+        End-PR;                                                                                                     1000810
    831+                                                                                                                    1000811
    832+      // Number of rows  in result set ( -1 if error)                                                               1000812
    833+      // Note: This will run a hidden "select count(*)" which might be a little pricy                               1000813
    834+        // Returns number of rows                                                                                   1000814
    835+        Dcl-PR json_sqlRows Int(10) extproc(*CWIDEN:'nox_sqlRows');                                                 1000815
    836+          // sql statement handle ( from sqlOpen)                                                                   1000816
    837+          pSqlHndl       Pointer    value;                                                                          1000817
    838+        End-PR;                                                                                                     1000818
    839+                                                                                                                    1000819
    840+      // Always colse the cursor after use, to release resources                                                    1000820
    841+        Dcl-PR json_sqlClose  extproc(*CWIDEN:'nox_sqlClose');                                                      1000821
    842+          // sql statement handle ( from sqlOpen)                                                                   1000822
    843+          pSqlHndl       Pointer;                                                                                   1000823
    844+        End-PR;                                                                                                     1000824
    845+                                                                                                                    1000825
    846+      // Execute any SQL statement not involving a cursor                                                           1000826
    847+        // Returns *ON if error                                                                                     1000827
    848+        Dcl-PR json_sqlExec Ind extproc(*CWIDEN:'nox_sqlExecVC'  );                                                 1000828
    849+          // SQL statement to run (template)                                                                        1000829
    850+          sqlStmt        Like(UTF8) const options(*varsize);                                                        1000830
    851+          // json object template data                                                                              1000831
    852+          parms          Like(UTF8) const options(*nopass:*varsize);                                                1000832
    853+        End-PR;                                                                                                     1000833
    854+                                                                                                                    1000834
    855+      // Execute an update table where the row is defined as a json object                                          1000835
    856+        // Returns *ON if error                                                                                     1000836
    857+        Dcl-PR json_sqlUpdate Ind extproc(*CWIDEN:'nox_sqlUpdateVC');                                               1000837
    858+          // table name                                                                                             1000838
    859+          table          Like(UTF8) const options(*varsize);                                                        1000839
    860+          // json object: æa:123,b:"value"å                                                                         1000840
    861+          row            pointer value;                                                                             1000841
    862+          // where clause : 'where myKey=Åkey'                                                                      1000842
    863+          where          Like(UTF8) const options(*nopass:*varsize);                                                1000843
    864+          // where parameters: æ key:777å                                                                           1000844
    865+          whereParms     pointer value;                                                                             1000845
 ======>          aaaaaaaaaa
 *RNF3756 20 a      000845+ OPTIONS(*NOPASS) is missing for a parameter following an      ./headers/JSONPARSER.rpgle
                            optional parameter.
    866+        End-PR;                                                                                                     1000846
    867+                                                                                                                    1000847
    868+        // Returns *ON if error                                                                                     1000848
    869+        Dcl-PR json_sqlInsert Ind extproc(*CWIDEN:'nox_sqlInsertVC');                                               1000849
    870+          // table name                                                                                             1000850
  5770WDS V7R3M0  160422 RN        IBM ILE RPG             NOXDB2/EX01DEMO          DKSRV133   28-11-18 18:24:37        Page     23
 Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
 Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
    871+          table          Like(UTF8) const options(*varsize);                                                        1000851
    872+          // json object: æa:123,b:"value"å                                                                         1000852
    873+          row            pointer value;                                                                             1000853
    874+          // extra parms                                                                                            1000854
    875+          parms          Like(UTF8) const options(*nopass:*varsize);                                                1000855
    876+        End-PR;                                                                                                     1000856
    877+                                                                                                                    1000857
    878+        // Returns *ON if error                                                                                     1000858
    879+        Dcl-PR json_sqlUpsert Ind extproc(*CWIDEN:'nox_sqlUpsertVC');                                               1000859
    880+          // table name                                                                                             1000860
    881+          table          Like(UTF8) const options(*varsize);                                                        1000861
    882+          // json object: æa:123,b:"value"å                                                                         1000862
    883+          row            pointer value;                                                                             1000863
    884+          // where clause : 'where myKey=Åkey'                                                                      1000864
    885+          where          Like(UTF8) const options(*nopass:*varsize);                                                1000865
    886+          // where parameters: æ key:777å                                                                           1000866
    887+          whereParms     pointer value;                                                                             1000867
 ======>          aaaaaaaaaa
 *RNF3756 20 a      000867+ OPTIONS(*NOPASS) is missing for a parameter following an      ./headers/JSONPARSER.rpgle
                            optional parameter.
    888+        End-PR;                                                                                                     1000868
    889+                                                                                                                    1000869
    890+        // Returns id of last insert                                                                                1000870
    891+        Dcl-PR json_sqlGetInsertId Int(10) extproc(*CWIDEN:'nox_sqlGetInsertId');                                   1000871
    892+        End-PR;                                                                                                     1000872
    893+                                                                                                                    1000873
    894+        // Returns array of column info                                                                             1000874
    895+        Dcl-PR json_sqlGetMeta Pointer extproc(*CWIDEN:'nox_sqlGetMetaVC');                                         1000875
    896+          sqlstmt        Like(UTF8) const options(*varsize);                                                        1000876
    897+        End-PR;                                                                                                     1000877
    898+                                                                                                                    1000878
    899+      // Return pointer to database connection. No options => will be default local database                        1000879
    900+        Dcl-PR json_sqlConnect Pointer extproc(*CWIDEN: 'nox_sqlConnect');                                          1000880
    901+          // json object or string with options                                                                     1000881
    902+          parms          Like(UTF8) const options(*nopass:*varsize);                                                1000882
    903+        End-PR;                                                                                                     1000883
    904+                                                                                                                    1000884
    905+      // Return pointer to database connection. No options => will be default local database                        1000885
    906+        Dcl-PR json_sqlDisconnect  extproc(*CWIDEN: 'nox_sqlDisconnect');                                           1000886
    907+        End-PR;                                                                                                     1000887
    908+                                                                                                                    1000888
    909+      // Return sql code for previous statement                                                                     1000889
    910+        Dcl-PR json_sqlCode Int(10) extproc(*CWIDEN: 'nox_sqlCode');                                                1000890
    911+        End-PR;                                                                                                     1000891
  5770WDS V7R3M0  160422 RN        IBM ILE RPG             NOXDB2/EX01DEMO          DKSRV133   28-11-18 18:24:37        Page     24
 Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
 Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
    912+                                                                                                                    1000892
    913+      // Returns a JSON object from a REST call                                                                     1000893
    914+        Dcl-PR json_httpRequest Pointer extproc(*CWIDEN:'nox_httpRequest');                                         1000894
    915+          // Full URL to the resource                                                                               1000895
    916+          url            Like(UTF8) const options(*varsize);                                                        1000896
    917+          // json object or string                                                                                  1000897
    918+          pReqNode       pointer value;                                                                             1000898
    919+          // extra CURL options                                                                                     1000899
    920+          options        Like(UTF8) const options(*nopass:*varsize);                                                1000900
    921+        End-PR;                                                                                                     1000901
    922+                                                                                                                    1000902
    923+      // when the dataarea SQLTRACE is set, your SQL statements                                                     1000903
    924+      // are logged into SQLTRACE table.                                                                            1000904
    925+      // you can supply an exta eye-catch wariable :trcid                                                           1000905
    926+        Dcl-PR json_traceSetId  extproc(*CWIDEN : 'nox_traceSetId');                                                1000906
    927+          traceId        Int(20)    value; // Ccsid of inpur file                                                   1000907
    928+        End-PR;                                                                                                     1000908
    929+                                                                                                                    1000909
    930+                                                                                                                    1000910
    931+                                                                                                                    1000911
    932+                                                                                                                    1000912
    933+                                                                                                                    1000913
    934+                                                                                                                    1000914
    935+                                                                                                                    1000915
    936                                                                                                                      000022
    937         dcl-s id           int(10);                                                                                  000023
    938         dcl-s name         varchar(256);                                                                             000024
    939         dcl-s street       varchar(256);                                                                             000025
    940         dcl-s city         varchar(256);                                                                             000026
    941         dcl-s creditLimit  packed(15:2);                                                                             000027
    942         dcl-s created      date;                                                                                     000028
    943                                                                                                                      000029
    944         dcl-s msg          varchar(256);                                                                             000030
    945         dcl-s len          int(10);                                                                                  000031
    946         dcl-s checksum     int(10);                                                                                  000032
    947         dcl-s memuse       int(10);                                                                                  000033
    948         dcl-s pCustObject  pointer;                                                                                  000034
    949         dcl-s pCustomer    pointer;                                                                                  000035
    950         dcl-s pCustList    pointer;                                                                                  000036
    951         dcl-s pMoreCust    pointer;                                                                                  000037
    952         dcl-s pTopFive     pointer;                                                                                  000038
    953         dcl-s pRes         pointer;                                                                                  000039
    954                                                                                                                      000040
    955         dcl-DS itList  likeds(json_iterator);                                                                        000041
  5770WDS V7R3M0  160422 RN        IBM ILE RPG             NOXDB2/EX01DEMO          DKSRV133   28-11-18 18:24:37        Page     25
 Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
 Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
    956         //end-DS;                                                                                                    000042
    957                                                                                                                      000043
    958         //------------------------------------------------------------- *                                            000044
    959                                                                                                                      000045
    960         *inlr = *on;                                                                                                 000046
    961         memuse = json_memUse();                                                                                      000047
    962                                                                                                                      000048
    963         // Step 1: Lets build a JSON object from scratch                                                             000049
    964         // and let set some attirbutes on the object.                                                                000050
    965         // we use integers, string , fixed float numbers and date                                                    000051
    966         pCustomer = json_newObject();                                                                                000052
    967         json_setInt (pCustomer:'id'         : 1234);                                                                 000053
    968         json_setStr (pCustomer:'name'       : 'System & Metod A/S');                                                 000054
    969         json_setStr (pCustomer:'street'     : 'H}ndv{rkersvinget 8');                                                000055
    970         json_setStr (pCustomer:'city'       : 'H¦rsholm');                                                           000056
    971         json_setNum (pCustomer:'creditLimit': 6543.21);                                                              000057
    972         json_setDate(pCustomer:'created'    : %date());                                                              000058
    973                                                                                                                      000059
    974         // Step 2: Build an array with customers                                                                     000060
    975         // note the arrayPush can push it to either head or tail                                                     000061
    976         pCustList = json_newArray();                                                                                 000062
    977         json_arrayPush ( pCustList : pCustomer);                                                                     000063
    978                                                                                                                      000064
    979         // step3: now we get the rest og customer from the database;                                                 000065
    980         pMoreCust = json_sqlResultset('   -                                                                          000066
    981             select                        -                                                                          000067
    982                 cusnum  as "id",          -                                                                          000068
    983                 lstnam  as "name",        -                                                                          000069
    984                 street  as "street",      -                                                                          000070
    985                 cdtlmt  as "creditLimit"  -                                                                          000071
    986             from qiws.QCUSTCDT            -                                                                          000072
    987         ');                                                                                                          000073
    988                                                                                                                      000074
    989         // now we have the list                                                                                      000075
    990         // Not the MOVE_UNLINK can be used if the array was already                                                  000076
    991         // a sub-node in an other object/array. here it just an example and have no effect                           000077
    992         // Also you can omit the result - but returns the receiving array sou you can "chain" this f                 000078
  ...   unction
    993         // ie "moveObjectInto"                                                                                       000079
    994         pRes  = json_arrayAppend(pCustList : pMoreCust: JSON_MOVE_UNLINK);                                           000080
    995                                                                                                                      000081
    996         // How many are there in the array?                                                                          000082
  5770WDS V7R3M0  160422 RN        IBM ILE RPG             NOXDB2/EX01DEMO          DKSRV133   28-11-18 18:24:37        Page     26
 Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
 Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
    997         len  = json_getLength(pCustList);                                                                            000083
    998                                                                                                                      000084
    999         // Lets sort the array on the name and creditLimit                                                           000085
   1000         json_arraySort(pCustList : 'name:ASC,creditLimit:DESC' );                                                    000086
   1001                                                                                                                      000087
   1002         // I only want the first 5                                                                                   000088
   1003         // Note the first element is = 0                                                                             000089
   1004         // You can also use JSON_MOVE_UNLINK, to extract the result out of the source                                000090
   1005         // however, here we copy the elements to a new array                                                         000091
   1006         pTopFive = json_arraySlice(pCustList : 0:5 : JSON_COPY_CLONE);                                               000092
   1007                                                                                                                      000093
   1008         // we can caluculate the checksum, to see later if anyone have touched the object graph                      000094
   1009         checksum = json_NodeCheckSum(pTopFive);                                                                      000095
   1010                                                                                                                      000096
   1011         // and save it to disk:                                                                                      000097
   1012         json_WriteJsonStmf(pTopFive : './test/documents/ex01Tutorial.json' : 1208 : *OFF);                           000098
   1013                                                                                                                      000099
   1014         // Now what do we need to clean up:                                                                          000100
   1015         // pCustList? yes                                                                                            000101
   1016         // pCustomer? no - it is already removed when deleting the pCustList                                         000102
   1017         // pTopFive? Yes - it is a clone                                                                             000103
   1018         json_delete(pCustList);                                                                                      000104
   1019         json_delete(pTopFive);                                                                                       000105
   1020                                                                                                                      000106
   1021         // We could stop the program here - But let's have som more fun:                                             000107
   1022         // Load the top five array                                                                                   000108
   1023         pTopFive = json_ParseFile ('./test/documents/ex01Tutorial.json');                                            000109
   1024                                                                                                                      000110
   1025         // Was there som issues?                                                                                     000111
   1026         if Json_Error(pTopFive) ;                                                                    B01             000112
   1027             msg = Json_Message(pTopFive);                                                             01             000113
   1028             Json_dump(pTopFive);                                                                      01             000114
   1029             Json_delete(pTopFive);                                                                    01             000115
   1030             return;                                                                                   01             000116
   1031         endif;                                                                                       E01             000117
   1032                                                                                                                      000118
   1033         // Is the checksum the same?                                                                                 000119
   1034         if checksum <> json_NodeCheckSum(pTopFive);                                                  B01             000120
   1035             dsply 'Invlaid checksum';                                                                 01             000121
   1036         endif;                                                                                       E01             000122
   1037                                                                                                                      000123
   1038         // now create a object with that array and call it "topFive":                                                000124
   1039         pCustObject = json_newObject();                                                                              000125
   1040         json_moveObjectInto (pCustObject: 'topFive': pTopFive );                                                     000126
  5770WDS V7R3M0  160422 RN        IBM ILE RPG             NOXDB2/EX01DEMO          DKSRV133   28-11-18 18:24:37        Page     27
 Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
 Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
   1041                                                                                                                      000127
   1042         // let's loop through all items and get them back to RPG variables:                                          000128
   1043         // note: we could have used pTopFive - but for fun we locate from the top                                    000129
   1044         itList = json_setIterator(pCustObject : 'topFive');                                                          000130
   1045         dow json_ForEach(itList);                                                                    B01             000131
   1046             id          = json_getInt ( itList.this : 'id');                                          01             000132
   1047             name        = json_getStr ( itList.this : 'name');                                        01             000133
   1048             street      = json_getStr ( itList.this : 'street');                                      01             000134
   1049             city        = json_getStr ( itList.this : 'city');                                        01             000135
   1050             creditLimit = json_getNum ( itList.this : 'creditLimit');                                 01             000136
   1051             created     = json_getDate( itList.this : 'created');                                     01             000137
   1052         enddo;                                                                                       E01             000138
   1053                                                                                                                      000139
   1054                                                                                                                      000140
   1055         // Locate the first node with id = 1234.                                                                     000141
   1056         // the indexfor the array can be the indexnumber OR a simple element test (=,>,<,<=,>= are s                 000142
  ...   upported)
   1057         pCustomer   = Json_Locate(pCustObject: 'topFive#id=1234¤');                                                  000143
   1058         id          = json_getInt ( pCustObject : 'id');                                                             000144
   1059         name        = json_getStr ( pCustObject : 'name');                                                           000145
   1060         street      = json_getStr ( pCustObject : 'street');                                                         000146
   1061         city        = json_getStr ( pCustObject : 'city');                                                           000147
   1062         creditLimit = json_getNum ( pCustObject : 'creditLimit');                                                    000148
   1063         created     = json_getDate( pCustObject : 'created');                                                        000149
   1064                                                                                                                      000150
   1065         // That's it - time to cleanup:                                                                              000151
   1066         json_delete(pCustomer);                                                                                      000152
   1067                                                                                                                      000153
   1068         if memuse <> json_memuse();                                                                  B01             000154
   1069             dsply 'Ups - forgot to clean something up';                                               01             000155
   1070         endif;                                                                                       E01             000156
   1071                                                                                                                      000157
   1072                                                                                                                      000158
   1073         Return;                                                                                                      000159
        * * * * *   E N D   O F   S O U R C E   * * * * *
  5770WDS V7R3M0  160422 RN        IBM ILE RPG             NOXDB2/EX01DEMO          DKSRV133   28-11-18 18:24:37        Page     28
           A d d i t i o n a l   D i a g n o s t i c   M e s s a g e s
  Msg id  Sv Number Seq     Message text
 *RNF5409 00    967 000053  The prototyped call returns a value which is lost when
                            CALLP is used.
 *RNF5409 00    968 000054  The prototyped call returns a value which is lost when
                            CALLP is used.
 *RNF5409 00    969 000055  The prototyped call returns a value which is lost when
                            CALLP is used.
 *RNF5409 00    970 000056  The prototyped call returns a value which is lost when
                            CALLP is used.
 *RNF5409 00    971 000057  The prototyped call returns a value which is lost when
                            CALLP is used.
 *RNF5409 00    972 000058  The prototyped call returns a value which is lost when
                            CALLP is used.
 *RNF5409 00    977 000063  The prototyped call returns a value which is lost when
                            CALLP is used.
 *RNF5409 00   1000 000086  The prototyped call returns a value which is lost when
                            CALLP is used.
 *RNF5409 00   1040 000126  The prototyped call returns a value which is lost when
                            CALLP is used.
  * * * * *   E N D   O F   A D D I T I O N A L   D I A G N O S T I C   M E S S A G E S   * * * * *
                             / C o p y   M e m b e r s
 Line   Src  RPG name   <-------- External name -------> CCSID  <- Last change ->
 Number Id              Library    File       Member            Date     Time
     21    1 JSONPARSE+ ./headers/JSONPARSER.rpgle        1208  28-11-18 18:14:56
          * * * * *   E N D   O F   / C O P Y   M E M B E R S   * * * * *
  5770WDS V7R3M0  160422 RN        IBM ILE RPG             NOXDB2/EX01DEMO          DKSRV133   28-11-18 18:24:37        Page     29
                           C r o s s   R e f e r e n c e
       File and Record References:
          File              Device             References (D=Defined)
            Record
          No references in the source.
       Global Field References:
          Field             Attributes         References (D=Defined M=Modified)
          *INLR             N(1)                  960M
          CHECKSUM          I(10,0)               946D   1009M   1034
          CITY              A(256)                940D   1049M   1061M
                            VARYING(2)
          CREATED           D(10*ISO-)            942D   1051M   1063M
          CREDITLIMIT       P(15,2)               941D   1050M   1062M
          ID                I(10,0)               937D   1046M   1058M
          ITLIST            DS(145)               955D   1044M   1045    1046
                                                 1047    1048    1049    1050
                                                 1051
            THIS            *(16)                1046    1047    1048    1049
                                                 1050    1051
 *RNF7031 JSON_ALLOW_PRIMITIVES...
                            CONST                  64D
 *RNF7031 JSON_ALLROWS      CONST                 778D
 *RNF7031 JSON_APPROXIMATE_TOTALROWS...
                            CONST                 795D
 *RNF7031 JSON_ARRAY        CONST                  47D
          JSON_ARRAYAPPEND  *(16)                 445D    994
                            PROTOTYPE
          JSON_ARRAYPUSH    *(16)                 431D    977M
                            PROTOTYPE
          JSON_ARRAYSLICE   *(16)                 455D   1006
                            PROTOTYPE
          JSON_ARRAYSORT    *(16)                 467D   1000M
                            PROTOTYPE
 *RNF7031 JSON_ASJSONTEXT   A(1048572)            540D
                            VARYING(4)
                            CCSID(1208)
                            PROTOTYPE
 *RNF7031 JSON_ASJSONTEXTMEM...
                            U(10,0)               546D
                            PROTOTYPE
 *RNF7031 JSON_ASXMLTEXT    A(1048572)            569D
  5770WDS V7R3M0  160422 RN        IBM ILE RPG             NOXDB2/EX01DEMO          DKSRV133   28-11-18 18:24:37        Page     30
                            VARYING(4)
                            CCSID(1208)
                            PROTOTYPE
 *RNF7031 JSON_ASXMLTEXTMEM U(10,0)               574D
                            PROTOTYPE
 *RNF7031 JSON_BY_CONTEXT   CONST                  56D
 *RNF7031 JSON_CHILD_LIST   CONST                  84D
 *RNF7031 JSON_CLEAR        PROTOTYPE             698D
 *RNF7031 JSON_CLOSE        PROTOTYPE             703D
          JSON_COPY_CLONE   CONST                 442D   1006
 *RNF7031 JSON_COPYVALUE    *(16)                 381D
                            PROTOTYPE
          JSON_DELETE       PROTOTYPE             398D   1018M   1019M   1029M
                                                 1066M
 *RNF7031 JSON_DONTREPLACE  CONST                 499D
          JSON_DUMP         PROTOTYPE             521D   1028M
          JSON_ERROR        N(1)                  106D   1026
                            PROTOTYPE
 *RNF7031 JSON_EVAL         CONST                  48D
 *RNF7031 JSON_FIELDS       CONST                 786D
          JSON_FOREACH      N(1)                  638D   1045
                            PROTOTYPE
 *RNF7031 JSON_GETATTRFIRST *(16)                 680D
                            PROTOTYPE
 *RNF7031 JSON_GETATTRNAME  A(1048572)            691D
                            VARYING(4)
                            CCSID(1208)
                            PROTOTYPE
 *RNF7031 JSON_GETATTRNEXT  *(16)                 686D
                            PROTOTYPE
 *RNF7031 JSON_GETATTRVALUE A(1048572)            662D
                            VARYING(4)
                            CCSID(1208)
                            PROTOTYPE
 *RNF7031 JSON_GETCHILD     *(16)                 196D
                            PROTOTYPE
          JSON_GETDATE      D(10*ISO-)            372D   1051    1063
                            PROTOTYPE
          JSON_GETINT       I(20,0)               363D   1046    1058
                            PROTOTYPE
          JSON_GETLENGTH    I(10,0)               493D    997
                            PROTOTYPE
 *RNF7031 JSON_GETMESSAGEOBJECT...
                            *(16)                 121D
                            PROTOTYPE
 *RNF7031 JSON_GETNAME      A(1048572)            306D
  5770WDS V7R3M0  160422 RN        IBM ILE RPG             NOXDB2/EX01DEMO          DKSRV133   28-11-18 18:24:37        Page     31
                            VARYING(4)
                            CCSID(1208)
                            PROTOTYPE
 *RNF7031 JSON_GETNAMEASPATH...
                            A(1048572)            312D
                            VARYING(4)
                            CCSID(1208)
                            PROTOTYPE
 *RNF7031 JSON_GETNEXT      *(16)                 190D
                            PROTOTYPE
 *RNF7031 JSON_GETNODEATTRVALUE...
                            A(1048572)            643D
                            VARYING(4)
                            CCSID(1208)
                            PROTOTYPE
          JSON_GETNUM       P(30,15)              354D   1050    1062
                            PROTOTYPE
 *RNF7031 JSON_GETPARENT    *(16)                 202D
                            PROTOTYPE
          JSON_GETSTR       A(1048572)            330D   1047    1048    1049
                            VARYING(4)           1059    1060    1061
                            CCSID(1208)
                            PROTOTYPE
 *RNF7031 JSON_GETSTRJOIN   A(1048572)            340D
                            VARYING(4)
                            CCSID(1208)
                            PROTOTYPE
 *RNF7031 JSON_GETVALUEINT  I(20,0)               293D
                            PROTOTYPE
 *RNF7031 JSON_GETVALUENUM  P(30,15)              285D
                            PROTOTYPE
 *RNF7031 JSON_GETVALUEPTR  *(16)                 299D
                            PROTOTYPE
 *RNF7031 JSON_GETVALUESTR  A(1048572)            277D
                            VARYING(4)
                            CCSID(1208)
                            PROTOTYPE
 *RNF7031 JSON_HAS          N(1)                  152D
                            PROTOTYPE
 *RNF7031 JSON_HTTPREQUEST  *(16)                 914D
                            PROTOTYPE
 *RNF7031 JSON_IGNORE_CASE  CONST                 490D
 *RNF7031 JSON_ISNODE       N(1)                  176D
                            PROTOTYPE
 *RNF7031 JSON_ISNULL       N(1)                  168D
                            PROTOTYPE
  5770WDS V7R3M0  160422 RN        IBM ILE RPG             NOXDB2/EX01DEMO          DKSRV133   28-11-18 18:24:37        Page     32
 *RNF7031 JSON_ISTRUE       N(1)                  160D
                            PROTOTYPE
          JSON_ITERATOR     DS(145)               602D    620     628     639
                            BASED(PROTOTYPE+)     955
 *RNF7031   BREAK           N(1)                  616D
 *RNF7031   COMMA           A(1)                  609D
                            VARYING(2)
 *RNF7031   COUNT           I(10,0)               610D
 *RNF7031   FILLER          A(64)                 617D
 *RNF7031   ISFIRST         N(1)                  606D
 *RNF7031   ISLAST          N(1)                  607D
 *RNF7031   ISLIST          N(1)                  605D
 *RNF7031   ISRECURSIVE     N(1)                  608D
 *RNF7031   LENGTH          I(10,0)               611D
 *RNF7031   LISTARR         *(16)                 614D
 *RNF7031   ROOT            *(16)                 603D
 *RNF7031   SIZE            I(10,0)               612D
 *RNF7031   THIS            *(16)                 604D
 *RNF7031 JSON_LITERAL      CONST                  52D
          JSON_LOCATE       *(16)                 136D   1057
                            PROTOTYPE
 *RNF7031 JSON_LOCATEORCREATE...
                            *(16)                 144D
                            PROTOTYPE
 *RNF7031 JSON_LOOKUPVALUE  *(16)                 479D
                            PROTOTYPE
 *RNF7031 JSON_MAPIX        N(1)                  732D
                            PROTOTYPE
 *RNF7031 JSON_MEMLEAK      N(1)                  708D
                            PROTOTYPE
 *RNF7031 JSON_MEMSTAT      PROTOTYPE             712D
          JSON_MEMUSE       U(20,0)               716D    961    1068
                            PROTOTYPE
 *RNF7031 JSON_MERGEOBJECTS *(16)                 503D
                            PROTOTYPE
          JSON_MESSAGE      A(1024)               113D   1027
                            VARYING(2)
                            PROTOTYPE
 *RNF7031 JSON_META         CONST                 784D
 *RNF7031 JSON_MOVE_NODES   CONST                  62D
          JSON_MOVE_UNLINK  CONST                 441D    994
          JSON_MOVEOBJECTINTO...
                            *(16)                 513D   1040M
                            PROTOTYPE
          JSON_NEWARRAY     *(16)                 427D    976
                            PROTOTYPE
  5770WDS V7R3M0  160422 RN        IBM ILE RPG             NOXDB2/EX01DEMO          DKSRV133   28-11-18 18:24:37        Page     33
          JSON_NEWOBJECT    *(16)                 422D    966    1039
                            PROTOTYPE
          JSON_NODECHECKSUM U(10,0)               417D   1009    1034
                            PROTOTYPE
 *RNF7031 JSON_NODECLONE    *(16)                 392D
                            PROTOTYPE
 *RNF7031 JSON_NODERENAME   N(1)                  182D
                            PROTOTYPE
 *RNF7031 JSON_NODESANITIZE PROTOTYPE             410D
 *RNF7031 JSON_NODETYPE     I(5,0)                321D
                            PROTOTYPE
 *RNF7031 JSON_NODEUNLINK   *(16)                 405D
                            PROTOTYPE
 *RNF7031 JSON_OBJCOPY      CONST                  55D
 *RNF7031 JSON_OBJECT       CONST                  46D
 *RNF7031 JSON_OBJLINK      CONST                  53D
 *RNF7031 JSON_OBJMOVE      CONST                  57D
 *RNF7031 JSON_OBJREPLACE   CONST                  54D
 *RNF7031 JSON_PARSE        CONST                  68D
          JSON_PARSEFILE    *(16)                  88D   1023
                            PROTOTYPE
 *RNF7031 JSON_PARSESTRINGVC...
                            *(16)                  94D
                            PROTOTYPE
 *RNF7031 JSON_POINTER_VALUE...
                            CONST                  49D
 *RNF7031 JSON_REPLACE      CONST                 500D
 *RNF7031 JSON_ROOT         CONST                  51D
 *RNF7031 JSON_ROWARRAY     CONST                 782D
 *RNF7031 JSON_SAME_CASE    CONST                 489D
 *RNF7031 JSON_SEGMENTDISPOSE...
                            PROTOTYPE             726D
 *RNF7031 JSON_SEGMENTSELECTNO...
                            *(16)                 720D
                            PROTOTYPE
 *RNF7031 JSON_SETATTRVALUE PROTOTYPE             670D
 *RNF7031 JSON_SETBOOL      *(16)                 250D
                            PROTOTYPE
          JSON_SETDATE      *(16)                 231D    972M
                            PROTOTYPE
 *RNF7031 JSON_SETDECPOINT  PROTOTYPE             100D
 *RNF7031 JSON_SETEVAL      *(16)                 207D
                            PROTOTYPE
          JSON_SETINT       *(16)                 222D    967M
                            PROTOTYPE
          JSON_SETITERATOR  DS(145)               620D   1044
  5770WDS V7R3M0  160422 RN        IBM ILE RPG             NOXDB2/EX01DEMO          DKSRV133   28-11-18 18:24:37        Page     34
                            PROTOTYPE
 *RNF7031 JSON_SETNODEATTRVALUE...
                            PROTOTYPE             653D
          JSON_SETNUM       *(16)                 241D    971M
                            PROTOTYPE
 *RNF7031 JSON_SETPROCPTR   *(16)                 270D
                            PROTOTYPE
 *RNF7031 JSON_SETPTR       *(16)                 259D
                            PROTOTYPE
 *RNF7031 JSON_SETRECURSIVEITERATOR...
                            DS(145)               628D
                            PROTOTYPE
          JSON_SETSTR       *(16)                 213D    968M    969M    970M
                            PROTOTYPE
 *RNF7031 JSON_SQLCLOSE     PROTOTYPE             841D
 *RNF7031 JSON_SQLCODE      I(10,0)               910D
                            PROTOTYPE
 *RNF7031 JSON_SQLCOLUMNS   I(10,0)               827D
                            PROTOTYPE
 *RNF7031 JSON_SQLCONNECT   *(16)                 900D
                            PROTOTYPE
 *RNF7031 JSON_SQLDISCONNECT...
                            PROTOTYPE             906D
 *RNF7031 JSON_SQLEXEC      N(1)                  848D
                            PROTOTYPE
 *RNF7031 JSON_SQLFETCHNEXT *(16)                 820D
                            PROTOTYPE
 *RNF7031 JSON_SQLFETCHRELATIVE...
                            *(16)                 810D
                            PROTOTYPE
 *RNF7031 JSON_SQLGETINSERTID...
                            I(10,0)               891D
                            PROTOTYPE
 *RNF7031 JSON_SQLGETMETA   *(16)                 895D
                            PROTOTYPE
 *RNF7031 JSON_SQLINSERT    N(1)                  869D
                            PROTOTYPE
 *RNF7031 JSON_SQLOPEN      *(16)                 801D
                            PROTOTYPE
 *RNF7031 JSON_SQLRESULTROW *(16)                 753D
                            PROTOTYPE
          JSON_SQLRESULTSET *(16)                 764D    980
                            PROTOTYPE
 *RNF7031 JSON_SQLROWS      I(10,0)               835D
                            PROTOTYPE
 *RNF7031 JSON_SQLSETOPTIONS...
  5770WDS V7R3M0  160422 RN        IBM ILE RPG             NOXDB2/EX01DEMO          DKSRV133   28-11-18 18:24:37        Page     35
                            PROTOTYPE             746D
 *RNF7031 JSON_SQLUPDATE    N(1)                  857D
                            PROTOTYPE
 *RNF7031 JSON_SQLUPSERT    N(1)                  879D
                            PROTOTYPE
 *RNF7031 JSON_STREAM       *(16)                 582D
                            PROTOTYPE
 *RNF7031 JSON_SUCCESSTRUE  *(16)                 129D
                            PROTOTYPE
 *RNF7031 JSON_TOTALROWS    CONST                 789D
 *RNF7031 JSON_TRACESETID   PROTOTYPE             926D
 *RNF7031 JSON_UNKNOWN      CONST                  45D
 *RNF7031 JSON_UPPERCASE    CONST                 791D
 *RNF7031 JSON_USE_LOCALE   CONST                 476D
 *RNF7031 JSON_VALUE        CONST                  50D
 *RNF7031 JSON_WRITECSVSTMF PROTOTYPE             588D
          JSON_WRITEJSONSTMF...
                            PROTOTYPE             528D   1012M
 *RNF7031 JSON_WRITEXMLSTMF PROTOTYPE             557D
          LEN               I(10,0)               945D    997M
          MEMUSE            I(10,0)               947D    961M   1068
 *RNF7031 MO_MERGE_MATCH    CONST                  78D
 *RNF7031 MO_MERGE_NEW      CONST                  76D
 *RNF7031 MO_MERGE_REPLACE  CONST                  81D
          MSG               A(256)                944D   1027M
                            VARYING(2)
          NAME              A(256)                938D   1047M   1059M
                            VARYING(2)
          PCUSTLIST         *(16)                 950D    976M    977     994
                                                  997    1000    1006    1018
          PCUSTOBJECT       *(16)                 948D   1039M   1040    1044
                                                 1057    1058    1059    1060
                                                 1061    1062    1063
          PCUSTOMER         *(16)                 949D    966M    967     968
                                                  969     970     971     972
                                                  977    1057M   1066
          PMORECUST         *(16)                 951D    980M    994
          PRES              *(16)                 953D    994M
          PROTOTYPE_ONLY    *(16)                 602
          PTOPFIVE          *(16)                 952D   1006M   1009    1012
                                                 1019    1023M   1026    1027
                                                 1028    1029    1034    1040
          STREET            A(256)                939D   1048M   1060M
                            VARYING(2)
          UTF8              A(1048572)             40D     96     123     124
                            VARYING(4)            130     131     140     148
  5770WDS V7R3M0  160422 RN        IBM ILE RPG             NOXDB2/EX01DEMO          DKSRV133   28-11-18 18:24:37        Page     36
                            CCSID(1208)           156     164     172     186
                            TEMPLATE              209     210     217     219
                                                  226     235     245     254
                                                  263     273     277     282
                                                  303     306     312     330
                                                  334     336     340     345
                                                  347     358     367     376
                                                  385     389     471     483
                                                  516     540     569     625
                                                  634     643     648     650
                                                  657     659     662     667
                                                  674     676     691     748
                                                  755     757     766     774
                                                  803     850     852     859
                                                  863     871     875     881
                                                  885     896     902     916
                                                  920
       Indicator References:
          Indicator                            References (D=Defined M=Modified)
          LR                                      960M
        * * * * *   E N D   O F   C R O S S   R E F E R E N C E   * * * * *
  5770WDS V7R3M0  160422 RN        IBM ILE RPG             NOXDB2/EX01DEMO          DKSRV133   28-11-18 18:24:37        Page     37
                       E x t e r n a l   R e f e r e n c e s
       Statically bound procedures:
          Procedure                            References
          nox_Dump                                521    1028
          nox_Error                               106    1026
          nox_HasVC                               152
          nox_Clear                               698
          nox_Close                               703
          nox_MapIx                               732
          nox_isNode                              176
          nox_Delete                              398    1018    1019    1029
                                                 1066
          nox_Stream                              582
          nox_MemUse                              716     961    1068
          nox_ForEach                             638    1045
          nox_MemLeak                             708
          nox_MemStat                             712
          nox_sqlRows                             835
          nox_sqlCode                             910
          nox_IsTrueVC                            160
          nox_IsNullVC                            168
          nox_NewArray                            427     976
          nox_sqlClose                            841
          nox_ParseFile                            88    1023
          nox_MessageVC                           113    1027
          nox_GetNodeVC                           136    1057
          nox_NodeClone                           392
          nox_NewObject                           422     966    1039
          nox_ArrayPush                           431     977
          nox_getLength                           493     997
          nox_AsXmlText                           569
          nox_sqlOpenVC                           801
          nox_sqlExecVC                           848
          nox_GetValueVC                          330    1047    1048    1049
                                                 1059    1060    1061
          nox_NodeUnlink                          405
          nox_ArraySlice                          455    1006
          nox_AsJsonText                          541
          nox_sqlColumns                          827
          nox_sqlConnect                          900
          nox_traceSetId                          926
          nox_SetDecPoint                         100
          nox_SuccessTrue                         129
          nox_GetNodeNext                         190
          nox_GetNodeType                         321
  5770WDS V7R3M0  160422 RN        IBM ILE RPG             NOXDB2/EX01DEMO          DKSRV133   28-11-18 18:24:37        Page     38
          nox_CopyValueVC                         381
          nox_ArrayAppend                         445     994
          nox_ArraySortVC                         467    1000
          nox_GetAttrNext                         686
          nox_sqlUpdateVC                         857
          nox_sqlInsertVC                         869
          nox_sqlUpsertVC                         879
          nox_httpRequest                         914
          nox_NodeRenameVC                        182
          nox_GetNodeChild                        196
          nox_GetStrJoinVC                        341
          nox_NodeSanitize                        410
          nox_NodeCheckSum                        417    1009    1034
          nox_MergeObjects                        503
          nox_WriteXmlStmf                        557
          nox_AsXmlTextMem                        574
          nox_WriteCsvStmf                        588
          nox_SetAttrValue                        670
          nox_GetAttrFirst                        680
          nox_sqlFetchNext                        820
          nox_sqlGetMetaVC                        895
          nox_ParseStringVC                        94
          nox_GetNodeParent                       202
          nox_GetNodeNameVC                       307
          nox_GetValueNumVC                       354    1050    1062
          nox_GetValueIntVC                       363    1046    1058
          nox_lookupValueVC                       479
          nox_WriteJsonStmf                       528    1012
          nox_AsJsonTextMem                       547
          nox_SetIteratorVC                       621    1044
          nox_GetAttrNameVC                       692
          nox_sqlSetOptions                       746
          nox_sqlDisconnect                       906
          nox_SetStrByNameVC                      213     968     969     970
          nox_SetIntByNameVC                      222     967
          nox_SetDecByNameVC                      241     971
          nox_SetPtrByNameVC                      259     270
          nox_GetNodeValueVC                      278
          nox_GetValueDateVC                      372    1051    1063
          nox_NodeMoveIntoVC                      513    1040
          nox_GetAttrValueVC                      663
          nox_SegmentDispose                      726
          nox_sqlResultRowVC                      753
          nox_sqlResultSetVC                      764     987
          nox_sqlGetInsertId                      891
          nox_SetEvalByNameVC                     207
  5770WDS V7R3M0  160422 RN        IBM ILE RPG             NOXDB2/EX01DEMO          DKSRV133   28-11-18 18:24:37        Page     39
          nox_SetDateByNameVC                     231     972
          nox_SetBoolByNameVC                     250
          nox_GetNodeValueNum                     286
          nox_GetNodeValueInt                     293
          nox_GetNodeValuePtr                     299
          nox_SegmentSelectNo                     721
          nox_GetMessageObject                    122
          nox_sqlFetchRelative                    811
          nox_GetOrCreateNodeVC                   144
          nox_GetNodeNameAsPath                   313
          nox_GetNodeAttrValueVC                  644
          nox_SetNodeAttrValueVC                  653
          nox_SetRecursiveIteratorVC              630
       Imported fields:
          Field             Attributes         Defined
          No references in the source.
       Exported fields:
          Field             Attributes         Defined
          No references in the source.
    * * * * *   E N D   O F   E X T E R N A L   R E F E R E N C E S   * * * * *
  5770WDS V7R3M0  160422 RN        IBM ILE RPG             NOXDB2/EX01DEMO          DKSRV133   28-11-18 18:24:37        Page     40
                           M e s s a g e   S u m m a r y
  Msg id  Sv Number Message text
 *RNF5409 00      9 The prototyped call returns a value which is lost when CALLP
                    is used.
 *RNF7031 00    129 The name or indicator is not referenced.
 *RNF3756 20      2 OPTIONS(*NOPASS) is missing for a parameter following an
                    optional parameter.
        * * * * *   E N D   O F   M E S S A G E   S U M M A R Y   * * * * *
  5770WDS V7R3M0  160422 RN        IBM ILE RPG             NOXDB2/EX01DEMO          DKSRV133   28-11-18 18:24:37        Page     41
                             F i n a l   S u m m a r y
   Message Totals:
     Information  (00) . . . . . . . :      138
     Warning      (10) . . . . . . . :        0
     Error        (20) . . . . . . . :        2
     Severe Error (30+)  . . . . . . :        0
     ---------------------------------  -------
     Total . . . . . . . . . . . . . :      140
   Source Totals:
     Records . . . . . . . . . . . . :     1073
     Specifications  . . . . . . . . :      538
     Data records  . . . . . . . . . :        0
     Comments  . . . . . . . . . . . :      526
          * * * * *   E N D   O F   F I N A L   S U M M A R Y   * * * * *
 Compilation stopped. Severity 20 errors found in program.
           * * * * *   E N D   O F   C O M P I L A T I O N   * * * * *
